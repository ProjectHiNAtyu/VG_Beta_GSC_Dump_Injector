// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_F789( var_0 )
{
    if ( var_0._id_EA0F != "intel" )
    {
        _func_013E( "Player has old killstreak data, requires data wipe" );
        var_0._id_EA0F = "intel";
    }

    if ( isdefined( level._id_8DD2 ) )
    {
        if ( !level [[ level._id_8DD2 ]]( var_0 ) )
            return 0;
    }

    if ( isdefined( self._id_82F7 ) && istrue( self._id_82F7 ) )
    {
        if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "hud", "showErrorMessage" ) )
            self [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "hud", "showErrorMessage" ) ]]( "KILLSTREAKS/INTEL_ACTIVE" );

        return 0;
    }

    var_1 = "s4_ks_gesture_generic_mp";
    var_2 = makeweapon( var_1 );
    var_3 = _id_0990::_id_E9FE( var_0, var_2 );

    if ( !istrue( var_3 ) || level._id_609B )
        return 0;

    if ( isdefined( level._id_8DAD ) )
    {
        if ( !level [[ level._id_8DAD ]]( var_0 ) )
            return 0;
    }

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "hud", "teamPlayerCardSplash" ) )
        level thread [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "hud", "teamPlayerCardSplash" ) ]]( "used_intel", var_0.owner );

    self._id_82F7 = 1;
    thread playintelvo( var_0 );
    self _meth_8221();
    thread _id_10B88();
    thread _id_10B87();
    return 1;
}

playintelvo( var_0 )
{
    self endon( "death" );
    self endon( "disconnect" );

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "sound", "playKillstreakDeployDialog" ) )
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "sound", "playKillstreakDeployDialog" ) ]]( self, var_0._id_EA0F );

    wait( _func_0140( "mp_glob_" + self._id_AC2A._id_1068F + "_inac" ) / 1000.0 );
    thread _id_0A64::_id_9120( "intel_loop" );
}

_id_10B88()
{
    self endon( "intel_complete" );
    scripts\engine\utility::waittill_any_2( "death", "disconnect" );
    self._id_82F7 = 0;
    self _meth_8080();
}

_id_10B87()
{
    self endon( "death" );
    self endon( "disconnect" );
    scripts\cp_mp\hostmigration::hostmigration_waitlongdurationwithpause( 35 );
    self._id_82F7 = 0;
    self _meth_8080();
    thread _id_0A64::_id_9120( "intel_time" );
    self notify( "intel_complete" );
}

intelloopvo()
{
    self endon( "death" );
    self endon( "disconnect" );
    self endon( "intel_complete" );

    while ( self._id_82F7 == 1 )
    {
        thread _id_0A64::_id_9120( "intel_loop" );
        wait( getdvarint( "#x36b9c2c42c1a42d66", 8000 ) / 1000 );
    }
}
