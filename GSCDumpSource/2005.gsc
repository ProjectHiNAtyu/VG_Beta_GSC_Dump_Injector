// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    level._id_B002 = [];
    level thread _id_FC19();
    level thread _id_FC1A();
    level thread _id_FD9C();
    level thread _id_10FC3();
}

_id_813D()
{
    self._id_2C7B = [];
    self._id_E49B = [];

    if ( scripts\mp\utility\game::_id_AB13() )
    {
        self._id_2C7B["totalShots"] = self getplayerdata( "mp", "totalShots" );
        self._id_2C7B["accuracy"] = self getplayerdata( "mp", "accuracy" );
        self._id_2C7B["misses"] = self getplayerdata( "mp", "misses" );
        self._id_2C7B["hits"] = self getplayerdata( "mp", "hits" );
    }

    self._id_2C7B["timePlayedAllies"] = self getplayerdata( "mp", "timePlayedAllies" );
    self._id_2C7B["timePlayedOpfor"] = self getplayerdata( "mp", "timePlayedOpfor" );
    self._id_2C7B["timePlayedOther"] = self getplayerdata( "mp", "timePlayedOther" );
    self._id_2C7B["timePlayedTotal"] = self getplayerdata( "mp", "timePlayedTotal" );
    self._id_2C76 = [];
    self._id_2C76["round"] = [];
    self._id_2C76["round"]["timePlayed"] = self getplayerdata( "common", "round", "timePlayed" );

    if ( scripts\mp\utility\game::_id_AB13() )
    {
        self._id_2C76["xpMultiplierTimePlayed"] = [];
        self._id_2C76["xpMultiplierTimePlayed"][0] = self getplayerdata( "mp", "xpMultiplierTimePlayed", 0 );
        self._id_2C76["xpMultiplierTimePlayed"][1] = self getplayerdata( "mp", "xpMultiplierTimePlayed", 1 );
        self._id_2C76["xpMultiplierTimePlayed"][2] = self getplayerdata( "mp", "xpMultiplierTimePlayed", 2 );
        self._id_2C77["xpMaxMultiplierTimePlayed"] = [];
        self._id_2C77["xpMaxMultiplierTimePlayed"][0] = self getplayerdata( "mp", "xpMaxMultiplierTimePlayed", 0 );
        self._id_2C77["xpMaxMultiplierTimePlayed"][1] = self getplayerdata( "mp", "xpMaxMultiplierTimePlayed", 1 );
        self._id_2C77["xpMaxMultiplierTimePlayed"][2] = self getplayerdata( "mp", "xpMaxMultiplierTimePlayed", 2 );
        self._id_2C76["challengeXPMultiplierTimePlayed"] = [];
        self._id_2C76["challengeXPMultiplierTimePlayed"][0] = self getplayerdata( "mp", "challengeXPMultiplierTimePlayed", 0 );
        self._id_2C77["challengeXPMaxMultiplierTimePlayed"] = [];
        self._id_2C77["challengeXPMaxMultiplierTimePlayed"][0] = self getplayerdata( "mp", "challengeXPMaxMultiplierTimePlayed", 0 );
        self._id_2C76["weaponXPMultiplierTimePlayed"] = [];
        self._id_2C76["weaponXPMultiplierTimePlayed"][0] = self getplayerdata( "mp", "weaponXPMultiplierTimePlayed", 0 );
        self._id_2C77["weaponXPMaxMultiplierTimePlayed"] = [];
        self._id_2C77["weaponXPMaxMultiplierTimePlayed"][0] = self getplayerdata( "mp", "weaponXPMaxMultiplierTimePlayed", 0 );
        self._id_2C7B["prestigeDoubleWeaponXp"] = self getplayerdata( "mp", "prestigeDoubleWeaponXp" );
        self._id_2C7B["prestigeDoubleWeaponXpTimePlayed"] = self getplayerdata( "mp", "prestigeDoubleWeaponXpTimePlayed" );
        self._id_2C7C["prestigeDoubleWeaponXpMaxTimePlayed"] = self getplayerdata( "mp", "prestigeDoubleWeaponXpMaxTimePlayed" );
    }

    _id_8133();
}

_id_8133()
{
    var_0 = "mp/bestscorestatsTable.csv";
    self._id_24AC = [];
    self._id_2C75 = [];
    var_1 = 0;

    for (;;)
    {
        var_2 = tablelookupbyrow( var_0, var_1, 0 );

        if ( var_2 == "" )
            break;

        self._id_24AC[var_2] = self getplayerdata( "mp", "bestScores", var_2 );
        var_1++;
    }
}

_id_E75D( var_0, var_1 )
{
    if ( var_0 == "round" )
        return self getplayerdata( "common", var_0, var_1 );
    else
        return self getplayerdata( "mp", var_0, var_1 );
}

_id_E76D( var_0, var_1, var_2, var_3 )
{
    if ( isagent( self ) )
        return;

    if ( istrue( game["practiceRound"] ) )
        return;

    if ( isdefined( var_3 ) || !scripts\mp\utility\game::_id_AB13() )
        return;

    if ( var_0 == "round" )
    {
        self _meth_8364( "common", var_0, var_1, var_2 );
        _id_D48A( var_1, var_2 );
    }
    else
        self _meth_8364( "mp", var_0, var_1, var_2 );
}

_id_E741( var_0, var_1, var_2 )
{
    if ( !scripts\mp\utility\game::_id_AB13() )
        return;

    var_3 = self getplayerdata( "mp", var_0, var_1 );
    self _meth_8364( "mp", var_0, var_1, var_3 + var_2 );
}

_id_E75E( var_0, var_1, var_2 )
{
    if ( !scripts\mp\utility\game::_id_AB13() && !istrue( var_2 ) )
        return 0;

    return self._id_2C76[var_0][var_1];
}

_id_E76E( var_0, var_1, var_2, var_3 )
{
    if ( !scripts\mp\utility\game::_id_AB13() && !istrue( var_3 ) )
        return;

    self._id_2C76[var_0][var_1] = var_2;
}

_id_E742( var_0, var_1, var_2, var_3 )
{
    if ( !scripts\mp\utility\game::_id_AB13() && !istrue( var_3 ) )
        return;

    var_4 = _id_E75E( var_0, var_1, var_3 );
    _id_E76E( var_0, var_1, var_4 + var_2, var_3 );
}

_id_E743( var_0, var_1, var_2, var_3 )
{
    if ( !scripts\mp\utility\game::_id_AB13() )
        return;

    var_4 = _id_E75E( var_0, var_1 ) + var_2;

    if ( var_4 > var_3 )
        var_4 = var_3;

    if ( var_4 < _id_E75E( var_0, var_1 ) )
        var_4 = var_3;

    _id_E76E( var_0, var_1, var_4 );
}

_id_FC19()
{
    wait 0.15;
    var_0 = 0;

    while ( !level._id_609B )
    {
        scripts\mp\hostmigration::_id_10956();
        var_0++;

        if ( var_0 >= level.players.size )
            var_0 = 0;

        if ( isdefined( level.players[var_0] ) )
        {
            level.players[var_0] _id_10FC1();
            level.players[var_0] _id_FD86();
        }

        wait 2.0;
    }
}

_id_FC1A()
{
    level endon( "game_cleanup" );
    level waittill( "game_ended" );

    foreach ( var_1 in level.players )
    {
        var_1 _id_10FC1();
        var_1 _id_FD86();
    }

    level._id_4ADE = 1;
}

_id_D48A( var_0, var_1 )
{
    var_2 = scripts\mp\utility\game::_id_AB13();

    if ( !var_2 )
        return;

    if ( isdefined( self._id_24AC[var_0] ) && var_1 > self._id_24AC[var_0] )
    {
        self._id_24AC[var_0] = var_1;
        self._id_2C75[var_0] = var_1;
    }
}

_id_10FC0()
{
    foreach ( var_1 in level.players )
    {
        if ( isdefined( var_1 ) && var_1 scripts\mp\utility\game::_id_AB13() )
        {
            foreach ( var_4, var_3 in var_1._id_2C75 )
                var_1 _meth_8364( "mp", "bestScores", var_4, var_3 );
        }
    }
}

_id_10FC1()
{
    var_0 = scripts\mp\utility\game::_id_AB13();

    if ( var_0 )
    {
        foreach ( var_3, var_2 in self._id_2C7B )
            self _meth_8364( "mp", var_3, var_2 );

        if ( !isai( self ) )
        {
            foreach ( var_3, var_2 in self._id_E49B )
                self _meth_8364( "rankedloadouts", "squadMembers", var_3, var_2 );
        }
    }

    foreach ( var_3, var_2 in self._id_2C76 )
    {
        foreach ( var_8, var_7 in var_2 )
        {
            if ( var_3 == "round" )
            {
                self _meth_8364( "common", var_3, var_8, var_7 );
                _id_D48A( var_8, var_7 );
                continue;
            }

            if ( var_0 )
                self _meth_8364( "mp", var_3, var_8, var_7 );
        }
    }
}

_id_10FC3()
{
    if ( !scripts\mp\utility\game::_id_9BB3() )
        return;

    level waittill( "game_ended" );
    wait 0.1;

    if ( scripts\mp\utility\game::_id_10A14() || !scripts\mp\utility\game::_id_89F1() && scripts\mp\utility\game::_id_79A6() )
    {
        foreach ( var_1 in level.players )
        {
            var_2 = 0;

            if ( isdefined( var_1.pers["shotsFired"] ) && isdefined( var_1.pers["shotsHit"] ) && var_1.pers["shotsFired"] > 0 )
            {
                var_3 = var_1.pers["shotsFired"];
                var_4 = var_1.pers["shotsHit"];
                var_2 = var_4 / var_3;
            }

            if ( !isdefined( var_1._id_7602 ) )
                var_1._id_7602 = scripts\engine\utility::ter_op( isdefined( var_1.pers["headshots"] ), var_1.pers["headshots"], 0 );

            var_1 _id_7DD9( var_1._id_024B, var_1._id_0146, var_1._id_7602, var_2, var_1.pers["damage"] );
        }
    }
}

_id_7DD9( var_0, var_1, var_2, var_3, var_4 )
{
    if ( !scripts\mp\utility\game::_id_AB13() )
        return;

    for ( var_5 = 0; var_5 < 4; var_5++ )
    {
        var_6 = self getplayerdata( "mp", "kdHistoryK", var_5 + 1 );
        self _meth_8364( "mp", "kdHistoryK", var_5, var_6 );
        var_6 = self getplayerdata( "mp", "kdHistoryD", var_5 + 1 );
        self _meth_8364( "mp", "kdHistoryD", var_5, var_6 );
        var_6 = self getplayerdata( "mp", "headshotHistory", var_5 + 1 );
        self _meth_8364( "mp", "headshotHistory", var_5, var_6 );
        var_6 = self getplayerdata( "mp", "accuracyHistory", var_5 + 1 );
        self _meth_8364( "mp", "accuracyHistory", var_5, var_6 );
        var_6 = self getplayerdata( "mp", "damageHistory", var_5 + 1 );
        self _meth_8364( "mp", "damageHistory", var_5, var_6 );
    }

    self _meth_8364( "mp", "kdHistoryK", 4, int( clamp( var_0, 0, 255 ) ) );
    self _meth_8364( "mp", "kdHistoryD", 4, int( clamp( var_1, 0, 255 ) ) );
    self _meth_8364( "mp", "headshotHistory", 4, int( clamp( var_2, 0, 255 ) ) );
    self _meth_8364( "mp", "accuracyHistory", 4, int( clamp( var_3, 0, 255 ) ) );
    self _meth_8364( "mp", "damageHistory", 4, var_4 );
}

_id_7DDA( var_0, var_1, var_2 )
{
    if ( scripts\mp\utility\weapon::_id_88DC( var_0 ) )
        return;

    if ( istrue( level._id_4ADE ) )
        return;

    if ( scripts\mp\utility\game::_id_AB13() )
    {
        var_3 = self getplayerdata( "mp", "playerStats", "weaponStats", var_0, var_1 );
        self _meth_8364( "mp", "playerStats", "weaponStats", var_0, var_1, var_3 + var_2 );
    }
}

_id_7DD0( var_0, var_1, var_2, var_3 )
{
    if ( istrue( level._id_4ADE ) )
        return;

    if ( !scripts\mp\utility\weapon::_id_1D75( var_0, var_3 ) )
        return;

    if ( scripts\mp\utility\game::_id_AB13() )
    {
        var_4 = self getplayerdata( "mp", "playerStats", "attachmentsStats", var_0, var_1 );
        self _meth_8364( "mp", "playerStats", "attachmentsStats", var_0, var_1, var_4 + var_2 );
    }
}

_id_FD86()
{
    if ( !isdefined( self._id_F40C ) )
        return;

    if ( isnullweapon( self._id_F40C ) )
        return;

    if ( scripts\mp\utility\weapon::_id_8A63( self._id_F40C ) )
    {
        if ( !istrue( scripts\mp\supers::_id_DBF9( self._id_F40C ) ) )
            return;
    }

    if ( scripts\mp\utility\weapon::_id_88DC( self._id_F40C ) || scripts\mp\utility\weapon::_id_881A( self._id_F40C ) || scripts\mp\utility\weapon::_id_876D( self._id_F40C ) )
        return;

    var_0 = self._id_F40C;
    var_1 = undefined;

    if ( var_0._id_022A )
    {
        var_2 = scripts\mp\utility\weapon::_id_1D7D( var_0._id_0490 );

        if ( var_2 == "shotgun" || var_2 == "gl" || var_2 == "glsmoke" || var_2 == "glgas" || var_2 == "glconc" || var_2 == "glflash" || var_2 == "glincendiary" || var_2 == "glsemtex" || var_2 == "glsnap" )
        {
            var_1 = var_2;
            _id_B006( var_1, var_0 );
            _id_AFFB();
            return;
        }
    }

    if ( !isdefined( var_1 ) )
    {
        var_3 = var_0.basename;
        var_4 = _func_00D6( var_3, 0, 3 );

        if ( var_4 == "iw8" || var_4 == "s4_" )
            var_1 = scripts\mp\utility\weapon::getweaponrootname( var_0 );
    }

    if ( !scripts\mp\utility\weapon::_id_8780( var_1 ) && !scripts\mp\utility\weapon::_id_8782( var_1 ) )
        return;

    var_5 = _func_02F2( var_0 );
    _id_AFFC( var_1, var_5 );

    if ( !scripts\mp\utility\weapon::_id_8964( var_0 ) )
        _id_B007( var_1, var_5 );

    var_6 = getweaponattachments( var_0 );

    foreach ( var_2 in var_6 )
    {
        var_8 = scripts\mp\utility\weapon::_id_1D7D( var_2 );

        if ( !scripts\mp\utility\weapon::_id_1D75( var_8, var_0 ) )
            continue;

        switch ( var_8 )
        {
            case "shotgun":
            case "glgas":
            case "glsmoke":
            case "glsnap":
            case "glsemtex":
            case "glincendiary":
            case "gl":
            case "glflash":
            case "glconc":
                continue;
        }

        _id_B006( var_8, var_0 );
    }

    _id_AFFB();
}

_id_AFFB()
{
    self._id_F40C = _func_0370();
    self._id_F411 = 0;
    self._id_F410 = 0;
    self._id_F40F = 0;
    self._id_F40E = 0;
    self._id_F40D = 0;
}

_id_AFFC( var_0, var_1 )
{
    if ( self._id_F411 > 0 )
        _id_7DDA( var_0, "shots", self._id_F411 );

    if ( self._id_F410 > 0 )
        _id_7DDA( var_0, "kills", self._id_F410 );

    if ( self._id_F40F > 0 )
        _id_7DDA( var_0, "hits", self._id_F40F );

    if ( self._id_F40E > 0 )
        _id_7DDA( var_0, "headShots", self._id_F40E );

    if ( self._id_F40D > 0 )
        _id_7DDA( var_0, "deaths", self._id_F40D );
}

_id_B007( var_0, var_1 )
{
    if ( self._id_F411 > 0 )
        scripts\common\utility::_id_F737( level._id_9BA3, var_0, "shots", self._id_F411, var_1 );

    if ( self._id_F410 > 0 )
        scripts\common\utility::_id_F737( level._id_9BA3, var_0, "kills", self._id_F410, var_1 );

    if ( self._id_F40F > 0 )
        scripts\common\utility::_id_F737( level._id_9BA3, var_0, "hits", self._id_F40F, var_1 );

    if ( self._id_F40E > 0 )
        scripts\common\utility::_id_F737( level._id_9BA3, var_0, "headshots", self._id_F40E, var_1 );

    if ( self._id_F40D > 0 )
        scripts\common\utility::_id_F737( level._id_9BA3, var_0, "deaths", self._id_F40D, var_1 );
}

_id_B006( var_0, var_1 )
{
    if ( !scripts\mp\utility\weapon::_id_1D75( var_0, var_1 ) )
        return;

    if ( self._id_F411 > 0 && var_0 != "tactical" )
    {
        _id_7DD0( var_0, "shots", self._id_F411, var_1 );
        scripts\common\utility::_id_F737( level._id_9B99, var_0, "shots", self._id_F411, var_1 );
    }

    if ( self._id_F410 > 0 && var_0 != "tactical" )
    {
        _id_7DD0( var_0, "kills", self._id_F410, var_1 );
        scripts\common\utility::_id_F737( level._id_9B99, var_0, "kills", self._id_F410, var_1 );
    }

    if ( self._id_F40F > 0 && var_0 != "tactical" )
    {
        _id_7DD0( var_0, "hits", self._id_F40F, var_1 );
        scripts\common\utility::_id_F737( level._id_9B99, var_0, "hits", self._id_F40F, var_1 );
    }

    if ( self._id_F40E > 0 && var_0 != "tactical" )
    {
        _id_7DD0( var_0, "headShots", self._id_F40E, var_1 );
        scripts\common\utility::_id_F737( level._id_9B99, var_0, "headShots", self._id_F40E, var_1 );
    }

    if ( self._id_F40D > 0 )
    {
        _id_7DD0( var_0, "deaths", self._id_F40D, var_1 );
        scripts\common\utility::_id_F737( level._id_9B99, var_0, "deaths", self._id_F40D, var_1 );
    }
}

_id_FD9C()
{
    level waittill( "game_ended" );

    if ( !scripts\mp\utility\game::_id_9BB3() )
        return;

    var_0 = 0;
    var_1 = 0;
    var_2 = 0;
    var_3 = 0;
    var_4 = 0;
    var_5 = 0;

    foreach ( var_7 in level.players )
        var_5 = var_5 + var_7._id_F23F["total"];

    _func_03BA( "dlog_event_global_minutes", [ "increment", int( var_5 / 60 ) ] );

    if ( scripts\mp\utility\game::_id_89F1() && !scripts\mp\utility\game::_id_10A14() )
        return;

    waitframe();

    foreach ( var_7 in level.players )
    {
        var_0 = var_0 + var_7._id_024B;
        var_1 = var_1 + var_7._id_0146;
        var_2 = var_2 + var_7._id_006A;
        var_3 = var_3 + var_7 _id_0A7B::_id_6C0A( "headshots" );
        var_4 = var_4 + var_7 _id_0A7B::_id_6C0A( "suicides" );
    }

    _func_03BA( "dlog_event_global_kills", [ "increment", var_0 ] );
    _func_03BA( "dlog_event_global_deaths", [ "increment", var_1 ] );
    _func_03BA( "dlog_event_global_headshots", [ "increment", var_3 ] );
    _func_03BA( "dlog_event_global_suicides", [ "increment", var_4 ] );
    _func_03BA( "dlog_event_global_games", [ "increment", 1 ] );

    if ( !isdefined( level._id_1D04 ) )
        _func_03BA( "dlog_event_global_assists", [ "increment", var_2 ] );
}
