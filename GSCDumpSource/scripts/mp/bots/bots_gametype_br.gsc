// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

main()
{
    if ( scripts\mp\utility\game::_id_6D80() == "dmz" && scripts\mp\gametypes\br_public::_id_87EA() )
        [[ level._id_4BB1 ]]();
    else
    {
        _id_D78A();
        _id_D75D();
    }
}

_id_D78A()
{
    level._id_2777["gametype_think"] = ::_id_26E7;
}

_id_D75D()
{
    setdvarifuninitialized( "#x35f282ebbc5fa948", 0.25 );
}

_id_26E7()
{
    self notify( "bot_br_think" );
    self endon( "bot_br_think" );
    self endon( "death_or_disconnect" );
    level endon( "game_ended" );
    var_0 = randomfloat( 1 ) < getdvarfloat( "#x35f282ebbc5fa948", 0.0 );
    thread _id_16AF();
    self _meth_8053( "ignore_nodes", 1 );

    for (;;)
    {
        if ( scripts\mp\gametypes\br_public::_id_8773() && !_id_07A8::_id_609F( "graceperiod_done" ) )
        {
            self._id_020F = 0;
            wait 0.05;
            continue;
        }

        if ( isdefined( self._id_2A38 ) )
        {
            if ( scripts\mp\gametypes\br_public::_id_8773() && !isdefined( self._id_7E0F ) )
            {
                self._id_020F = 1;
                self _meth_802A();
            }

            self _meth_8053( "disable_all_ai", 1 );

            if ( ( scripts\mp\gametypes\br_public::_id_8971() || var_0 ) && istrue( level._id_2E10 ) )
            {
                var_1 = level._id_29CE.origin;
                var_2 = vectornormalize( level._id_7E5E._id_2E14._id_5320 - var_1 );
                var_3 = ( level._id_2A4D._id_2A52[0][0] - var_1[0] ) / var_2[0];
                var_4 = ( level._id_2A4D._id_2A52[0][1] - var_1[0] ) / var_2[0];
                var_5 = ( level._id_2A4D._id_2A52[0][1] - var_1[1] ) / var_2[1];
                var_6 = ( level._id_2A4D._id_2A52[1][1] - var_1[1] ) / var_2[1];
                var_7 = [ var_3, var_4, var_5, var_6 ];
                var_8 = -1;

                foreach ( var_10 in var_7 )
                {
                    if ( var_10 > 0 )
                    {
                        if ( var_8 < 0 || var_10 < var_8 )
                            var_8 = var_10;
                    }
                }

                var_12 = var_1 + var_2 * var_8;
                var_13 = scripts\mp\gametypes\br_c130::_id_6921();
                var_14 = var_8 / var_13;
                var_15 = randomfloatrange( 0.1, 0.9 ) * var_14;
                wait( var_15 );

                if ( scripts\mp\gametypes\br_public::_id_8971() )
                    self notify( "halo_jump_c130" );
                else
                    self notify( "halo_jump_solo_c130" );

                self._id_726B = 1;

                if ( getdvarint( "scr_bot_allow_gulag", 1 ) > 0 )
                    self._id_726B = 0;

                self._id_8C86 = 1;

                while ( isdefined( self._id_2A38 ) )
                    wait 0.05;
            }

            wait 0.05;
            continue;
        }

        if ( scripts\mp\gametypes\br_public::_id_8977() )
        {
            thread _id_27BE();
            scripts\engine\utility::waittill_any_2( "death_or_disconnect", "gulag_end" );
            wait 3;
        }
        else
            self _meth_8029();

        if ( isdefined( level._id_29F5 ) && _func_03D7() )
        {
            var_16 = undefined;
            var_17 = self _meth_8041();

            if ( var_17 )
                var_16 = self _meth_803A();

            if ( !_id_09D0::_id_27C7() && !_id_09D1::_id_27E9() )
            {
                if ( ( istrue( self _meth_86B4() ) || istrue( self isskydiving() ) ) && istrue( self._id_8C86 ) && istrue( scripts\mp\gametypes\br_public::_id_8773() ) )
                {
                    self _meth_8053( "disable_all_ai", 0 );
                    self _meth_802A();
                    _id_2853();
                }

                if ( scripts\mp\gametypes\br_public::_id_8773() && !isdefined( self._id_7E0F ) )
                {
                    self._id_020F = 1;
                    wait 1;
                    continue;
                }

                var_18 = self _meth_86E5();
                var_19 = !var_17 || !var_18 || !scripts\mp\gametypes\br_circle::_id_899B( var_16 );

                if ( var_17 )
                {
                    var_20 = distancesquared( self.origin, var_16 );
                    var_21 = self _meth_803C();
                    var_22 = var_20 < var_21 * var_21;

                    if ( !var_22 )
                        self._id_9093 = undefined;
                    else if ( !isdefined( self._id_9093 ) )
                        self._id_9093 = gettime();
                }

                var_23 = level._id_285E[self._id_B010] == "stationary";

                if ( isdefined( self._id_9093 ) )
                {
                    var_24 = 0;

                    if ( var_23 )
                        var_24 = 20000;

                    var_19 = var_19 || gettime() - self._id_9093 >= var_24;
                }

                if ( var_19 )
                {
                    var_25 = scripts\mp\gametypes\br_circle::_id_6CAC();
                    var_26 = self _meth_86F5( var_25 );

                    if ( isdefined( var_26 ) )
                    {
                        self _meth_8057( var_26, 1024, "hunt", undefined, undefined, !var_23 );
                        self._id_9093 = gettime();
                    }
                }
            }
        }
        else
            _id_09CE::_id_FBA6();

        wait 0.05;
    }
}

_id_2853()
{
    self endon( "death_or_disconnect" );
    self._id_020F = 1;
    self._id_47F5 = _id_27A0();
    var_0 = gettime() + randomfloatrange( 5, 10 ) * 1000;
    var_1 = 0;

    while ( istrue( self _meth_86B4() ) || istrue( self isskydiving() ) )
    {
        if ( level._id_29F5._id_370B > 0 && istrue( level._id_3703 ) && !scripts\mp\gametypes\br_circle::_id_899B( self._id_47F5 ) )
            self._id_47F5 = _id_27A0();

        var_2 = _id_2791( self, self._id_47F5 );
        var_3 = 1;
        self _meth_8044( self._id_47F5, 0.05, "script_forced" );
        self _meth_8059( var_2[1], 0.05, var_3 );

        if ( gettime() > var_0 && !var_1 )
        {
            self _meth_804D( "jump", 1 );
            var_1 = 1;
        }

        wait 0.05;
    }

    self._id_7E0F = 1;
    self _meth_8044( undefined );
    self._id_020F = 0;
    _id_27B6();
}

_id_27A0( var_0 )
{
    if ( !isdefined( level._id_5F28 ) || level._id_5F28.size < 1 )
    {
        level._id_5F28 = _id_6519();
        level._id_5F28 = scripts\engine\utility::_id_1B94( level._id_5F28 );
    }

    if ( isdefined( level._id_29F5 ) && _func_03D7() )
    {
        var_1 = scripts\engine\utility::random( level._id_5F28 );

        if ( isdefined( var_1 ) )
        {
            var_2 = var_1.origin;
            level._id_5F28 = scripts\engine\utility::array_remove( level._id_5F28, var_1 );
        }
        else
            var_2 = scripts\mp\gametypes\br_circle::_id_6CAC();

        return _func_02A6( var_2, self );
    }

    return undefined;
}

_id_6519()
{
    var_0 = scripts\mp\gametypes\br_circle::_id_69A7();
    var_1 = scripts\mp\gametypes\br_circle::_id_69A6();
    return scripts\engine\utility::_id_634A( var_1, level._id_2807, undefined, undefined, var_0 );
}

_id_2791( var_0, var_1 )
{
    var_2 = vectornormalize( var_1 - var_0.origin );
    return vectortoangles( var_2 );
}

_id_2795( var_0, var_1 )
{
    return distance( var_0.origin, var_1 );
}

_id_27B5()
{
    if ( !isdefined( level._id_26D7 ) )
        level._id_26D7 = [];

    var_0 = scripts\engine\utility::random( level._id_26D7 );

    switch ( var_0 )
    {
        default:
            break;
    }

    var_1 = [[ level._id_5D49 ]]( [[ level._id_5D71 ]]( var_0 ), [], "none", "none", -1 );
    self giveweapon( var_1 );
    self setweaponammoclip( var_1, weaponclipsize( var_1 ) );
    self setweaponammostock( var_1, weaponclipsize( var_1 ) );
    self _meth_83FF( "none" );
}

_id_27B6()
{
    self _meth_83FF( "none" );
    var_0 = _id_6427();

    if ( !isdefined( var_0 ) )
    {
        var_0 = spawnstruct();
        var_0.origin = _id_6CAD();
    }

    var_0._id_37CC = 1;
    var_1 = level._id_285E[self._id_B010] == "stationary";
    self _meth_8057( self _meth_86F5( var_0.origin ), 256, "guard", undefined, undefined, !var_1 );
    scripts\engine\utility::waittill_any_2( "goal", "last_stand_start" );
    var_0._id_37CC = undefined;

    if ( !istrue( self._id_82AC ) )
        _id_27B5();

    _id_26E6();
}

_id_6427()
{
    var_0 = _id_6428();
    var_0 = _func_01FF( var_0, self.origin );
    var_1 = _id_63DA( var_0 );

    if ( !isdefined( var_1 ) )
        var_1 = _id_63B7( var_0 );

    return var_1;
}

_id_6428()
{
    var_0 = scripts\mp\gametypes\br_circle::_id_69A7();
    var_1 = scripts\mp\gametypes\br_circle::_id_69A6();
    var_2 = scripts\engine\utility::_id_634A( var_1, level._id_274C, undefined, undefined, var_0 );
    return var_2;
}

_id_63DA( var_0 )
{
    foreach ( var_2 in var_0 )
    {
        if ( !istrue( var_2._id_37CC ) )
            return var_2;
    }

    return undefined;
}

_id_63B7( var_0 )
{
    return scripts\engine\utility::_id_694A( self.origin, var_0 );
}

_id_4EE6()
{
    self endon( "death_or_disconnect" );

    for (;;)
        wait 0.05;
}

_id_26E6()
{
    var_0 = level._id_285E[self._id_B010] == "stationary";
    var_1 = 0;

    for (;;)
    {
        var_2 = _id_6CA9();
        var_1 = _id_27E2() || istrue( level._id_3703 );

        if ( var_1 )
            var_2 = _id_6CAD();

        if ( isdefined( var_2 ) )
        {
            var_3 = _id_27A6();

            if ( istrue( level._id_2925 ) && isdefined( var_3 ) && !var_1 )
            {
                thread _id_FBAA();
                self _meth_812E( var_3 );

                if ( self _meth_8039() != "run_and_gun" )
                    _id_09D1::_id_28A2( "run_and_gun" );

                if ( self _meth_8041() )
                    self _meth_802A();

                if ( !isdefined( self._id_B425 ) )
                {
                    self _meth_8056( var_3 );
                    self._id_B425 = var_3;
                }
            }
            else
            {
                self._id_B425 = undefined;
                self notify( "update_on_death" );

                if ( self _meth_8041() )
                    self _meth_802A();

                self _meth_8029();

                if ( var_1 )
                    self _meth_8057( var_2, 128, "critical", undefined, undefined, 0 );
                else
                    self _meth_8057( var_2, 400, "guard", undefined, undefined, 0 );

                if ( istrue( var_1 ) )
                    var_1 = 0;

                thread _id_AEBF();
                var_4 = scripts\engine\utility::_id_1088A( self, "goal", self, "bad path", level, "br_circle_started", self, "last_stand_start", self, "path_timeout" );

                if ( isdefined( var_4 ) && ( var_4 != "bad path" && var_4 != "br_circle_started" && var_4 != "path_timeout" && var_4 != "last_stand_start" ) )
                {
                    var_5 = gettime() + randomintrange( 3, 8 ) * 1000;

                    while ( gettime() < var_5 )
                    {
                        if ( _id_27E2() )
                        {
                            self._id_B425 = undefined;
                            self notify( "update_on_death" );
                            break;
                        }

                        wait 0.1;
                    }
                }
            }
        }

        wait 1;
    }
}

_id_AEBF()
{
    self endon( "last_stand_start" );
    level endon( "game_ended" );
    self endon( "goal" );
    self endon( "bad path" );
    level endon( "br_circle_started" );
    wait 15;
    self notify( "path_timeout" );
}

_id_27BE()
{
    self endon( "death_or_disconnect" );
    self endon( "gulag_end" );
    level endon( "game_ended" );
    var_0 = level._id_285E[self._id_B010] == "stationary";
    self._id_B425 = undefined;
    self._id_0213 = 1;
    self._id_020F = 1;
    self _meth_802A();

    while ( !istrue( self._id_7246 ) )
        wait 1;

    self._id_0213 = 0;
    self._id_020F = 0;
    _id_09D1::_id_28A2( "run_and_gun" );

    for (;;)
    {
        var_1 = self._id_1A34;

        foreach ( var_3 in var_1._id_1A96 )
        {
            if ( var_3 == self )
                continue;

            if ( istrue( var_1._id_AD5C ) && isdefined( var_1._id_4CED ) && isdefined( var_1._id_4CED._id_1A7E ) && isdefined( var_1._id_4CED._id_1A7E._id_5C1F ) )
            {
                self _meth_8057( var_1._id_4CED._id_1A7E._id_5C1F.origin, 64, "objective" );
                self _meth_8029();
                continue;
            }

            self _meth_812E( var_3 );
            self _meth_8057( self _meth_86F5( var_3.origin ), 256, "guard" );
            self _meth_8056( var_3 );
        }

        wait 3;
    }
}

_id_16AF()
{
    self endon( "death_or_disconnect" );

    for (;;)
    {
        var_0 = self getweaponslistprimaries();

        if ( var_0.size == 1 && var_0[0].basename == "s4_me_fists_mp" )
        {
            wait 1;
            continue;
        }

        foreach ( var_2 in var_0 )
        {
            if ( self getweaponammostock( var_2 ) < weaponclipsize( var_2 ) )
                self setweaponammostock( var_2, weaponclipsize( var_2 ) );
        }

        wait 0.1;
    }
}

_id_27A6()
{
    if ( isdefined( level._id_B426 ) && gettime() <= level._id_B426 )
        return undefined;

    var_0 = _id_6651();

    if ( !isdefined( var_0 ) )
        return undefined;

    return var_0;
}

_id_2928()
{
    var_0 = 0;

    foreach ( var_2 in level.players )
    {
        if ( !isbot( var_2 ) )
            continue;

        if ( var_2 _id_27C5() )
            var_0++;
    }

    return var_0;
}

_id_27C5()
{
    return isdefined( self._id_B425 );
}

_id_6651()
{
    var_0 = _id_6641();
    var_1 = _func_0214( 3000 );

    if ( istrue( self._id_82AC ) || scripts\mp\gametypes\br_public::_id_8977() )
        return undefined;

    if ( !isdefined( var_0 ) || istrue( var_0._id_82AC ) || !isalive( var_0 ) || var_0 scripts\mp\gametypes\br_public::_id_8977() )
        return undefined;

    if ( _id_27E2() )
        return undefined;

    var_2 = _id_6302();

    if ( var_2 >= 3 )
    {
        if ( distancesquared( var_0.origin, self.origin ) > var_1 )
            return undefined;

        var_3 = _id_2928();

        if ( _id_27C5() )
            return var_0;

        if ( var_3 >= 1 )
            return undefined;

        return var_0;
    }
    else
        return var_0;
}

_id_6641()
{
    foreach ( var_1 in level.players )
    {
        if ( !isbot( var_1 ) )
            return var_1;
    }
}

_id_FBAA()
{
    self notify( "update_on_death" );
    self endon( "update_on_death" );
    scripts\engine\utility::_id_1087F( "death", "death_or_disconnect", "last_stand_start" );
    self._id_B425 = undefined;
    level._id_B426 = gettime() + 7;
}

_id_27E2()
{
    var_0 = scripts\mp\gametypes\br_circle::_id_69A6();
    var_1 = scripts\mp\gametypes\br_circle::_id_69A7();

    if ( istrue( level._id_3703 ) )
    {
        var_0 = scripts\mp\gametypes\br_circle::_id_6CE3();
        var_1 = scripts\mp\gametypes\br_circle::_id_6CE4();
    }

    if ( scripts\mp\gametypes\br_public::_id_8977() )
        return 0;

    if ( !isalive( self ) || self.sessionstate != "playing" )
        return 0;

    return !scripts\engine\utility::_id_89A0( self.origin, var_0, var_1 );
}

_id_6CAA( var_0 )
{
    var_1 = scripts\mp\gametypes\br_circle::_id_6CAC();

    if ( !isdefined( var_0 ) )
        var_0 = 1000;

    if ( distance2d( self.origin, var_1 ) > var_0 )
    {
        var_2 = vectortoangles( var_1 - self.origin );
        var_3 = anglestoforward( var_2 );
        var_1 = self.origin + var_3 * var_0;
    }

    return self _meth_86F5( var_1 );
}

_id_6CAD()
{
    var_0 = scripts\mp\gametypes\br_circle::_id_6CE3();
    var_1 = scripts\mp\gametypes\br_circle::_id_6CE4();
    var_2 = scripts\mp\gametypes\br_circle::_id_6CA8( var_0, var_1, 0.75, 0.9, 1, 1 );
    return self _meth_86F5( var_2 );
}

_id_6CA9()
{
    var_0 = gettime() + 5000;

    while ( gettime() < var_0 )
    {
        var_1 = scripts\mp\gametypes\br_circle::_id_6CA8( self.origin, 750, 0.6, 1, 1, 1 );
        var_2 = self _meth_86F5( var_1 );

        if ( _id_899A( var_2 ) )
            return var_2;

        wait 0.05;
    }

    var_3 = scripts\mp\gametypes\br_circle::_id_6CAC();
    return self _meth_86F5( var_3 );
}

_id_899A( var_0 )
{
    var_1 = scripts\mp\gametypes\br_circle::_id_69A6();
    var_2 = scripts\mp\gametypes\br_circle::_id_69A7();
    return scripts\engine\utility::_id_89A0( var_0, var_1, var_2 );
}

_id_6302()
{
    var_0 = 0;

    foreach ( var_2 in level.players )
    {
        if ( !isbot( var_2 ) || !isalive( var_2 ) || var_2.sessionstate != "playing" )
            continue;

        var_0++;
    }

    return var_0;
}

_id_290A( var_0 )
{
    var_1 = level._id_EF67[var_0.team]["alivePlayers"];

    if ( scripts\engine\utility::array_contains( var_1, self ) )
        return 1;

    return 0;
}
