// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    var_0 = scripts\mp\gametypes\br_quest_util::_id_C293( "timedrun", 1 );
    scripts\mp\gametypes\br_quest_util::_id_6C75( "timedrun" )._id_9F7D = getdvarint( "scr_br_tr_missionTimeBase", 120 );
    scripts\mp\gametypes\br_quest_util::_id_6C75( "timedrun" )._id_8DE9 = getdvarint( "scr_br_tr_kioskSearchRadiusMax", 23000 );
    scripts\mp\gametypes\br_quest_util::_id_6C75( "timedrun" )._id_8DEA = getdvarint( "scr_br_tr_kioskSearchRadiusMin", 10000 );
    scripts\mp\gametypes\br_quest_util::_id_6C75( "timedrun" )._id_8DE7 = getdvarint( "scr_br_tr_kioskSearchRadiusIdealMax", 23000 );
    scripts\mp\gametypes\br_quest_util::_id_6C75( "timedrun" )._id_8DE8 = getdvarint( "scr_br_tr_kioskSearchRadiusIdealMin", 17000 );
    scripts\mp\gametypes\br_quest_util::_id_C299( "timedrun", ::_id_F3B2 );
    scripts\mp\gametypes\br_quest_util::_id_C27A( "timedrun", ::_id_F3B0 );

    if ( !var_0 )
        return;

    scripts\mp\gametypes\br_quest_util::_id_C2B1( "timedrun", ::_id_F6A1 );
    scripts\mp\gametypes\br_quest_util::_id_C296( "timedrun_locale" );
    scripts\mp\gametypes\br_quest_util::_id_C241( "timedrun_locale", ::_id_F3AA );
    scripts\mp\gametypes\br_quest_util::_id_C299( "timedrun_locale", ::_id_F3B1 );
    scripts\mp\gametypes\br_quest_util::_id_C278( "timedrun_locale", ::_id_F3AC );
    scripts\mp\gametypes\br_quest_util::_id_C280( "timedrun_locale", ::_id_F3B3 );
    scripts\mp\gametypes\br_quest_util::_id_C295( "timedrun_locale", ::_id_F3A9 );
    scripts\mp\gametypes\br_quest_util::_id_C297( "timedrun_locale", ::_id_F3AB, 0.1 );
    game["dialog"]["mission_timedrun_accept"] = "mission_mission_time_accept";
    game["dialog"]["mission_timedrun_fail"] = "mission_mission_time_failed";
}

_id_F6A1()
{
    var_0 = _id_F3AE( self );
    var_1 = scripts\mp\gametypes\br_quest_util::_id_5AE4( "timedrun", var_0 );

    if ( !isdefined( var_1 ) )
        return 0;

    self._id_C58C = var_1;
    return 1;
}

_id_EDD0( var_0 )
{
    var_1 = scripts\mp\gametypes\br_quest_util::_id_4017( "timedrun", self.team, var_0._id_0219, var_0 );
    var_1 scripts\mp\gametypes\br_quest_util::_id_C2B2( self.team, self );
    var_1.team = self.team;
    var_1._id_E6DE = self.origin;
    var_1._id_E708 = self;
    scripts\mp\gametypes\br_quest_util::_id_6FE3( self.team, "br_mission_pickup_tablet" );
    var_2 = _id_F3AE( var_0 );
    var_1._id_E72A = gettime();
    var_3 = var_1 scripts\mp\gametypes\br_quest_util::_id_C572( "timedrun_locale", var_2, 1 );
    var_3.team = self.team;

    if ( !var_3._id_521F )
    {
        var_1._id_034B = "no_locale";
        var_1 scripts\mp\gametypes\br_quest_util::_id_C2F7( self.team );
        var_4 = spawnstruct();
        var_4.origin = var_0.origin;
        var_4.angles = var_0.angles;
        var_4._id_8B20 = 0;

        if ( getdvar( "scr_br_gametype", "" ) == "dmz" )
        {
            var_5 = "mp/loot_set_cache_contents_dmz.csv";
            var_4 scripts\mp\gametypes\br_lootcache::_id_357C( 0, 1, "health", var_5 );
            var_4 scripts\mp\gametypes\br_lootcache::_id_357C( 0, 2, "ammo", var_5 );
            var_4 scripts\mp\gametypes\br_lootcache::_id_357C( 1, 1, "plunder", var_5 );
        }
        else
        {
            var_4 scripts\mp\gametypes\br_lootcache::_id_357C( 0, 1, "health" );
            var_4 scripts\mp\gametypes\br_lootcache::_id_357C( 0, 2, "ammo" );
            var_4 scripts\mp\gametypes\br_lootcache::_id_357C( 1, 1, "plunder" );
        }

        return;
    }

    scripts\mp\gametypes\br_quest_util::_id_BEAC( "timedrun", 1 );
    scripts\mp\gametypes\br_quest_util::_id_C281( "timedrun", ::_id_F3AF );
    var_1 scripts\mp\gametypes\br_quest_util::_id_BEAD( getdvarint( "scr_br_timedrun_questTimeBase", getdvarint( "scr_br_tr_missionTimeBase", 120 ) ), 4 );
    scripts\mp\gametypes\br_quest_util::_id_10EF( "timedrun", var_1 );
    scripts\mp\gametypes\br_quest_util::_id_E729( "timedrun", self, self.team );
    var_6 = spawnstruct();
    var_6._id_56BD = [];
    var_6._id_56BD[0] = self;
    var_6._id_B96A = scripts\mp\gametypes\br_quest_util::_id_6C79( "timedrun", scripts\mp\gametypes\br_quest_util::_id_6C84( self.team ) );
    scripts\mp\gametypes\br_quest_util::_id_4B59( self, "br_timedrun_quest_start_tablet_finder", var_6 );
    scripts\mp\gametypes\br_quest_util::_id_4B61( var_1.team, "br_timedrun_quest_start_team_notify", var_6 );
    level thread scripts\mp\gametypes\br_public::_id_2BB8( "mission_timedrun_accept", var_1.team, 1, 1 );
}

_id_34DF( var_0 )
{
    if ( var_0.team == self._id_EABB[0].team )
        return 1;
    else
        return 0;
}

_id_F3B4( var_0 )
{
    var_1 = spawnstruct();
    var_1._id_CFA8 = "GetEntitylessScriptableArray";
    var_1._id_CFA2 = var_0;
    var_1._id_CFAD = 6000;
    var_1._id_CFAE = 0;
    var_1._id_CFAB = 4000;
    var_1._id_CFAC = 0;
    var_1._id_9F2A = 1;
    return var_1;
}

_id_F3AE( var_0 )
{
    var_1 = spawnstruct();
    var_1._id_CFA8 = "getKiosks";
    var_1._id_02FA = "br_plunder_box";
    var_1._id_E759 = "visible";
    var_1._id_CFA2 = var_0.origin;
    var_1._id_CFAD = scripts\mp\gametypes\br_quest_util::_id_6C75( "timedrun" )._id_8DE9;
    var_1._id_CFAE = scripts\mp\gametypes\br_quest_util::_id_6C75( "timedrun" )._id_8DEA;
    var_1._id_CFAB = scripts\mp\gametypes\br_quest_util::_id_6C75( "timedrun" )._id_8DE7;
    var_1._id_CFAC = scripts\mp\gametypes\br_quest_util::_id_6C75( "timedrun" )._id_8DE8;
    var_1._id_CFA5 = 1;
    var_1._id_C58C = var_0._id_C58C;
    var_1._id_9F2A = 1;
    return var_1;
}

_id_F3AD( var_0 )
{
    foreach ( var_2 in scripts\mp\utility\teams::_id_6DAC( self.team, "players" ) )
    {
        if ( distance2d( self._id_E6DE, var_2.origin ) < 1500 )
        {
            if ( isdefined( var_2._id_FFF1 ) )
                return;
        }
    }

    var_4 = _func_0098( "script_vehicle", "classname", var_0._id_CFA2, var_0._id_CFAD );
    var_4 = _func_01FF( var_4, var_0._id_CFA2 );

    foreach ( var_6 in var_4 )
    {
        if ( var_6._id_8802 )
        {
            self._id_EF0C = var_6;
            break;
        }
        else if ( var_6._id_AD9B == self.team )
            break;
    }

    if ( !isdefined( self._id_EF0C ) )
        return;

    self._id_1031F = scripts\mp\utility\outline::_id_ACBF( self._id_EF0C, self.team, "outlinefill_nodepth_yellow", "level_script" );
    thread _id_3881();
    thread _id_10B0D();
}

_id_10B0D()
{
    level endon( "game_ended" );
    self endon( "remove_TR_Outline" );
    var_0 = scripts\mp\utility\teams::_id_6DAC( self.team, "players" );
    scripts\engine\utility::_id_10887( var_0, "vehicle_enter" );

    foreach ( var_2 in var_0 )
    {
        if ( distance2d( var_2.origin, self._id_EF0C.origin ) < 2000 )
        {
            scripts\mp\utility\outline::outlinedisable( self._id_1031F, self._id_EF0C );
            self notify( "remove_TR_Outline" );
        }
    }
}

_id_3881()
{
    level endon( "game_ended" );
    self endon( "remove_TR_Outline" );

    for (;;)
    {
        if ( self._id_EF0C._id_8802 != 1 || gettime() > self._id_E72A + 60000 )
        {
            scripts\mp\utility\outline::outlinedisable( self._id_1031F, self._id_EF0C );
            self notify( "remove_TR_Outline" );
        }

        wait 0.2;
    }
}

_id_F3AA( var_0 )
{
    var_1 = scripts\mp\gametypes\br_quest_util::_id_3FEB( "timedrun_locale", "timedrun", self.team );

    if ( !isdefined( var_0 ) )
    {
        var_1._id_411F = ( 0, 0, 0 );
        var_1._id_521F = 0;
        return var_1;
    }

    var_1._id_B6FE = scripts\mp\utility\teams::_id_6DAC( self.team, "players" );
    var_1._id_411F = var_0.origin;
    var_1 scripts\mp\gametypes\br_quest_util::_id_4018( "ui_mp_br_mapmenu_icon_timedrun_objective", "current", var_1._id_411F + ( 0, 0, 65 ) );
    scripts\mp\gametypes\br_quest_util::_id_10EF( "timedrun_locale", var_1 );
    var_1 _id_D87D( var_0 );
    return var_1;
}

_id_D87D( var_0 )
{
    if ( !isdefined( var_0 ) )
    {
        var_1 = self._id_EABB[0];

        foreach ( var_3 in scripts\mp\utility\teams::_id_6DAC( var_1.team, "players" ) )
            var_3 _id_0A70::_id_D5DE( "br_assassination_notargets", undefined, 5 );

        var_1._id_034B = "no_locale";
        var_5 = spawnstruct();
        var_5.origin = self._id_411F;
        var_5.angles = ( 0, 0, 0 );
        var_5._id_8B20 = 0;

        if ( getdvar( "scr_br_gametype", "" ) == "dmz" )
        {
            var_6 = "mp/loot_set_cache_contents_dmz.csv";
            var_5 scripts\mp\gametypes\br_lootcache::_id_357C( 0, 1, "health", var_6 );
            var_5 scripts\mp\gametypes\br_lootcache::_id_357C( 0, 2, "ammo", var_6 );
            var_5 scripts\mp\gametypes\br_lootcache::_id_357C( 1, 1, "plunder", var_6 );
        }
        else
        {
            var_5 scripts\mp\gametypes\br_lootcache::_id_357C( 0, 1, "health" );
            var_5 scripts\mp\gametypes\br_lootcache::_id_357C( 0, 2, "ammo" );
            var_5 scripts\mp\gametypes\br_lootcache::_id_357C( 1, 1, "plunder" );
        }

        var_1 scripts\mp\gametypes\br_quest_util::_id_C501();
        return 0;
    }

    self._id_EEB1 = var_0;
    thread _id_F209( self._id_EEB1.origin );
    _id_FD60();
    return 1;
}

_id_F209( var_0, var_1 )
{
    var_2 = spawnfx( level._effect["vfx_marker_base_orange_pulse"], var_0 + ( 0, 0, 10 ) );
    var_2.angles = vectortoangles( ( 0, 0, 1 ) );
    var_2 hide();
    wait 0.5;
    triggerfx( var_2 );

    foreach ( var_4 in scripts\mp\utility\teams::_id_6DAC( self.team, "players" ) )
        var_2 showtoplayer( var_4 );

    self._id_5AF9 = var_2;
}

_id_F3B2()
{
    scripts\mp\gametypes\br_quest_util::_id_C2F7( self.team );
}

_id_F3B1()
{
    _id_4777();
    self._id_5AF9 delete();
    self._id_B6FE = undefined;
    self._id_EABB = undefined;
}

_id_F3AB()
{
    foreach ( var_1 in scripts\mp\utility\teams::_id_6DAC( self.team, "players" ) )
    {
        if ( distance( var_1.origin, self._id_411F ) < 150 )
            self._id_EABB[0] _id_3B12( self._id_EEB1 );
    }
}

_id_3B12( var_0 )
{
    var_1 = spawnstruct();
    var_2 = scripts\mp\gametypes\br_quest_util::_id_6C84( self.team );
    var_3 = scripts\mp\gametypes\br_quest_util::_id_6C76( "timedrun" );
    var_4 = scripts\mp\gametypes\br_quest_util::_id_6C7E( scripts\mp\gametypes\br_quest_util::_id_6C7D( "timedrun" ) );
    var_1._id_ADB8 = scripts\mp\gametypes\br_quest_util::_id_ADBB( var_3, var_2, var_4 );
    scripts\mp\gametypes\br_quest_util::_id_4B61( self.team, "br_timedrun_quest_complete", var_1 );
    level thread scripts\mp\gametypes\br_public::_id_2BB8( "mission_misc_success", self.team, 1, 1 );
    var_5 = scripts\mp\utility\teams::_id_6DAC( self.team, "players" );

    foreach ( var_7 in var_5 )
    {
        if ( isdefined( var_7 ) && !istrue( var_7._id_2A3D ) )
            scripts\mp\gametypes\br_armory_kiosk::_id_8DEB( var_0, var_7 );
    }

    self._id_C7FD = undefined;
    self._id_034B = "success";
    scripts\mp\gametypes\br_quest_util::_id_C501();
}

_id_58C1()
{
    scripts\mp\gametypes\br_quest_util::_id_4B61( self.team, "br_timedrun_quest_circle_failure" );
    level thread scripts\mp\gametypes\br_public::_id_2BB8( "mission_obj_circle_fail", self.team, 1, 1 );
    self._id_034B = "fail";
    scripts\mp\gametypes\br_quest_util::_id_C501();
}

_id_F3AF()
{
    scripts\mp\gametypes\br_quest_util::_id_4B61( self.team, "br_timedrun_quest_timer_expired" );
    level thread scripts\mp\gametypes\br_public::_id_2BB8( "mission_timedrun_fail", self.team, 1, 1 );
}

_id_F3A9( var_0, var_1 )
{
    if ( !isdefined( self._id_8F95 ) )
        self._id_8F95 = -1;

    var_2 = gettime();

    if ( self._id_8F95 == var_2 )
        return;

    self._id_8F95 = var_2;
    var_3 = distance2d( self._id_411F, var_0 );

    if ( var_3 > var_1 )
    {
        foreach ( var_5 in self._id_EABB )
            var_5 _id_58C1();
    }
}

_id_F3B0( var_0 )
{
    if ( var_0.team == self.team )
    {
        scripts\mp\gametypes\br_quest_util::_id_6C77( "timedrun_locale", self.team )._id_B6FE = scripts\mp\utility\teams::_id_6DAC( self.team, "players" );

        if ( !scripts\mp\gametypes\br_quest_util::_id_8A81( var_0.team ) )
        {
            self._id_034B = "fail";
            scripts\mp\gametypes\br_quest_util::_id_C501();
        }
    }
}

_id_F3AC( var_0 )
{
    if ( !_id_34DF( var_0 ) )
        return;

    var_0 scripts\mp\gametypes\br_quest_util::_id_F91B();
    scripts\mp\gametypes\br_quest_util::_id_78F9( var_0 );
}

_id_F3B3( var_0 )
{
    if ( !_id_34DF( var_0 ) )
        return;

    var_0 scripts\mp\gametypes\br_quest_util::_id_F91E( "timedrun" );
    scripts\mp\gametypes\br_quest_util::_id_DCD9( var_0 );
}

_id_FD60()
{
    var_0 = scripts\mp\gametypes\br_quest_util::_id_E039( self._id_B6FE );

    foreach ( var_2 in var_0["valid"] )
    {
        var_2 scripts\mp\gametypes\br_quest_util::_id_F91E( "timedrun" );
        scripts\mp\gametypes\br_quest_util::_id_DCD9( var_2 );
    }

    foreach ( var_2 in var_0["invalid"] )
    {
        var_2 scripts\mp\gametypes\br_quest_util::_id_F91B();
        scripts\mp\gametypes\br_quest_util::_id_78F9( var_2 );
    }
}

_id_78FD( var_0 )
{
    scripts\mp\gametypes\br_quest_util::_id_78F9( var_0 );
    var_0 scripts\mp\gametypes\br_quest_util::_id_F91B();
}

_id_4777()
{
    foreach ( var_1 in self._id_B6FE )
        _id_78FD( var_1 );

    scripts\mp\gametypes\br_quest_util::_id_4768();
}
