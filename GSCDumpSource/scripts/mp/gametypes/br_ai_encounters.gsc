// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    setdvarifuninitialized( "scr_br_ai_encounters", 0 );

    if ( !getdvarint( "scr_br_ai_encounters", 0 ) )
        return;

    setdvarifuninitialized( "scr_ai_encounters_dom_use_time", 30 );
    var_0 = spawnstruct();
    var_0 _id_7F54();
    var_0 _id_7FC5();
    var_0 thread _id_5257();
    level._id_4A9D = 0;
}

_id_0FA9( var_0, var_1 )
{
    _id_0F80( "encounter", var_0, var_1 );
}

_id_0FC2( var_0, var_1 )
{
    _id_0F80( "location", var_0, var_1 );
}

_id_0F80( var_0, var_1, var_2 )
{
    if ( !isdefined( self._id_E68D[var_0] ) )
        self._id_E68D[var_0] = [];

    var_3 = spawnstruct();
    var_3._id_5FF7 = var_1;
    var_3._id_AE37 = var_2;
    var_4 = self._id_E68D[var_0].size;
    self._id_E68D[var_0][var_4] = var_3;
}

_id_0FAA( var_0 )
{
    self._id_5FFD = var_0;
}

_id_7F54()
{
    self._id_5262 = [];
    self._id_1468 = [];
    var_0 = _id_7F52( "root" );
    var_0 _id_0FA9( ::_id_3B47 );
    var_0 _id_0FA9( ::_id_3B46, 60 );
    var_0 _id_0FA9( ::_id_3B45, 70 );
    var_0 _id_0FA9( ::_id_3B44, 1 );
    var_0 _id_0FA9( ::_id_3B43, 30 );
    var_0 _id_0FC2( ::_id_3B48, 0 );
    var_0 _id_0FC2( ::_id_3B42 );
    var_0 _id_0FA9( ::_id_3B3E, 2 );
    var_0 _id_0FA9( ::_id_3B3F, 2 );
    var_0 _id_0FC2( ::_id_3B3D, 7500 );
    var_0 _id_0FAA( ::_id_C902 );
    var_1 = _id_7F52( "root_ai", var_0 );
    var_1 _id_0FAA( ::_id_C907 );
    var_2 = _id_7F52( "bank", var_1 );
    var_2 _id_0FC2( ::_id_3B3C, 3000 );
    var_2 _id_0FAA( ::_id_219A );
    var_3 = _id_7F52( "airport", var_1 );
    var_3 _id_0FC2( ::_id_3B3C, 3000 );
    var_3 _id_0FAA( ::_id_138F );
    var_4 = _id_7F52( "truck", var_1 );
    var_4 _id_0FC2( ::_id_3B3C, 3000 );
    var_4 _id_0FAA( ::_id_F6B7 );
    var_5 = _id_7F52( "crate_guard", var_1 );
    var_5 _id_0FC2( ::_id_3B3C, 3000 );
    var_5 _id_0FAA( ::_id_3E6B );
    var_6 = _id_7F52( "jugg", var_1 );
    var_6 _id_0FC2( ::_id_3B3C, 1000 );
    var_6 _id_0FA9( ::_id_3B41 );
    var_7 = _id_7F52( "test", var_1 );
    var_7 _id_0FA9( ::_id_3B41 );
    var_7 _id_0FAA( ::_id_F0BE );
    var_8 = _id_7F52( "root_non_ai", var_0 );
    var_8 _id_0FC2( ::_id_3B3C, 2000 );
    var_8 _id_0FAA( ::_id_C908 );
    var_9 = _id_7F52( "dom", var_8 );
    var_9 _id_0FAA( ::_id_4CEF );
    var_10 = _id_7F52( "bomb_plant", var_8 );
    var_10 _id_0FAA( ::_id_263C );
    var_11 = _id_7F52( "extraction", var_8 );
    var_11 _id_0FAA( ::_id_5805 );
    var_11 _id_0FA9( ::_id_3B41 );
    var_12 = _id_7F52( "destruction", var_8 );
    var_12 _id_0FAA( ::_id_485F );
}

_id_7F52( var_0, var_1 )
{
    var_2 = spawnstruct();
    var_2.name = var_0;
    var_2._id_7E83 = self;
    var_2._id_AE47 = var_1;
    var_2._id_5262 = [];
    var_2._id_E68D = [];
    var_2._id_96C7 = [];
    self._id_1468[var_0] = var_2;

    if ( isdefined( var_1 ) )
        var_1._id_5262[var_1._id_5262.size] = var_2;
    else
        self._id_5262[self._id_5262.size] = var_2;

    return var_2;
}

_id_7FC5()
{
    self._id_14F2 = [];
    self._id_0F24 = [];
    var_0 = scripts\engine\utility::_id_6D7C( "ai_encounters", "targetname" );

    foreach ( var_2 in var_0 )
        _id_7FC4( var_2 );
}

_id_7FC4( var_0 )
{
    var_0.name = var_0._id_0375;
    var_1 = self._id_1468[var_0.name];
    var_1._id_96C7[var_1._id_96C7.size] = var_0;
    var_0._id_5254 = var_1;
    var_0._id_E744 = 0;
    var_2 = self._id_14F2.size;
    self._id_14F2[var_2] = var_0;
}

_id_5257()
{
    for (;;)
    {
        self._id_FF5F = [];
        _id_FB48( self._id_5262 );

        if ( self._id_FF5F.size )
        {
            var_0 = scripts\engine\utility::random( self._id_FF5F );
            _id_525A( var_0 );
        }

        wait 0.05;
    }
}

_id_FB48( var_0 )
{
    foreach ( var_2 in var_0 )
    {
        if ( !var_2 _id_341D() )
            continue;

        _id_FB48( var_2._id_5262 );

        foreach ( var_4 in var_2._id_96C7 )
        {
            if ( !var_4 _id_3467() )
                continue;

            self._id_FF5F[self._id_FF5F.size] = var_4;
        }
    }
}

_id_341D()
{
    return _id_349E( self, "encounter", 0 );
}

_id_3467()
{
    return _id_349E( self._id_5254, "location", 1 );
}

_id_349E( var_0, var_1, var_2 )
{
    if ( var_2 && isdefined( var_0._id_AE47 ) )
    {
        if ( !_id_349E( var_0._id_AE47, var_1, var_2 ) )
            return 0;
    }

    if ( !isdefined( var_0._id_E68D[var_1] ) )
        return 1;

    for ( var_3 = 0; var_3 < var_0._id_E68D[var_1].size; var_3++ )
    {
        var_4 = var_0._id_E68D[var_1][var_3];

        if ( isdefined( var_4._id_AE37 ) )
            var_5 = self [[ var_4._id_5FF7 ]]( var_4._id_AE37 );
        else
            var_5 = self [[ var_4._id_5FF7 ]]();

        if ( !var_5 )
            return 0;
    }

    return 1;
}

_id_525A( var_0 )
{
    var_0._id_E744 = 1;
    self._id_0F24[self._id_0F24.size] = var_0;
    var_0._id_E72A = gettime();
    _id_5256( var_0 );
}

_id_5256( var_0 )
{
    var_0 _id_525B( var_0._id_5254 );
}

_id_525B( var_0 )
{
    if ( isdefined( var_0._id_AE47 ) )
        _id_525B( var_0._id_AE47 );

    if ( isdefined( var_0._id_5FFD ) )
        self [[ var_0._id_5FFD ]]();
}

_id_5255( var_0, var_1 )
{
    if ( var_0 )
        self._id_E744 = 2;
    else
        self._id_E744 = 3;

    self._id_532E = gettime();
    self._id_5070 = self._id_532E - self._id_E72A;
    var_2 = self._id_5254._id_7E83;
    var_2._id_0F24 = scripts\engine\utility::array_remove( var_2._id_0F24, self );
    var_2._id_8FAE = self;

    if ( self._id_FEBE )
    {
        foreach ( var_4 in self._id_11F2 )
        {
            if ( isalive( var_4 ) )
                var_4 suicide();
        }
    }

    self notify( "encounter_end", var_0, var_1 );
}

_id_3B41( var_0 )
{
    return 0;
}

_id_3B48( var_0 )
{
    if ( self._id_E744 != var_0 )
        return 0;

    return 1;
}

_id_3B3D( var_0 )
{
    var_1 = var_0 * var_0;
    var_2 = _func_01FF( level.players, self.origin );

    for ( var_3 = 0; var_3 < var_2.size; var_3++ )
    {
        var_4 = var_2[var_3];

        if ( !isalive( var_4 ) )
            continue;

        var_5 = distance2dsquared( var_4.origin, self.origin );

        if ( var_5 < var_1 )
            return 1;
        else
            break;
    }

    return 0;
}

_id_3B3C( var_0 )
{
    var_1 = var_0 * var_0;
    var_2 = _func_01FF( level.players, self.origin );

    for ( var_3 = 0; var_3 < var_2.size; var_3++ )
    {
        var_4 = var_2[var_3];

        if ( !isalive( var_4 ) )
            continue;

        var_5 = distance2dsquared( var_4.origin, self.origin );

        if ( var_5 < var_1 )
            return 0;
        else
            break;
    }

    return 1;
}

_id_3B42()
{
    if ( istrue( level._id_29F7 ) )
        return 1;

    if ( !isdefined( level._id_29F5 ) || !isdefined( level._id_29F5._id_CABD ) )
        return 0;

    var_0 = scripts\mp\gametypes\br_circle::_id_6CE3();
    var_1 = scripts\mp\gametypes\br_circle::_id_6CE4();
    var_2 = distance2dsquared( self.origin, var_0 );

    if ( var_2 > var_1 * var_1 )
        return 0;

    return 1;
}

_id_3B3E( var_0 )
{
    if ( istrue( level._id_29F7 ) )
        return 1;

    if ( !isdefined( level._id_29F5 ) || !isdefined( level._id_29F5._id_CABD ) )
        return 0;

    var_1 = _func_00BE( "ui_br_circle_num" );

    if ( var_1 < var_0 )
        return 0;

    return 1;
}

_id_3B3F( var_0 )
{
    if ( istrue( level._id_29F7 ) )
        return 1;

    if ( !isdefined( level._id_29F5 ) || !isdefined( level._id_29F5._id_370B ) )
        return 0;

    var_1 = level._id_2A4D._id_29FB.size;
    var_2 = var_1 - level._id_29F5._id_370B;

    if ( var_2 < var_0 )
        return 0;

    return 1;
}

_id_3B45( var_0 )
{
    if ( !isdefined( level._id_EF67 ) )
        return 0;

    var_1 = 0;

    foreach ( var_3 in level._id_EF67 )
        var_1 = var_1 + var_3["aliveCount"];

    if ( var_1 > var_0 )
        return 0;

    return 1;
}

_id_3B44( var_0 )
{
    if ( self._id_7E83._id_0F24.size >= var_0 )
        return 0;

    return 1;
}

_id_3B46( var_0 )
{
    var_1 = scripts\mp\utility\game::_id_6CFD();

    if ( var_1 < var_0 )
        return 0;

    return 1;
}

_id_3B43( var_0 )
{
    var_1 = self._id_7E83;

    if ( isdefined( var_1._id_8FAE ) )
    {
        var_2 = ( gettime() - var_1._id_8FAE._id_532E ) / 1000;

        if ( var_2 < var_0 )
            return 0;
    }

    return 1;
}

_id_3B47()
{
    if ( !isdefined( game["flags"]["prematch_done"] ) )
        return 0;

    if ( _id_07A8::_id_609F( "prematch_done" ) )
        return 1;

    return 0;
}

_id_3B40()
{
    if ( getdvarint( "scr_ai_encounters_pause", 0 ) )
        return 0;

    return 1;
}

_id_EACA( var_0 )
{
    self endon( "encounter_end" );

    for (;;)
    {
        self waittill( "agent_killed" );

        if ( self._id_11F3 >= var_0 )
            _id_5255( 1 );
    }
}

_id_58B6( var_0 )
{
    self endon( "encounter_end" );
    var_0 = int( var_0 );
    var_1 = var_0;

    for (;;)
    {
        wait 1;

        if ( self._id_B7A5.size > 0 )
        {
            var_0 = var_1;
            continue;
        }

        var_0--;

        if ( var_0 <= 0 )
            _id_5255( 0 );
    }
}

_id_58B7()
{
    self endon( "encounter_end" );

    for (;;)
    {
        wait 1;

        if ( !isdefined( level._id_29F5 ) || !isdefined( level._id_29F5._id_431C ) )
            continue;

        var_0 = scripts\mp\gametypes\br_circle::_id_69A6();
        var_1 = scripts\mp\gametypes\br_circle::_id_69A7();
        var_2 = distance2dsquared( self.origin, var_0 );

        if ( var_2 > var_1 * var_1 )
        {
            if ( self._id_B7A5.size > 0 )
            {

            }
            else
                _id_5255( 0 );

            continue;
        }
    }
}

_id_EF02( var_0 )
{
    _id_EF03( var_0 );
    var_1 = _id_E0A9( var_0 );

    if ( isdefined( var_1 ) )
    {
        if ( isdefined( var_0._id_706E ) )
        {
            var_2 = scripts\engine\utility::random( var_0._id_706E );
            var_1 _meth_8323( var_2 );
        }

        if ( isdefined( var_0._id_7074 ) )
        {
            var_3 = scripts\engine\utility::random( var_0._id_7074 );

            if ( var_3._id_1EDE )
                var_1 _meth_8327( var_3 );
            else
                var_1 _meth_8326( var_3 );
        }
    }

    return var_1;
}

_id_EF03( var_0 )
{
    var_0.team = scripts\mp\gametypes\br_ai_encounters_util::_id_62F4();
    var_0._id_13C9 = [[ self._id_6001 ]]( var_0 );
    var_1 = var_0 scripts\mp\gametypes\br_ai_encounters_util::_id_6797();

    foreach ( var_3 in var_1 )
    {
        if ( !isdefined( var_3._id_0375 ) )
            continue;

        switch ( var_3._id_0375 )
        {
            case "goal_volume":
                _id_EF05( var_0, var_3, 0 );
                break;
            case "goal_volume_auto":
                _id_EF05( var_0, var_3, 1 );
                break;
            case "goal_node":
            case "goal":
                _id_EF04( var_0, var_3 );
                break;
            default:
                break;
        }
    }
}

_id_EF04( var_0, var_1 )
{
    if ( !isdefined( var_0._id_706E ) )
        var_0._id_706E = [];

    var_0._id_706E[var_0._id_706E.size] = var_1;
}

_id_EF05( var_0, var_1, var_2 )
{
    if ( !isdefined( var_0._id_7074 ) )
        var_0._id_7074 = [];

    var_1._id_1EDE = var_2;
    var_0._id_7074[var_0._id_7074.size] = var_1;
}

_id_EEFF( var_0 )
{
    var_1 = _id_07D0::_id_C56F( 0 );
    _id_07D0::_id_A854( var_1, "current", var_0.origin, "icon_waypoint_objective_general", "icon_regular" );
    _func_0173( var_1, 1 );
    _func_016D( var_1, 1 );
    _func_0162( var_1, self._id_7C52 );
    thread _id_7C24( var_1 );
    self waittill( "encounter_end" );
    _id_07D0::_id_C78C( var_1 );
    obituary( var_1 );
}

_id_EF00( var_0 )
{
    if ( scripts\mp\utility\game::getgametype() != "br" )
        return;

    self waittill( "encounter_end", var_1, var_2 );

    if ( !var_1 )
        return;

    var_3 = _id_C806( var_0 );

    if ( !isdefined( var_3 ) )
        return;

    if ( isdefined( var_2 ) )
    {
        var_4 = [];
        var_5 = [];

        foreach ( var_9, var_7 in self._id_B7A8 )
        {
            var_8 = self._id_7244[var_9];

            if ( !isdefined( var_8 ) )
                continue;

            if ( var_8.team == var_2 )
            {
                var_4[var_4.size] = var_8;
                continue;
            }

            var_5[var_5.size] = var_8;
        }

        thread _id_C7FA( var_3, "icon_waypoint_unlocked", var_4 );
        thread _id_C7FA( var_3, "icon_waypoint_locked", var_5 );
        _id_C7FF( var_3, var_4, var_5 );
    }
    else
    {
        var_10 = [];

        foreach ( var_9, var_7 in self._id_B7A8 )
        {
            var_8 = self._id_7244[var_9];

            if ( !isdefined( var_8 ) )
                continue;

            var_10[var_10.size] = var_8;
        }

        thread _id_C7FA( var_3, "icon_waypoint_unlocked", var_10 );
    }
}

_id_EF01( var_0 )
{
    if ( scripts\mp\utility\game::getgametype() != "br" )
        return;

    var_1 = _id_C806( var_0 );
    scripts\mp\gametypes\br_ai_encounters_util::_id_4AC2( var_1 );
    var_2 = _func_02AA( var_1.origin, ( 30, 15, 10 ), var_1.angles );
    self waittill( "encounter_end", var_3 );
    _func_02AC( var_2 );

    if ( isdefined( var_1 ) )
    {
        if ( var_3 )
        {
            scripts\mp\gametypes\br_ai_encounters_util::_id_524A( var_1 );
            _id_C7FA( var_1, "icon_waypoint_unlocked" );
        }
        else
            var_1 _meth_86BB();
    }
}

_id_C806( var_0, var_1 )
{
    var_2 = var_0._id_CE0B;

    if ( !isdefined( var_2 ) )
        var_2 = "brloot_killstreak_clusterstrike";

    var_3 = undefined;

    switch ( var_2 )
    {
        case "brloot_killstreak_clusterstrike":
            var_3 = scripts\mp\gametypes\br_pickups::_id_E333( var_2, var_0.origin + ( 0, 0, 0.1 ), var_0.angles, 0, 1 );
            break;
        default:
    }

    if ( isdefined( var_3 ) )
    {
        thread _id_C802( var_3 );
        thread _id_C7FE( var_3 );
    }

    return var_3;
}

_id_C7FF( var_0, var_1, var_2 )
{
    _id_C801( var_0, var_1 );
    var_3 = spawn( "script_model", var_0.origin + ( 0, 0, 30 ) );
    var_3 setmodel( "tag_origin" );
    var_3 makeuseable();
    var_3 sethintstring( "MP/DOOR_USE_LOCK" );
    var_3 setuseholdduration( "duration_long" );
    var_3 setusefov( 15 );
    var_3 setcursorhint( "HINT_BUTTON" );

    foreach ( var_5 in var_1 )
        var_3 disableplayeruse( var_5 );

    thread _id_C7FE( var_3 );
    thread _id_C800( var_3, var_0 );
}

_id_C800( var_0, var_1 )
{
    self endon( "reward_cleanup" );
    var_0 waittill( "trigger", var_2 );
    var_3 = var_1._id_CF15;
    scripts\mp\gametypes\br_pickups::_id_9884( var_1, var_3, "visible", var_2 );
}

_id_C802( var_0 )
{
    self endon( "reward_cleanup" );

    while ( isdefined( var_0 ) )
        waitframe();

    self notify( "reward_cleanup" );
}

_id_C7FE( var_0 )
{
    self waittill( "reward_cleanup" );

    if ( isdefined( var_0 ) )
    {
        if ( var_0 _meth_86EB() )
            var_0 _meth_86BB();
        else
            var_0 delete();
    }
}

_id_C801( var_0, var_1 )
{
    scripts\mp\gametypes\br_ai_encounters_util::_id_4AC2( var_0 );

    foreach ( var_3 in var_1 )
        var_0 _meth_86A5( var_3 );
}

_id_C7FA( var_0, var_1, var_2 )
{
    var_3 = _id_401C( var_0, var_1 );

    if ( var_3 < 0 )
        return;

    if ( isdefined( var_2 ) )
    {
        foreach ( var_5 in var_2 )
            _func_0180( var_3, var_5 );
    }

    thread _id_C7FB( var_3 );
}

_id_401C( var_0, var_1 )
{
    var_2 = _id_07D0::_id_C56F();

    if ( var_2 >= 0 )
    {
        _id_07D0::_id_A854( var_2, "current", var_0.origin + ( 0, 0, 50 ), var_1, "icon_regular" );
        _func_0173( var_2, 1 );
        _func_016D( var_2, !istrue( self._id_A5AB ) );
        _func_0162( var_2, "BR_AI_ENCOUNTERS/OBJ_LABEL_REWARD" );
        _func_0187( var_2 );
        _func_0186( var_2 );
    }

    return var_2;
}

_id_C7FB( var_0 )
{
    self waittill( "reward_cleanup" );
    _id_07D0::_id_C78C( var_0 );
}

_id_7C24( var_0 )
{
    self endon( "encounter_end" );
    _func_0187( var_0 );

    for (;;)
    {
        _func_0186( var_0 );

        foreach ( var_4, var_2 in self._id_B7A8 )
        {
            var_3 = self._id_7244[var_4];

            if ( isdefined( var_3 ) )
                _func_0180( var_0, var_3 );
        }

        self waittill( "notify_list_changed" );
    }
}

_id_E0A9( var_0 )
{
    var_1 = _id_07CE::_id_E326( var_0._id_13C9, var_0.team, var_0.origin, var_0.angles );

    if ( isdefined( var_1 ) )
    {
        var_1._id_C0E5 = 0;
        var_1._id_C0E3 = 0;
        var_1._id_024B = 0;
        var_1._id_0146 = 0;
        var_1.pers["cur_kill_streak"] = 0;
        var_1.pers["cur_death_streak"] = 0;
        var_1.pers["cur_kill_streak_for_nuke"] = 0;
        var_1._id_F339 = [];
        var_1._id_8D65 = [];
        var_1._id_723F = var_1 scripts\mp\utility\player::_id_6E04();
        var_1._id_0375 = var_0._id_0375;
        var_1._id_CF39 = 0;
        var_1._id_11EB = 1;
        self._id_11F2[self._id_11F2.size] = var_1;
        thread _id_10A23( var_1 );
    }
    else
    {

    }

    return var_1;
}

_id_10A23( var_0 )
{
    var_0 waittill( "death" );
    self._id_11F2 = scripts\engine\utility::array_remove( self._id_11F2, var_0 );
    self._id_11F3++;
    self notify( "agent_killed" );
}

_id_EF06( var_0 )
{
    for (;;)
    {
        var_0 waittill( "trigger", var_1 );

        if ( isagent( var_1 ) )
            continue;

        break;
    }

    var_2 = var_0 scripts\mp\gametypes\br_ai_encounters_util::_id_6797();

    foreach ( var_4 in var_2 )
        _id_EF02( var_4 );
}

_id_C902()
{
    thread _id_C905();
    thread _id_C906();
    thread _id_C903();
}

_id_C904( var_0 )
{
    return var_0.name;
}

_id_C905()
{
    self._id_7C52 = "BR_AI_ENCOUNTERS/OBJ_LABEL_GENERIC";
    waittillframeend;
    var_0 = scripts\mp\gametypes\br_ai_encounters_util::_id_6797();

    foreach ( var_2 in var_0 )
    {
        var_3 = var_2._id_0375;

        if ( !isdefined( var_3 ) )
            continue;

        switch ( var_3 )
        {
            case "spawner":
                thread _id_EF02( var_2 );
                break;
            case "spawn_trigger":
                thread _id_EF06( var_2 );
                break;
            case "icon":
                thread _id_EEFF( var_2 );
                break;
            case "reward":
                thread _id_EF00( var_2 );
                break;
            case "reward_prespawn":
                thread _id_EF01( var_2 );
                break;
            default:
                break;
        }
    }
}

_id_C906()
{
    self endon( "encounter_end" );
    self._id_A69E = 7500;
    self._id_5434 = 2000;
    self._id_B7A8 = [];
    self._id_B7A5 = [];
    self._id_7244 = [];
    waittillframeend;
    var_0 = self._id_A69E * self._id_A69E;
    var_1 = self._id_5434 * self._id_5434;
    var_2 = 20;

    for (;;)
    {
        var_3 = gettime();
        var_4 = 0;
        var_5 = 0;
        var_6 = 0;

        for ( var_7 = 0; var_7 < level.players.size; var_7++ )
        {
            var_8 = level.players[var_7];

            if ( !isdefined( var_8 ) )
                continue;

            self._id_7244[var_8._id_723F] = var_8;

            if ( !isalive( var_8 ) )
            {
                if ( isdefined( self._id_B7A8[var_8._id_723F] ) )
                {
                    var_5 = 1;
                    self._id_B7A8[var_8._id_723F] = undefined;
                }

                if ( isdefined( self._id_B7A5[var_8._id_723F] ) )
                {
                    var_6 = 1;
                    self._id_B7A5[var_8._id_723F] = undefined;
                }

                continue;
            }

            var_9 = distance2dsquared( var_8.origin, self.origin );

            if ( var_9 <= var_0 )
            {
                if ( !isdefined( self._id_B7A8[var_8._id_723F] ) )
                    var_5 = 1;

                self._id_B7A8[var_8._id_723F] = var_3;
            }
            else
            {
                var_10 = self._id_B7A8[var_8._id_723F];

                if ( isdefined( var_10 ) && var_3 - var_10 > 2000 )
                {
                    var_5 = 1;
                    self._id_B7A8[var_8._id_723F] = undefined;
                }
            }

            if ( var_9 <= var_1 )
            {
                if ( !isdefined( self._id_B7A5[var_8._id_723F] ) )
                    var_6 = 1;

                self._id_B7A5[var_8._id_723F] = var_3;
            }
            else
            {
                var_10 = self._id_B7A5[var_8._id_723F];

                if ( isdefined( var_10 ) && var_3 - var_10 > 2000 )
                {
                    var_6 = 1;
                    self._id_B7A5[var_8._id_723F] = undefined;
                }
            }

            var_4++;

            if ( var_4 >= var_2 )
            {
                wait 0.05;
                var_4 = 0;
            }
        }

        if ( var_5 )
            self notify( "notify_list_changed" );

        if ( var_6 )
            self notify( "engaged_list_changed" );

        wait 0.05;
    }
}

_id_C903()
{
    self._id_58B8 = 90;
    waittillframeend;
    thread _id_58B6( self._id_58B8 );
    thread _id_58B7();
}

_id_C907()
{
    self._id_FEBE = 1;
    self._id_6001 = ::_id_C904;
    self._id_11F3 = 0;
    self._id_11F2 = [];
}

_id_219A()
{
    self endon( "encounter_end" );
    self._id_6001 = ::_id_219C;
    self._id_7C52 = "BR_AI_ENCOUNTERS/OBJ_LABEL_BANK";
    thread _id_13F0();
    thread _id_13EF();
    thread _id_FFD1();
    var_0 = getent( "bank_vol_01", "targetname" );
    var_1 = getent( "bank_vol_01_upper", "targetname" );
    level._id_10C5F = [];
    var_2 = scripts\engine\utility::_id_6D7C( "enemy_wave_01", "targetname" );

    foreach ( var_4 in var_2 )
    {
        var_5 = _id_EF02( var_4 );

        if ( var_5._id_0375 == "wave01_upper" )
        {
            var_5 _meth_8327( var_1 );
            var_5._id_01E5 = 256;
        }
        else if ( var_5._id_0375 == "wave01_lower" )
            var_5 _meth_8327( var_0 );

        level._id_10C5F = scripts\engine\utility::array_add( level._id_10C5F, var_5 );
    }

    var_7 = getent( "wave_01_overrun_trig", "targetname" );
    _id_10935( var_7, level._id_10C5F, level._id_10C5F.size - 3 );
    level notify( "spawn_wave2" );
    var_8 = getent( "bank_vol_02", "targetname" );
    var_9 = [];
    var_10 = scripts\engine\utility::_id_6D7C( "enemy_wave_02", "targetname" );

    foreach ( var_12 in var_10 )
    {
        var_5 = _id_EF02( var_12 );
        var_5 _meth_8327( var_8 );
        var_9 = scripts\engine\utility::array_add( var_9, var_5 );
    }

    foreach ( var_15 in level._id_10C5F )
    {
        if ( isdefined( var_15 ) && isalive( var_15 ) )
        {
            var_15 _meth_8327( var_8 );
            var_9 = scripts\engine\utility::array_add( var_9, var_15 );
        }
    }

    scripts\mp\gametypes\br_ai_encounters_util::_id_108BB( var_9, var_9.size );
    wait 0.5;
    self notify( "open_vault" );
    var_17 = getent( "bank_vol_03", "targetname" );
    var_18 = [];
    var_19 = scripts\engine\utility::_id_6D7A( "enemy_wave_03_boss", "targetname" );
    var_20 = _id_EF02( var_19 );
    var_20 thread _id_8BC4();
    var_18 = scripts\engine\utility::array_add( var_18, var_20 );
    scripts\mp\gametypes\br_ai_encounters_util::_id_108BB( var_18, var_18.size );
    _id_5255( 1 );
}

_id_FFCF()
{
    self endon( "encounter_end" );
    self waittill( "open_vault" );
}

_id_FFCE( var_0 )
{
    if ( istrue( var_0.init ) )
    {
        var_0.angles = var_0._id_E5A4;
        return;
    }

    var_1 = getent( "vault_door_clip", "targetname" );
    var_1 linkto( var_0 );
    var_0._id_E5A4 = var_0.angles;
    var_0.init = 1;
}

_id_FFD1()
{
    var_0 = getent( "vault_door", "targetname" );
    _id_FFCE( var_0 );
    _id_FFCF();
    var_0 thread _id_FFD0();
    var_0 _meth_82A0( ( 0, 180, 0 ), 5 );
}

_id_8BC4()
{
    var_0 = _func_01FF( level.players, self.origin );

    for ( var_1 = 0; var_1 < var_0.size; var_1++ )
    {
        var_2 = var_0[var_1];

        if ( isalive( var_2 ) )
        {
            self _meth_812E( var_2 );
            self _meth_8322( var_2 );
            break;
        }
    }
}

_id_13F0()
{
    var_0 = getentarray( "bank_alarm_pos", "targetname" );

    foreach ( var_2 in var_0 )
        var_2 playloopsound( "emt_alarm_bank_bell_lp" );
}

_id_13EE()
{
    var_0 = getentarray( "bank_alarm_pos", "targetname" );

    foreach ( var_2 in var_0 )
        var_2 stoploopsound( "emt_alarm_bank_bell_lp" );
}

_id_FFD0()
{
    var_0 = 4000000;

    foreach ( var_2 in level.players )
    {
        if ( isdefined( var_2 ) && isalive( var_2 ) )
        {
            if ( distancesquared( var_2.origin, self.origin ) <= var_0 )
                var_2 playsound( "cp_bank_vault_open" );
        }
    }
}

_id_10935( var_0, var_1, var_2, var_3 )
{
    var_4 = spawnstruct();
    var_4 endon( "done" );
    var_4 childthread _id_0D9E( var_0 );
    var_4 childthread _id_0D9D( var_1, var_2, var_3 );
    var_4 waittill( "done" );
}

_id_0D9D( var_0, var_1, var_2 )
{
    scripts\mp\gametypes\br_ai_encounters_util::_id_108BB( var_0, var_1, var_2 );
    self notify( "done" );
}

_id_0D9E( var_0 )
{
    for (;;)
    {
        var_0 waittill( "trigger", var_1 );

        if ( !isplayer( var_1 ) )
            continue;

        break;
    }

    self notify( "done" );
}

_id_13EF()
{
    self waittill( "encounter_end" );
    _id_13EE();
}

_id_219C( var_0 )
{
    if ( isdefined( var_0._id_0375 ) )
    {
        switch ( var_0._id_0375 )
        {
            case "jugg":
                return "actor_enemy_br_juggernaut";
            default:
                break;
        }
    }

    return "actor_enemy_br_base";
}

_id_138F()
{
    var_0 = getent( "ai_encounter_crate", "targetname" );
    var_0 _meth_823E( 256, 0.05 );
    wait 0.5;
    _func_02AB( var_0 );
    var_1 = getent( "kickoff_airport_encounter", "targetname" );
    var_1 waittill( "trigger", var_2 );
    var_3 = "s4_smoke_usa_m18_mp";
    var_4 = magicgrenademanual( var_3, scripts\engine\utility::_id_6D7A( "airport_smoke_toss_pos", "targetname" ).origin, anglestoforward( scripts\engine\utility::_id_6D7A( "airport_smoke_toss_pos", "targetname" ).angles ) * 400, 1 );
    wait 0.1;
    var_5 = magicgrenademanual( var_3, scripts\engine\utility::_id_6D7A( "airport_smoke_toss_pos_02", "targetname" ).origin, anglestoforward( scripts\engine\utility::_id_6D7A( "airport_smoke_toss_pos_02", "targetname" ).angles ) * 400, 1.3 );
    var_6 = magicgrenademanual( var_3, scripts\engine\utility::_id_6D7A( "airport_smoke_toss_pos_03", "targetname" ).origin, anglestoforward( scripts\engine\utility::_id_6D7A( "airport_smoke_toss_pos_03", "targetname" ).angles ) * 450, 2 );
    var_7 = getent( "airport_vol_01", "targetname" );
    wait 2;
    var_8 = [];
    var_9 = scripts\engine\utility::_id_6D7C( "airport_enemy_wave_01", "targetname" );

    foreach ( var_11 in var_9 )
    {
        var_12 = _id_EF02( var_11 );
        var_12 _meth_8327( var_7 );
        var_12 thread _id_1390();
        var_8 = scripts\engine\utility::array_add( var_8, var_12 );
    }

    var_14 = getent( "wave_01_overrun_trig", "targetname" );
    scripts\mp\gametypes\br_ai_encounters_util::_id_108BB( var_8, var_8.size );
    _id_5255( 1 );
}

_id_1390()
{
    self._id_7CE5 = 1;
    wait( randomfloatrange( 1, 2 ) );
    self._id_7CE5 = 0;
    self._id_001D = 0.01;
}

_id_F6B7()
{
    self endon( "encounter_end" );
    self._id_6001 = ::_id_F6B9;
    self._id_7C52 = "BR_AI_ENCOUNTERS/OBJ_LABEL_TRUCK";
    thread _id_58B6( 90 );
    var_0 = undefined;
    var_1 = undefined;
    var_2 = [];
    var_3 = [];
    var_4 = scripts\mp\gametypes\br_ai_encounters_util::_id_6797();

    foreach ( var_6 in var_4 )
    {
        var_7 = var_6._id_0375;

        if ( !isdefined( var_7 ) )
            continue;

        switch ( var_7 )
        {
            case "start_trigger":
                var_0 = var_6;
                break;
            case "truck_enemy_wave":
                var_2[var_2.size] = var_6;
                break;
            case "roll_door":
                var_1 = var_6;
                thread _id_F6E0( var_1 );
                break;
            case "jump_down_node":
                var_3[var_3.size] = var_6;
                break;
            default:
                break;
        }
    }

    for (;;)
    {
        var_0 waittill( "trigger", var_9 );

        if ( isalive( var_9 ) && isplayer( var_9 ) )
            break;
    }

    _func_02AC( var_1 getentitynumber() );
    _id_F6E1( var_1 );
    var_10 = [];

    foreach ( var_12 in var_2 )
    {
        var_13 = _id_EF02( var_12 );
        var_10 = scripts\engine\utility::array_add( var_10, var_13 );
    }

    scripts\mp\gametypes\br_ai_encounters_util::_id_108BB( var_10, var_10.size );
    _id_5255( 1 );
}

_id_F6E0( var_0 )
{
    self endon( "encounter_end" );

    if ( !istrue( var_0.init ) )
    {
        var_0._id_1760 = scripts\engine\utility::_id_6D7A( var_0.target, "targetname" );

        if ( !isdefined( var_0._id_1760.angles ) )
            var_0._id_1760.angles = ( 0, 0, 0 );

        var_0._id_E61E = var_0.origin;
        var_0._id_E5A4 = var_0.angles;
        var_0.init = 1;
    }
    else
    {
        var_0.origin = var_0._id_E61E;
        var_0.angles = var_0._id_E5A4;
    }
}

_id_F6E1( var_0 )
{
    var_0 rotatepitch( -90, 1 );
    _id_F6E2( var_0 );
    self notify( "truck_roll_door_open" );
}

_id_F6E2( var_0 )
{
    var_1 = 1000000;

    foreach ( var_3 in level.players )
    {
        if ( isdefined( var_3 ) && isalive( var_3 ) )
        {
            if ( distancesquared( var_3.origin, var_0.origin ) <= var_1 )
                var_3 playsound( "cp_bank_gate_fall" );
        }
    }
}

_id_F6B9( var_0 )
{
    return "actor_enemy_br_base";
}

_id_3E6B()
{
    self endon( "encounter_end" );
    self._id_6001 = ::_id_3E6C;
    self._id_7C52 = "BR_AI_ENCOUNTERS/OBJ_LABEL_CRATE_GUARD";
    thread _id_58B6( 90 );
    var_0 = undefined;
    var_1 = undefined;
    var_2 = [];
    var_3 = scripts\mp\gametypes\br_ai_encounters_util::_id_6797();

    foreach ( var_5 in var_3 )
    {
        var_6 = var_5._id_0375;

        if ( !isdefined( var_6 ) )
            continue;

        switch ( var_6 )
        {
            case "guard":
                var_2[var_2.size] = var_5;
                break;
            case "guard_boss":
                var_1 = var_5;
                break;
            case "start_trigger":
                var_0 = var_5;
                break;
            default:
                break;
        }
    }

    for (;;)
    {
        var_0 waittill( "trigger", var_8 );

        if ( isalive( var_8 ) && isplayer( var_8 ) )
            break;
    }

    var_9 = [];

    foreach ( var_11 in var_2 )
    {
        var_12 = _id_EF02( var_11 );
        var_9[var_9.size] = var_12;
    }

    var_14 = _id_EF02( var_1 );
    var_9[var_9.size] = var_14;
    childthread _id_3E6A( var_14, var_9 );
    scripts\mp\gametypes\br_ai_encounters_util::_id_108BB( var_9, var_9.size );
    _id_5255( 1 );
}

_id_3E6A( var_0, var_1 )
{
    var_0._id_020F = 1;
    var_2 = var_1;
    var_2[var_2.size] = var_0;
    scripts\engine\utility::_id_10887( var_2, "death", "damage", "enemy" );

    if ( isdefined( var_0 ) )
        var_0._id_020F = 0;
}

_id_3E6C( var_0 )
{
    if ( isdefined( var_0._id_0375 ) && var_0._id_0375 == "guard_boss" )
        return "actor_enemy_br_boss";

    return "actor_enemy_br_base";
}

_id_DE54()
{
    _id_D74D();
    self._id_43F1 = "animscripted";
    self._id_43B1 = "smoking_death";
    thread _id_DE56( "smoking_idle" );
    thread _id_DE59( "smoking_react" );
    thread _id_DE55( "smoking_death" );
}

_id_DE56( var_0 )
{
    self endon( "death" );
    self endon( "damage" );
    thread _id_1293( "smoking" );

    for (;;)
    {
        _id_DE58( "smoking_idle_start" );
        _id_0AC4::_id_189F( var_0 );
        _id_DE57( "smoking_idle_end" );
    }
}

_id_DE58( var_0 )
{
    self endon( "death" );
    self endon( "damage" );
    _id_0AC4::_id_189F( var_0 );
}

_id_DE57( var_0 )
{
    self endon( "death" );
    self endon( "damage" );
    _id_0AC4::_id_189F( var_0 );
}

_id_DE59( var_0 )
{
    self endon( "death" );
    self waittill( "damage" );
    _id_12BE();
    self._id_43F1 = undefined;
    self._id_43B1 = undefined;

    if ( isdefined( self._id_7CA4 ) )
    {
        self._id_7CA4 unlink();
        self._id_7CA4 physicslaunchserver( self._id_7CA4.origin, ( 0, 0, -10 ) );
        self._id_7CA4 = undefined;
    }

    _id_0AC4::_id_189F( var_0 );
    _id_C5B1( self );
}

_id_DE55( var_0 )
{
    self endon( "damage" );
    self waittill( "death" );
    _id_12BE();
}

_id_1292( var_0 )
{
    switch ( var_0 )
    {
        case "attach":
            playfxontag( level._id_6082["cigarette_unlit"], self, "tag_accessory_right" );
            break;
        case "light":
            playfxontag( level._id_6082["cigarette_lit"], self, "tag_accessory_right" );
            stopfxontag( level._id_6082["cigarette_unlit"], self, "tag_accessory_right" );
            playfx( level._id_6082["lighter_glow"], self gettagorigin( "tag_accessory_right" ) );
            thread _id_12BD();
            break;
        case "detach":
            stopfxontag( level._id_6082["cigarette_lit"], self, "tag_accessory_right" );
            stopfxontag( level._id_6082["cigarette_unlit"], self, "tag_accessory_right" );
            playfx( level._id_6082["cigarette_lit_toss"], self gettagorigin( "tag_accessory_right" ), anglestoforward( self gettagangles( "tag_accessory_right" ) ) );
            break;
    }
}

_id_12BD()
{
    self endon( "smoking_end" );
    self endon( "death" );
    self notify( "ai_notetrack_Loop" );
    self endon( "ai_notetrack_Loop" );
    self endon( "damage" );

    for (;;)
    {
        playfx( level._id_6082["cigarette_smoke"], self geteye() - ( 0, 0, 2 ), anglestoforward( self gettagangles( "tag_eye" ) ) );
        var_0 = randomintrange( 5, 8 );
        wait( var_0 );
    }
}

_id_12BE()
{
    self notify( "smoking_end" );
    self endon( "death" );

    if ( scripts\engine\utility::hastag( self.model, "tag_accessory_right" ) )
    {
        kick( level._id_6082["cigarette_lit"], self, "tag_accessory_right" );
        kick( level._id_6082["cigarette_unlit"], self, "tag_accessory_right" );
    }
}

_id_E588( var_0 )
{
    if ( !isdefined( var_0 ) )
        var_0 = 0;

    _id_D74D();
    self._id_43F1 = "animscripted";
    self._id_43B1 = "stand_cellphone_death";
    thread _id_1293( "standing_cellphone" );
    _id_E589( "stand_cellphone_intro" );

    if ( var_0 > 0 )
        _id_E58B( "stand_cellphone_loop", var_0 );

    _id_E589( "stand_cellphone_exit" );
}

_id_E589( var_0 )
{
    self endon( "death" );
    self endon( "damage" );
    _id_0AC4::_id_189F( var_0 );
}

_id_E58B( var_0, var_1 )
{
    self endon( "death" );
    self endon( "damage" );
    _id_0AC4::_id_189D( var_0, var_1 );
}

_id_1291( var_0 )
{
    self endon( "death" );
    self endon( "damage" );

    switch ( var_0 )
    {
        case "attach":
            self._id_7CA4 = _id_069D::_id_17C3( "equipment_personal_smartphone_01", "tag_accessory_right" );
            wait 2;
            break;
        case "detach":
            if ( isdefined( self._id_7CA4 ) )
            {
                self._id_7CA4 delete();
                self._id_7CA4 = undefined;
            }

            break;
    }
}

_id_D74D()
{
    self._id_B849 = 1;
}

_id_C5B1( var_0 )
{
    var_0 _meth_800C( "prone", "stand", "crouch" );
    var_0 _id_0AC4::_id_1899();
    var_0 setlookatent();
    var_0._id_75F4 = 1;
    var_0._id_0155 = 0;
    var_0._id_43F1 = undefined;
    var_0._id_43B1 = undefined;
    var_0._id_020F = 0;
    var_0._id_B849 = undefined;

    if ( isdefined( self._id_174A ) )
        self._id_174A delete();
}

_id_1293( var_0 )
{
    self endon( "death" );
    self notify( "ai_notetrack_Loop" );
    self endon( "ai_notetrack_Loop" );
    self endon( "damage" );

    for (;;)
    {
        self waittill( "animscripted", var_1 );

        if ( !isdefined( var_1 ) )
            var_1 = [ "undefined" ];

        if ( !_func_0106( var_1 ) )
            var_1 = [ var_1 ];

        var_2 = undefined;

        foreach ( var_4 in var_1 )
        {
            if ( var_0 == "smoking" )
            {
                _id_1292( var_4 );
                continue;
            }

            if ( var_0 == "standing_cellphone" )
                _id_1291( var_4 );
        }
    }
}

_id_F0BE()
{

}

_id_C908()
{
    self._id_FEBE = 0;
}

_id_4CEF()
{
    self._id_A5AB = 1;
    self._id_5434 = 1500;
    _id_4CF8();
    var_0 = undefined;
    var_1 = scripts\mp\gametypes\br_ai_encounters_util::_id_6797();

    foreach ( var_3 in var_1 )
    {
        var_4 = var_3._id_0375;

        if ( !isdefined( var_4 ) )
            continue;

        switch ( var_4 )
        {
            case "trigger_radius":
                var_5 = 315;
                var_6 = 120;
                var_0 = spawn( "trigger_radius", var_3.origin, 0, int( var_5 ), int( var_6 ) );
                break;
            default:
                break;
        }
    }

    if ( !isdefined( var_0 ) )
        return;

    level._id_D523 = ::_id_4CFC;
    var_8 = scripts\mp\gametypes\obj_dom::_id_D88B( var_0 );
    var_8._id_A5C2 = undefined;
    var_8._id_103BD = "_300";
    var_8._id_ABB8 = ::_id_4CFA;
    var_8._id_ABC1 = ::_id_4CFB;
    var_8._id_AAAF = ::_id_4CF9;
    var_8 _id_07AD::_id_D8D5( "any" );
    var_8 scripts\mp\gametypes\obj_dom::_id_4D07();
    level._id_5C1B = getdvarint( "scr_ai_encounters_dom_use_time", 30 );
    var_8 _id_07AD::_id_D8C7( level._id_5C1B );
    var_8._id_525E = self;
    thread _id_525C( var_8 );
    thread _id_7C24( var_8._id_A8F5 );
}

_id_525C( var_0 )
{
    var_0 endon( "deleted" );
    self waittill( "encounter_end" );

    foreach ( var_2 in var_0._id_1042E )
        var_2 delete();

    if ( isdefined( var_0._id_5C1F ) )
        var_0._id_5C1F delete();

    if ( isdefined( var_0._id_0383 ) )
        var_0._id_0383 delete();

    if ( isdefined( var_0._id_047A ) )
    {
        var_0._id_047A delete();
        var_0._id_047A = undefined;
    }

    var_0 thread _id_60BB();
    var_0 notify( "deleted" );
}

_id_60BB()
{
    wait 0.1;
    _id_07AD::_id_C2F2();
}

_id_4CF8()
{
    level._id_7C59 = "waypoint_captureneutral_br";
    level._id_7C27 = "waypoint_capture_br";
    level._id_7C30 = "waypoint_defend_br";
    level._id_7C35 = "waypoint_defending_br";
    level._id_7C2D = "waypoint_contested_br";
    level._id_7C6C = "waypoint_taking_br";
    level._id_7C54 = "waypoint_losing_br";
    _id_0CBD( "icon_waypoint_dom_br", "neutral", "MP_INGAME_ONLY/OBJ_CAPTURE_CAPS", 0 );
    _id_0CBD( "waypoint_taking_br", "friendly", "MP_INGAME_ONLY/OBJ_TAKING_CAPS", 1 );
    _id_0CBD( "waypoint_capture_br", "enemy", "MP_INGAME_ONLY/OBJ_CAPTURE_CAPS", 0 );
    _id_0CBD( "waypoint_defend_br", "friendly", "MP_INGAME_ONLY/OBJ_DEFEND_CAPS", 0 );
    _id_0CBD( "waypoint_defending_br", "friendly", "MP_INGAME_ONLY/OBJ_DEFENDING_CAPS", 0 );
    _id_0CBD( "waypoint_blocking_br", "friendly", "MP_INGAME_ONLY/OBJ_BLOCKING_CAPS", 0 );
    _id_0CBD( "waypoint_blocked_br", "friendly", "MP_INGAME_ONLY/OBJ_BLOCKED_CAPS", 0 );
    _id_0CBD( "waypoint_losing_br", "enemy", "MP_INGAME_ONLY/OBJ_LOSING_CAPS", 1 );
    _id_0CBD( "waypoint_captureneutral_br", "neutral", "MP_INGAME_ONLY/OBJ_CAPTURE_CAPS", 0 );
    _id_0CBD( "waypoint_contested_br", "contest", "MP_INGAME_ONLY/OBJ_CONTESTED_CAPS", 1 );
    _id_0CBD( "waypoint_dom_target_br", "neutral", "MP_INGAME_ONLY/OBJ_TARGET_CAPS", 0 );
    _id_0CBD( "icon_waypoint_target_br", "neutral", "MP_INGAME_ONLY/OBJ_TARGET_CAPS", 0 );
}

_id_0CBD( var_0, var_1, var_2, var_3 )
{
    level._id_10CCB[var_0] = var_1;
    level._id_10CCA[var_0] = 0;
    level._id_10CD7[var_0] = var_2;
    level._id_10CD6[var_0] = "icon_waypoint_dom_a";
    level._id_10CCF[var_0] = var_3;
}

_id_4CFB( var_0, var_1, var_2, var_3 )
{
    if ( var_1 > 0.05 && var_2 && !self._id_4959 )
        self._id_4959 = 1;
}

_id_4CFA( var_0 )
{
    self._id_525E _id_5255( 1, var_0.team );
}

_id_4CF9( var_0, var_1, var_2 )
{
    scripts\mp\gametypes\obj_dom::_id_4D31( var_0, var_1, var_2 );
}

_id_4CFC( var_0, var_1, var_2 )
{
    switch ( var_1 )
    {
        case "contested":
        case "idle":
        case "off":
            return 0;
        default:
            var_1 = "using";

            if ( isdefined( var_2 ) )
                var_1 = var_1 + var_2;

            self._id_0383 setscriptablepartstate( var_0, var_1 );

            if ( var_0 == "pulse" )
                self._id_0383 setscriptablepartstate( "flag", var_1 );

            return 1;
    }
}

_id_263C()
{

}

_id_5805()
{
    iprintlnbold( "EXTRACTION START" );
    var_0 = scripts\mp\gametypes\br_ai_encounters_util::_id_6797();

    foreach ( var_2 in var_0 )
    {
        var_3 = var_2._id_0375;

        if ( !isdefined( var_3 ) )
            continue;

        switch ( var_3 )
        {
            case "use_object":
                _id_5803( var_2 );
                break;
            case "goal":
                _id_EEFE( var_2 );
                break;
            default:
                break;
        }
    }
}

_id_EEFE( var_0 )
{
    if ( scripts\mp\utility\game::getgametype() != "br" )
        return;

    var_1 = spawn( "script_model", var_0.origin + ( 0, 0, 20 ) );
    var_1 setmodel( "ctf_game_flag_east" );
    self._id_01E1 = var_1;
    var_1._id_5254 = self;
}

_id_5803( var_0 )
{
    var_1 = spawn( "script_model", var_0.origin + ( 0, 0, 20 ) );
    var_1 setmodel( "fullbody_usmc_ar" );
    var_1 _meth_82CA( "sdr_cp_hostage_dropoff_ground_idle_pilot" );
    var_1 _meth_8640( 1 );
    var_1 makeuseable();
    var_1 setcursorhint( "HINT_NOICON" );
    var_1 setuseholdduration( "duration_medium" );
    var_1 _meth_857F( 1 );
    var_1 sethintdisplayfov( 120 );
    var_1 setusefov( 120 );
    var_1 setuserange( 80 );
    var_1 sethintstring( &"MP_BR_USE_PLUNDER_CACHE" );
    var_1 _meth_85A2();
    var_1 show();
    var_1._id_C09F = 0;
    var_1 thread _id_5806();
    self._id_55F9 = var_1;
    var_1._id_5254 = self;
}

_id_5806()
{
    level endon( "game_ended" );
    self endon( "death" );

    for (;;)
    {
        self waittill( "trigger", var_0 );

        if ( !self._id_C09F )
        {
            var_0 _id_580D( self, var_0.team );
            continue;
        }

        thread _id_57FD( var_0 );
    }
}

_id_580D( var_0, var_1 )
{
    self endon( "droppedBody" );
    var_0 makeunusable();
    var_2 = scripts\mp\hud_util::createfontstring( "default", 1.5 );
    var_2 scripts\mp\hud_util::setpoint( "CENTER", "CENTER", 0, 120 );
    var_2._id_024D = &"MP/BR_RESPAWN_BODY";
    self._id_79B3 = var_2;
    var_0 _meth_82CA( "sdr_cp_hostage_walk_hostage" );
    var_0 linkto( self, "j_clavicle_le", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    self allowads( 0 );
    self allowcrouch( 0 );
    self allowprone( 0 );
    self allowjump( 0 );
    scripts\mp\gametypes\br_respawn::_id_B78C( 1 );

    while ( !self stancebuttonpressed() || !self isonground() )
        waitframe();

    _id_5804( var_0, self, var_2, var_1 );
}

_id_5804( var_0, var_1, var_2, var_3 )
{
    if ( isdefined( var_1 ) )
    {
        var_1 allowads( 1 );
        var_1 allowcrouch( 1 );
        var_1 allowprone( 1 );
        var_1 allowjump( 1 );
        scripts\mp\gametypes\br_respawn::_id_B78C( 0 );
    }

    if ( isdefined( var_2 ) )
        var_2 destroy();

    if ( var_0 _meth_81CB() )
        var_0 unlink();

    var_4 = undefined;

    if ( isdefined( var_1 ) )
    {
        var_0.angles = var_1.angles;
        var_4 = var_1.origin;
        var_0.origin = var_4 + ( 0, 0, 40 );
    }
    else
    {
        var_4 = var_0.origin;
        var_0.origin = var_4 + ( 0, 0, 40 );
    }

    var_0 _meth_82CA( "sdr_cp_hostage_dropoff_ground_idle_pilot" );
    var_0 _meth_8640( 1 );
    var_0.origin = var_4 + ( 0, 0, 1 );
    var_0 makeuseable();

    if ( var_0 _id_5801() )
        var_0 _id_5800();

    var_0 notify( "droppedBody" );
}

_id_5801( var_0 )
{
    if ( distance2d( self.origin, self._id_5254._id_01E1.origin ) < 100 )
        return 1;
    else
        return 0;
}

_id_5800()
{
    self makeuseable();
    self setcursorhint( "HINT_NOICON" );
    self setuseholdduration( "duration_long" );
    self _meth_857F( 1 );
    self sethintstring( &"MP_BR_USE_PLUNDER_CACHE" );
    self._id_C09F = 1;
}

_id_57FD( var_0 )
{
    self._id_5254 _id_5255( 1 );
    self._id_5254._id_01E1 delete();
    self delete();
}

_id_485F()
{
    var_0 = getscriptablearray( self.target, "targetname" );
    var_1 = [];

    foreach ( var_3 in var_0 )
    {
        var_4 = var_3._id_0375;

        if ( !isdefined( var_4 ) )
            continue;

        switch ( var_4 )
        {
            case "destroy":
                var_1[var_1.size] = var_3;
                break;
            default:
                break;
        }
    }
}
