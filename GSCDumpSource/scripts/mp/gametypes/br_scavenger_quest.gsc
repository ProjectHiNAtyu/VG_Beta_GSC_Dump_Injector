// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    _id_0778::_id_CEBF( "body", ::_id_CB9E );
    var_0 = scripts\mp\gametypes\br_quest_util::_id_C293( "scavenger", 1 );

    if ( !var_0 )
        return;

    scripts\mp\gametypes\br_quest_util::_id_6C75( "scavenger" )._id_CFA3 = getdvarint( "scr_br_scavenger_searchCircleSize", 1000 );
    scripts\mp\gametypes\br_quest_util::_id_6C75( "scavenger" )._id_9F7D = getdvarint( "scr_br_scavenger_missionTimeBase", 300 );
    scripts\mp\gametypes\br_quest_util::_id_6C75( "scavenger" )._id_9F7E = getdvarint( "scr_br_scavenger_missionTimeBonus", 60 );
    scripts\mp\gametypes\br_quest_util::_id_6C75( "scavenger" )._id_C640 = getdvarint( "scr_br_scavenger_resetTimerOnPickup", 1 );
    scripts\mp\gametypes\br_quest_util::_id_C2B1( "scavenger", ::_id_E474 );
    scripts\mp\gametypes\br_quest_util::_id_C299( "scavenger", ::_id_E471 );
    scripts\mp\gametypes\br_quest_util::_id_C27A( "scavenger", ::_id_E46D );
    scripts\mp\gametypes\br_quest_util::_id_C296( "scavenger_locale" );
    scripts\mp\gametypes\br_quest_util::_id_C241( "scavenger_locale", ::_id_E464 );
    scripts\mp\gametypes\br_quest_util::_id_C26B( "scavenger_locale", ::_id_E46B );
    scripts\mp\gametypes\br_quest_util::_id_C299( "scavenger_locale", ::_id_E46F );
    scripts\mp\gametypes\br_quest_util::_id_C238( "scavenger_locale", ::_id_E461 );
    scripts\mp\gametypes\br_quest_util::_id_C295( "scavenger_locale", ::_id_E462 );
    scripts\mp\gametypes\br_quest_util::_id_C278( "scavenger_locale", ::_id_E465 );
    scripts\mp\gametypes\br_quest_util::_id_C280( "scavenger_locale", ::_id_E473 );
    scripts\mp\gametypes\br_quest_util::_id_BEAC( "scavenger", 1 );
    scripts\mp\gametypes\br_quest_util::_id_C281( "scavenger", ::_id_E46C );
    var_1 = [];
    var_1[0] = scripts\mp\gametypes\br_quest_util::_id_5A29;
    scripts\mp\gametypes\br_quest_util::_id_C28D( "scavenger", var_1 );
    game["dialog"]["mission_scav_accept"] = "mission_mission_scav_accept";
    game["dialog"]["mission_scav_success"] = "mission_mission_scav_success";
}

_id_E471()
{
    scripts\mp\gametypes\br_quest_util::_id_C2F7( self.team );
}

_id_E46D( var_0 )
{
    if ( var_0.team == self.team )
    {
        var_1 = scripts\mp\utility\teams::_id_6DAC( self.team, "players" );
        scripts\mp\gametypes\br_quest_util::_id_6C77( "scavenger_locale", self.team )._id_B6FE = var_1;

        if ( isdefined( self._id_EABC ) && isdefined( self._id_EABC._id_2E80 ) && var_1.size )
            self._id_EABC._id_2E80 setotherent( var_1[0] );

        if ( !scripts\mp\gametypes\br_quest_util::_id_8A81( var_0.team ) )
        {
            self._id_034B = "fail";
            scripts\mp\gametypes\br_quest_util::_id_C501();
        }
    }
}

_id_E465( var_0 )
{
    if ( !_id_34DF( var_0 ) )
        return;

    var_0 scripts\mp\gametypes\br_quest_util::_id_F91B();
    scripts\mp\gametypes\br_quest_util::_id_78F9( var_0 );
}

_id_E473( var_0 )
{
    if ( !_id_34DF( var_0 ) )
        return;

    var_0 scripts\mp\gametypes\br_quest_util::_id_F91E( "scavenger" );
    scripts\mp\gametypes\br_quest_util::_id_DCD9( var_0 );
}

_id_34DF( var_0 )
{
    if ( var_0.team == self._id_EABB[0].team )
        return 1;
    else
        return 0;
}

_id_E464( var_0 )
{
    var_1 = scripts\mp\gametypes\br_quest_util::_id_3FEB( "scavenger_locale", "scavenger", self.team );

    if ( !isdefined( var_0 ) )
    {
        var_1._id_411F = ( 0, 0, 0 );
        var_1._id_521F = 0;
        return var_1;
    }

    var_1 scripts\mp\gametypes\br_quest_util::_id_4018( "ui_mp_br_mapmenu_icon_scavengerhunt_objective", "current" );
    var_1._id_B6FE = scripts\mp\utility\teams::_id_6DAC( self.team, "players" );
    var_1._id_B020 = 0;
    scripts\mp\gametypes\br_quest_util::_id_10EF( "scavenger_locale", var_1 );
    var_1 _id_D87D( var_0 );
    return var_1;
}

_id_E46B( var_0 )
{
    self._id_B020++;
    var_1 = _id_D87D( var_0 );

    if ( var_1 )
    {
        self._id_EABB[0]._id_41EC = var_0.origin;
        scripts\mp\gametypes\br_quest_util::_id_4B61( self._id_EABB[0].team, "br_scavenger_quest_next_location" );
        level thread scripts\mp\gametypes\br_public::_id_2BB8( "mission_obj_next_nptarget", self._id_EABB[0].team, 1 );

        if ( istrue( scripts\mp\gametypes\br_quest_util::_id_6C75( "scavenger" )._id_C640 ) )
            self._id_EABB[0] scripts\mp\gametypes\br_quest_util::_id_BEAD( scripts\mp\gametypes\br_quest_util::_id_6C75( "scavenger" )._id_9F7D, 1 );
        else
            self._id_EABB[0] scripts\mp\gametypes\br_quest_util::_id_BEAB( scripts\mp\gametypes\br_quest_util::_id_6C75( "scavenger" )._id_9F7E );
    }
}

_id_D87D( var_0 )
{
    if ( !isdefined( var_0 ) )
    {
        var_1 = self._id_EABB[0];

        foreach ( var_3 in scripts\mp\utility\teams::_id_6DAC( var_1.team, "players" ) )
            var_3 _id_0A70::_id_D5DE( "br_assassination_notargets", undefined, 5 );

        var_1._id_034B = "no_locale";
        var_5 = spawnstruct();
        var_5.origin = self._id_411F;
        var_5.angles = ( 0, 0, 0 );
        var_5._id_8B20 = 0;

        if ( getdvar( "scr_br_gametype", "" ) == "dmz" )
        {
            var_6 = "mp/loot_set_cache_contents_dmz.csv";
            var_5 scripts\mp\gametypes\br_lootcache::_id_357C( 0, 1, "health", var_6 );
            var_5 scripts\mp\gametypes\br_lootcache::_id_357C( 0, 2, "ammo", var_6 );
            var_5 scripts\mp\gametypes\br_lootcache::_id_357C( 1, 1, "plunder", var_6 );
        }
        else
        {
            var_5 scripts\mp\gametypes\br_lootcache::_id_357C( 0, 1, "health" );
            var_5 scripts\mp\gametypes\br_lootcache::_id_357C( 0, 2, "ammo" );
            var_5 scripts\mp\gametypes\br_lootcache::_id_357C( 1, 1, "plunder" );
        }

        var_1 scripts\mp\gametypes\br_quest_util::_id_C501();
        return 0;
    }

    _func_03F5( var_0._id_0219 );
    _id_E363( var_0.origin, var_0.angles, self );
    self._id_411F = var_0.origin + ( 0, 0, 50 );
    scripts\mp\gametypes\br_quest_util::_id_A238( self._id_411F );
    _id_FD15();
    return 1;
}

_id_E46F()
{
    _id_4769();
    self._id_B6FE = undefined;
    self._id_EABB = undefined;

    if ( isdefined( self._id_2E80 ) )
    {
        if ( self._id_2E80 _meth_8574( "body" ) == "scavenger_closed" )
            self._id_2E80 delete();
    }
}

_id_E462( var_0, var_1 )
{
    if ( !isdefined( self._id_8F95 ) )
        self._id_8F95 = -1;

    var_2 = gettime();

    if ( self._id_8F95 == var_2 )
        return;

    self._id_8F95 = var_2;
    var_3 = distance2d( self._id_411F, var_0 );

    if ( var_3 > var_1 )
    {
        foreach ( var_5 in self._id_EABB )
            var_5 _id_58C0();
    }
}

_id_E461()
{
    return 0;
}

_id_EDD0( var_0 )
{
    var_1 = scripts\mp\gametypes\br_quest_util::_id_4017( "scavenger", self.team, var_0._id_0219, var_0 );
    var_1 scripts\mp\gametypes\br_quest_util::_id_C2B2( self.team, self );
    var_1 scripts\mp\gametypes\br_quest_util::_id_C23C( self );
    var_1.team = self.team;
    var_1._id_E6DE = self.origin;
    var_1._id_41EC = self.origin;
    var_1._id_C58C = var_0._id_C58C;
    var_2 = _id_9850( var_1._id_E6DE, var_1._id_C58C[0] );
    var_3 = var_1 scripts\mp\gametypes\br_quest_util::_id_C572( "scavenger_locale", var_2, 1 );

    if ( !var_3._id_521F )
    {
        _id_0A70::_id_D5DE( "br_assassination_notargets", undefined, 5 );
        var_1._id_034B = "no_locale";
        var_1 scripts\mp\gametypes\br_quest_util::_id_C2F7( self.team );
        var_4 = spawnstruct();
        var_4.origin = var_0.origin;
        var_4.angles = var_0.angles;
        var_4._id_8B20 = 0;

        if ( getdvar( "scr_br_gametype", "" ) == "dmz" )
        {
            var_5 = "mp/loot_set_cache_contents_dmz.csv";
            var_4 scripts\mp\gametypes\br_lootcache::_id_357C( 0, 1, "health", var_5 );
            var_4 scripts\mp\gametypes\br_lootcache::_id_357C( 0, 2, "ammo", var_5 );
            var_4 scripts\mp\gametypes\br_lootcache::_id_357C( 1, 1, "plunder", var_5 );
        }
        else
        {
            var_4 scripts\mp\gametypes\br_lootcache::_id_357C( 0, 1, "health" );
            var_4 scripts\mp\gametypes\br_lootcache::_id_357C( 0, 2, "ammo" );
            var_4 scripts\mp\gametypes\br_lootcache::_id_357C( 1, 1, "plunder" );
        }

        return;
    }

    scripts\mp\gametypes\br_quest_util::_id_F91F( "scavenger", self.team );
    var_1._id_F37C = 0;
    var_1 scripts\mp\gametypes\br_quest_util::_id_BEAD( scripts\mp\gametypes\br_quest_util::_id_6C75( "scavenger" )._id_9F7D, 4 );
    scripts\mp\gametypes\br_quest_util::_id_10EF( "scavenger", var_1 );
    scripts\mp\gametypes\br_quest_util::_id_E729( "scavenger", self, self.team );
    var_6 = spawnstruct();
    var_6._id_56BD = [];
    var_6._id_56BD[0] = self;
    var_6._id_B96A = scripts\mp\gametypes\br_quest_util::_id_6C79( "scavenger", scripts\mp\gametypes\br_quest_util::_id_6C84( self.team ) );
    scripts\mp\gametypes\br_quest_util::_id_4B61( self.team, "br_scavenger_quest_start_team", var_6 );
    scripts\mp\gametypes\br_quest_util::_id_4B59( self, "br_scavenger_quest_start_tablet_finder", var_6 );

    if ( !scripts\mp\gametypes\br_public::_id_8A9F() )
        scripts\mp\gametypes\br_quest_util::_id_6FE3( self.team, "br_mission_pickup_tablet" );

    scripts\mp\gametypes\br_quest_util::_id_4B60( var_1.team, self, 6, scripts\mp\gametypes\br_quest_util::_id_6C76( "scavenger" ) );
    level thread scripts\mp\gametypes\br_public::_id_2BB8( "mission_scav_accept", var_1.team, 1 );
}

_id_9850( var_0, var_1 )
{
    var_2 = spawnstruct();
    var_2._id_CFA8 = "getUnusedLootCacheArray";
    var_2._id_CFA2 = var_0;
    var_2._id_CFAD = 10000;
    var_2._id_CFAE = 0;
    var_2._id_CFAB = 4000;
    var_2._id_CFAC = 2000;
    var_2._id_CFA5 = 1;
    var_2._id_C58C = var_1;
    var_2._id_9F2A = 45;

    if ( getdvar( "scr_br_gametype", "" ) == "dmz" )
    {
        if ( var_2._id_CFAD < level._id_BE99 )
            var_2._id_CFAD = level._id_BE99;

        var_2._id_CFAB = level._id_BE99;
        var_2._id_CFAC = level._id_BE9A;
    }

    return var_2;
}

_id_3B11( var_0 )
{
    var_1 = spawnstruct();
    var_2 = scripts\mp\gametypes\br_quest_util::_id_6C84( self.team );
    var_3 = scripts\mp\gametypes\br_quest_util::_id_6C76( "scavenger" );
    var_4 = scripts\mp\gametypes\br_quest_util::_id_6C7E( scripts\mp\gametypes\br_quest_util::_id_6C7D( "scavenger" ) );
    var_1._id_ADB8 = scripts\mp\gametypes\br_quest_util::_id_ADBB( var_3, var_2, var_4 );

    if ( !scripts\mp\gametypes\br_public::_id_8A9F() )
    {
        scripts\mp\gametypes\br_quest_util::_id_4B61( self.team, "br_scavenger_quest_complete", var_1 );
        level thread scripts\mp\gametypes\br_public::_id_2BB8( "mission_scav_success", self.team, 1, 1 );
    }

    self._id_C803 = var_0.origin;
    self._id_C7F8 = var_0.angles;
    self._id_034B = "success";
    scripts\mp\gametypes\br_quest_util::_id_C501();
}

_id_58C0()
{
    scripts\mp\gametypes\br_quest_util::_id_4B61( self.team, "br_scavenger_quest_circle_failure" );
    level thread scripts\mp\gametypes\br_public::_id_2BB8( "mission_obj_circle_fail", self.team, 1 );
    self._id_034B = "fail";
    scripts\mp\gametypes\br_quest_util::_id_C501();
}

_id_FD15()
{
    foreach ( var_1 in self._id_B6FE )
        var_1 scripts\mp\gametypes\br_quest_util::_id_F91D( self._id_B020 );

    var_3 = scripts\mp\gametypes\br_quest_util::_id_E039( self._id_B6FE );

    foreach ( var_1 in var_3["valid"] )
    {
        var_1 scripts\mp\gametypes\br_quest_util::_id_F91E( "scavenger" );
        scripts\mp\gametypes\br_quest_util::_id_DCD9( var_1 );
    }

    foreach ( var_1 in var_3["invalid"] )
    {
        var_1 scripts\mp\gametypes\br_quest_util::_id_F91B();
        scripts\mp\gametypes\br_quest_util::_id_78F9( var_1 );
    }
}

_id_78FB( var_0 )
{
    scripts\mp\gametypes\br_quest_util::_id_78F9( var_0 );
    var_0 scripts\mp\gametypes\br_quest_util::_id_F91B();
}

_id_4769()
{
    foreach ( var_1 in self._id_B6FE )
        _id_78FB( var_1 );

    scripts\mp\gametypes\br_quest_util::_id_4768();
}

_id_E46C()
{
    scripts\mp\gametypes\br_quest_util::_id_4B61( self.team, "br_scavenger_quest_timer_expired" );
    level thread scripts\mp\gametypes\br_public::_id_2BB8( "mission_gen_fail", self.team, 1 );
}

_id_E363( var_0, var_1, var_2 )
{
    var_3 = spawn( "script_model", var_0 );
    var_4 = var_2._id_B6FE[0];
    var_3.angles = var_1;
    var_3 setotherent( var_4 );
    var_3 setmodel( "military_loot_crate_01_br_scavenger_01" );
    var_3 setscriptablepartstate( "body", "scavenger_closed" );
    var_3._id_BEA5 = var_2;
    var_2._id_2E80 = var_3;

    foreach ( var_6 in level.players )
    {
        if ( var_6 != var_4 && ( var_4.team == "none" || var_6.team != var_4.team ) )
            var_3 _meth_86A6( var_6 );
    }
}

_id_CB9E( var_0, var_1, var_2, var_3, var_4, var_5 )
{
    if ( var_2 == "scavenger_closed" && isdefined( var_0._id_0186 ) )
    {
        var_6 = var_0._id_0186._id_BEA5._id_EABB[0];

        if ( var_3.team != var_6.team )
        {
            var_3 iprintlnbold( "Chest Requires a Scavenger Mission" );
            return;
        }

        var_0 setscriptablepartstate( "body", "scavenger_opening" );
        var_7 = getdvarint( "scr_br_scavenger_cacheDeleteDelay", 30 );
        var_0._id_0186 scripts\engine\utility::_id_4687( var_7, ::delete );
        var_6 scripts\mp\gametypes\br_quest_util::_id_C23C( var_3 );

        switch ( var_0._id_0186._id_BEA5._id_B020 )
        {
            case 0:
                scripts\mp\gametypes\br_quest_util::_id_6FBB( "scavenger_1", var_3.team, var_0.origin, var_0.angles, var_6._id_C805 );
                break;
            case 1:
                scripts\mp\gametypes\br_quest_util::_id_6FBB( "scavenger_2", var_3.team, var_0.origin, var_0.angles, var_6._id_C805 );
                break;
            case 3:
                break;
        }

        if ( var_0._id_0186._id_BEA5._id_B020 == 2 )
        {
            var_6._id_C803 = var_0.origin;
            var_6._id_C7F8 = var_0.angles;
            scripts\mp\gametypes\br_quest_util::_id_4B60( var_6.team, var_3, 8, scripts\mp\gametypes\br_quest_util::_id_6C76( "scavenger" ) );
            var_6 _id_3B11( var_0._id_0186 );
        }
        else
        {
            scripts\mp\gametypes\br_quest_util::_id_4B60( var_6.team, var_3, 7, scripts\mp\gametypes\br_quest_util::_id_6C76( "scavenger" ) );
            var_8 = _id_9850( var_0.origin, var_6._id_C58C[var_0._id_0186._id_BEA5._id_B020 + 1] );
            var_0._id_0186._id_BEA5 scripts\mp\gametypes\br_quest_util::_id_A237( "scavenger_locale", var_8 );
        }

        level notify( "lootcache_opened_kill_callout" + var_0.origin );
        var_9 = [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "game", "getFriendlyPlayers" ) ]]( var_3.team, 0 );

        foreach ( var_11 in var_9 )
            var_11 notify( "calloutmarkerping_warzoneKillQuestIcon" );
    }
}

_id_E474()
{
    self._id_C58C = [];
    var_0 = self.origin;

    for ( var_1 = 0; var_1 < 3; var_1++ )
    {
        var_2 = _id_9850( var_0 );
        var_3 = scripts\mp\gametypes\br_quest_util::_id_5AE4( "scavenger", var_2 );

        if ( !isdefined( var_3 ) )
            return 0;

        _func_03F5( var_3._id_0219 );
        var_0 = var_3.origin;
        self._id_C58C[var_1] = var_3;
    }

    return 1;
}
