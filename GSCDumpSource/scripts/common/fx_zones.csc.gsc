// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

fx_zone_watcher( var_0, var_1, var_2, var_3 )
{
    _id_04E7::_id_5BF1( var_1 );
    _id_04E7::_id_5BF1( "fx_zone_" + var_0 + "_active" );

    if ( isdefined( var_2 ) )
        _id_04E7::_id_5BF1( var_2 );

    if ( isdefined( var_3 ) )
    {
        if ( !_id_04E7::_id_5BEC( var_3 ) )
            _id_04E7::_id_5BF1( var_3 );
    }

    waitframe();
    var_4 = _func_008B();
    var_4._id_0316 = 0;

    if ( isdefined( var_3 ) )
        var_4 thread fx_zone_watcher_either_off_killthread( var_0, var_3, var_1, var_2 );

    var_4 thread fx_zone_watcher_launcher( var_0, var_1, var_2 );
}

fx_zone_watcher_launcher( var_0, var_1, var_2 )
{
    if ( !isdefined( var_2 ) )
        var_2 = var_1;

    for (;;)
    {
        thread fx_zone_watcher_either( var_0, var_1, var_2 );
        level waittill( "fx_zone_" + var_0 + "_deactivating" );
        level waittill( "fx_zone_" + var_0 + "_activating" );
    }
}

fx_zone_watcher_either( var_0, var_1, var_2 )
{
    level endon( "fx_zone_" + var_0 + "_deactivating" );
    var_0 = var_0 + "";

    for (;;)
    {
        _id_04E7::_id_5C0B( var_1, var_2 );
        play_exploder( var_0 );
        flag_waitopen_both( var_1, var_2 );
        _id_E890( var_0 );
    }
}

fx_zone_watcher_either_off_killthread( var_0, var_1, var_2, var_3 )
{
    var_0 = var_0 + "";

    for (;;)
    {
        if ( !isdefined( var_3 ) )
            var_3 = var_2;

        var_4 = 0;
        _id_04E7::_id_5C04( var_1 );
        send_deactivate_zone_msg( var_0 );
        _id_E890( var_0 );
        _id_04E7::_id_5C10( var_1 );
        send_activate_zone_msg( var_0 );

        if ( _id_04E7::_id_5BE0( var_2 ) || _id_04E7::_id_5BE0( var_3 ) )
            play_exploder( var_0 );
    }
}

send_activate_zone_msg( var_0 )
{
    level notify( "fx_zone_" + var_0 + "_activating" );
    _id_04E7::_id_5BFB( "fx_zone_" + var_0 + "_active" );
}

send_deactivate_zone_msg( var_0 )
{
    level notify( "fx_zone_" + var_0 + "_deactivating" );
    _id_04E7::_id_5BE4( "fx_zone_" + var_0 + "_active" );
}

flag_waitopen_both( var_0, var_1 )
{
    while ( _id_04E7::_id_5BE0( var_0 ) || _id_04E7::_id_5BE0( var_1 ) )
        level _id_04E7::_id_108C3( var_0, var_1 );
}

play_exploder( var_0 )
{
    if ( self._id_0316 )
        return;

    self._id_0316 = 1;
    var_1 = 0;
    _func_00C3( var_1, var_0 );
}

_id_E890( var_0 )
{
    if ( !self._id_0316 )
        return;

    self._id_0316 = 0;
    var_1 = 0;
    _func_00C5( var_1, var_0 );
}
