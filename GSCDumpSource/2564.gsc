// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_81C4()
{
    _id_81CE();
    level._effect["plane_death"] = loadfx( "vfx/explosion/vehicle_warbird_explosion_midair" );
    level._effect["airstrike_death_allies"] = loadfx( "vfx/explosion/vehicle_warbird_explosion_midair" );
    level._effect["airstrike_death_axis"] = loadfx( "vfx/explosion/vehicle_warbird_explosion_midair" );
    level._id_CC14 = [];
}

_id_B178( var_0, var_1, var_2, var_3, var_4, var_5, var_6 )
{
    switch ( var_0 )
    {
        case "firebomb":
        case "s2_airstrike":
            level thread _id_B177( var_0, var_1, var_2, var_3, var_4 );
            break;
        case "zm_carepackage":
        case "emergency_carepackage":
        case "carepackage":
        case "raid_carepackage":
            break;
        case "paratroopers":
            break;
        case "paratrooper_insert":
            break;
    }
}

_id_B177( var_0, var_1, var_2, var_3, var_4 )
{
    level endon( "game_ended" );
    var_1 endon( "airstrike_complete" );
    var_1 endon( "delete" );
    var_1 endon( "death" );
    var_1 endon( "crashing" );

    if ( isdefined( var_2 ) )
        var_2 endon( "disconnect" );

    var_5 = 0;

    if ( isdefined( var_2 ) )
        var_5 = var_2 _id_07E3::_hasperk( "specialty_improvedstreaks" );

    var_6 = _id_6A2D( var_0 ) / 2;
    var_7 = var_1._id_503D + -1 * anglestoforward( var_1.angles ) * 2000;
    var_1._id_2600 = spawn( "script_model", ( 0, 0, 0 ) );
    var_1._id_2600 setmodel( "tag_origin" );
    var_1._id_2600 linkto( var_1, "TAG_BOMB_L", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_1._id_2601 = spawn( "script_model", ( 0, 0, 0 ) );
    var_1._id_2601 setmodel( "tag_origin" );
    var_1._id_2601 linkto( var_1, "TAG_BOMB_R", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    var_8 = 1;

    if ( _id_07E3::_id_89BD() && isdefined( var_4 ) && !level._id_BF4C )
        var_8 = 0;

    if ( var_8 )
        level thread _id_400D( var_1, var_0 );

    wait 4;
    var_1 notify( "start_bombing" );
    var_1._id_AF67 = 1;
    var_9 = 0;
    var_10 = _id_6A2E( var_0 );
    var_11 = 0;
    var_12 = 3;
    var_13 = 1;

    while ( var_11 <= var_10 )
    {
        var_14 = _id_6906( var_0 );
        var_15 = ( 0, randomint( 360 ), 0 );
        var_16 = anglestoforward( var_15 ) * var_14;
        var_17 = var_1.origin + anglestoforward( var_1.angles ) * 2000;
        var_17 = ( var_17[0], var_17[1], var_7[2] );
        var_17 = var_17 + var_16;

        if ( var_9 )
            var_18 = var_1._id_2600.origin;
        else
            var_18 = var_1._id_2601.origin;

        var_9 = !var_9;
        var_19 = _id_07E3::_id_9934( _id_6908( var_0, var_2 ), var_18, var_17, 3.0, var_18[2], var_2 );
        var_19.owner = var_1.owner;
        var_19.team = var_1.team;

        if ( var_0 == "firebomb" )
        {
            var_19 thread _id_0A01::_id_3FAB( var_5 );

            if ( var_12 == 3 )
            {
                var_19 thread _id_07E3::_id_8E29();
                var_12 = 1;
            }
            else if ( var_12 < 3 )
                var_12++;

            if ( var_13 == 1 && var_10 - var_11 < 1 )
            {
                var_19 thread _id_07E3::_id_8E2A();
                var_13 = 0;
            }
        }
        else if ( var_0 == "s2_airstrike" )
        {
            if ( var_12 == 3 )
            {
                var_19 thread _id_07E3::_id_8E29();
                var_12 = 1;
            }
            else if ( var_12 < 3 )
                var_12++;

            if ( var_13 == 1 && var_10 - var_11 < 1 )
            {
                var_19 thread _id_07E3::_id_8E2A();
                var_13 = 0;
            }
        }

        if ( isdefined( var_1.killcament ) )
            var_19 _id_07E3::_id_D478( var_1.killcament );

        var_11 = var_11 + 0.1;
        wait 0.1;
    }

    var_1 notify( "stop_bombing" );
    level._id_1395 = undefined;
}

_id_6908( var_0, var_1 )
{
    switch ( var_0 )
    {
        case "firebomb":
            var_2 = 0;

            if ( isdefined( var_1 ) )
                var_2 = var_1 _id_07E3::_hasperk( "specialty_improvedstreaks" );

            if ( var_2 )
            {
                if ( isdefined( var_1 ) && isdefined( var_1.team ) && var_1.team == "axis" )
                    return "firebomb_bomb_axis_grenadier_mp";
                else
                    return "firebomb_bomb_grenadier_mp";
            }
            else if ( isdefined( var_1 ) && isdefined( var_1.team ) && var_1.team == "axis" )
                return "firebomb_bomb_axis_mp";
            else
                return "firebomb_bomb_mp";
        case "s2_airstrike":
            if ( isdefined( var_1 ) && isdefined( var_1.team ) && var_1.team == "axis" )
            {
                return "s4_airstrike_bomb_mp";
                return;
            }

            return "s4_airstrike_bomb_mp";
            return;
    }
}

_id_6906( var_0 )
{
    switch ( var_0 )
    {
        case "firebomb":
            return 0;
        case "s2_airstrike":
            return 128;
        default:
            return 0;
    }
}

_id_E71D( var_0, var_1, var_2, var_3, var_4, var_5, var_6 )
{
    self notify( "used" );

    if ( !isdefined( var_5 ) )
    {
        if ( isdefined( var_4 ) )
            var_5 = var_4;
        else
            var_5 = self.pers["team"];
    }

    for ( var_7 = 0; var_7 < var_1.size; var_7++ )
    {
        var_8 = var_1[var_7];
        var_9 = var_2[var_7];
        var_10 = _id_07E3::_id_2D15( level._id_9A95 + ( 0, 0, 10000 ), level._id_9A95, 0, undefined );
        var_8 = ( var_8[0], var_8[1], var_10["position"][2] );

        if ( isdefined( var_4 ) )
        {
            thread _id_248C( var_0, var_8, var_9, undefined, var_5, var_3, var_4, var_6 );
            continue;
        }

        thread _id_248C( var_0, var_8, var_9, self, var_5, var_3, undefined, var_6 );
    }
}

_id_F2D7( var_0, var_1 )
{
    var_2 = scripts\engine\utility::ter_op( isdefined( var_1 ) && var_1, 1, 0 );
    var_0 setclientomnvar( "ui_airspace_crowded_no_control", var_2 );
    level._id_13B5 = var_1;
}

_id_13BD()
{
    self endon( "disconnect" );
    level endon( "game_ended" );
    self setclientomnvar( "ui_airspace_crowded_air_superiority", 1 );

    while ( isdefined( level._id_1395 ) || isdefined( level._id_3292 ) )
        waitframe();

    self setclientomnvar( "ui_airspace_crowded_air_superiority", 0 );
}

_id_248C( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7 )
{
    if ( isdefined( level._id_13B5 ) )
    {
        while ( isdefined( level._id_13B5 ) )
            level waittill( "begin_airstrike" );

        _id_F2D7( var_3, 1 );
    }

    _id_F2D7( var_3, 1 );
    var_8 = _id_5041( var_1, var_3 );

    if ( isdefined( level._id_CC0F ) && isdefined( level._id_CC0F[var_5] ) )
    {
        if ( isdefined( var_6 ) )
            _id_0A03::_id_3FD9( var_8, var_2, var_5, var_6 );
        else
            _id_0A03::_id_3FD9( var_8, var_2, var_5, var_3.team );
    }

    _id_2FAA( var_0, var_3, var_8, var_2, var_5, var_6, var_4, var_7 );
    wait 1.0;
    _id_F2D7( var_3, undefined );

    if ( isdefined( var_3 ) )
        var_3 notify( "begin_airstrike" );

    level notify( "begin_airstrike" );

    if ( isdefined( level._id_CC0F ) && isdefined( level._id_CC0F[var_5] ) )
        thread _id_0A03::_id_9A17( var_8, var_5 );
}

_id_2FAA( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7 )
{
    var_8 = _id_6C16( var_4 );

    if ( isdefined( var_1 ) )
        var_1 endon( "disconnect" );

    var_9 = ( 0, var_3, 0 );
    var_10 = _id_6C1D( var_2, var_9, var_8, var_4 );
    level thread _id_4E4D( var_0, var_1, var_2, var_10, var_9, var_4, var_5, var_6, var_7 );
}

_id_4E4D( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8 )
{
    switch ( var_5 )
    {
        case "firebomb":
        case "s2_airstrike":
            var_3 = var_3 + -1 * anglestoforward( var_4 ) * 2000;
            thread _id_E365( var_0, var_1, var_2, var_3, var_4, var_5, 1, var_6 );
            break;
        case "zm_carepackage":
        case "emergency_carepackage":
        case "paratrooper_insert":
        case "carepackage":
        case "raid_carepackage":
        case "paratroopers":
            thread _id_E365( var_0, var_1, var_2, var_3, var_4, var_5, 1, var_6, var_7, var_8 );
            break;
    }
}

_id_E365( var_0, var_1, var_2, var_3, var_4, var_5, var_6, var_7, var_8, var_9 )
{
    if ( isdefined( var_8 ) )
        var_10 = var_8;
    else
        var_10 = var_7;

    var_11 = _id_6C1B( var_5, var_1, var_10 );
    var_12 = _id_6C14( var_5, var_1, var_10 );
    var_13 = _id_6C10( var_5, var_1, var_10 );
    var_14 = spawn( "script_model", var_3 );
    var_14.angles = var_4;

    if ( isdefined( var_12 ) )
    {
        var_14 setmodel( var_12 );
        var_14 thread _id_5896( var_11, 1 );
    }
    else
        var_14 setmodel( var_11 );

    if ( isdefined( var_13 ) )
        var_14 _id_B8A5( var_5, var_13 );

    if ( _id_07E3::_id_89BD() && isdefined( var_7 ) )
    {
        var_14._id_560C = [];
        var_15 = anglestoforward( var_14.angles + ( 0, 135, 0 ) );
        var_16 = var_3 + var_15 * 1200;
        var_17 = spawn( "script_model", var_16 );
        var_17.angles = var_4;
        var_17 setmodel( var_11 );
        var_17.team = var_7;
        var_17 _id_B8A5( var_5, var_13 );
        var_14._id_560C[var_14._id_560C.size] = var_17;
        var_15 = anglestoforward( var_14.angles + ( 0, -135, 0 ) );
        var_16 = var_3 + var_15 * 1200;
        var_17 = spawn( "script_model", var_16 );
        var_17.angles = var_4;
        var_17 setmodel( var_11 );
        var_17.team = var_7;
        var_17 _id_B8A5( var_5, var_13 );
        var_14._id_560C[var_14._id_560C.size] = var_17;
    }

    var_18 = 1;

    if ( _id_07E3::_id_8B04() )
        var_18 = 0;

    if ( _id_07E3::_id_89BD() && isdefined( level._id_BF4E._id_CC0D ) && _id_07E3::_id_86D6( level._id_BF4E._id_CC0D._id_78EE ) )
        var_18 = 0;

    var_18 = 0;

    if ( var_18 )
    {
        var_19 = 1;
        var_20 = 0;
        var_14._id_9F0C = _id_07E3::_id_E286( "script_model", var_3 );
        var_14._id_9F0C setmodel( "tag_origin" );
        var_21 = var_1;

        if ( isdefined( var_7 ) )
            var_21 = var_7;

        var_14._id_9F0C _id_07E3::_id_D59F( var_21, _id_6C19( var_5 ), 20, 20, var_20, var_19, _id_6C1A( var_5 ) );
        var_14._id_9F0C _id_07E3::_id_9502( var_14, "tag_origin", ( 0, 0, 0 ), ( 0, 0, 0 ) );
    }

    var_14.type = var_5;
    _id_10E4( var_14 );
    level thread _id_07E3::_id_FBF1();
    var_14 setcandamage( 1 );
    var_14 _meth_82F1( 1 );
    var_14 thread _id_07E3::_id_D535( _id_6C18( var_5 ), undefined, ::_id_AB84, ::_id_AB83, 1 );
    var_14 thread _id_7415();
    var_14._id_AF67 = 0;
    var_14 _id_B8BE( var_5 );
    var_14._id_9355 = var_0;

    if ( isdefined( var_7 ) )
        var_14.team = var_7;
    else if ( isdefined( var_1 ) )
    {
        var_14.owner = var_1;
        var_14.team = var_1.team;
    }
    else
        var_14.team = "allies";

    var_14._id_503D = var_2;
    var_14._id_90EB = gettime();
    var_14 thread _id_B174( var_5, var_3, var_4 );

    if ( isdefined( var_14._id_560C ) )
    {
        foreach ( var_17 in var_14._id_560C )
            var_17 thread _id_B174( var_5, var_17.origin, var_4 );
    }

    thread _id_B178( var_5, var_14, var_1, var_4, var_7, var_8, var_9 );
    var_14 endon( "death" );
    var_14 endon( "crashing" );
    var_14 waittill( "pathComplete" );
    var_14 thread _id_4765( 0 );
}

_id_5896( var_0, var_1 )
{
    self endon( "death" );
    _id_07E3::_id_D6B3( 0, 1, var_1 );
    wait( var_1 );
    self setmodel( var_0 );
}

_id_B8A5( var_0, var_1 )
{
    switch ( var_0 )
    {
        case "firebomb":
        case "s2_airstrike":
            self _meth_82CA( var_1 );
            break;
        case "zm_carepackage":
        case "emergency_carepackage":
        case "paratrooper_insert":
        case "carepackage":
        case "raid_carepackage":
        case "paratroopers":
            self _meth_82CB( var_1 );
            break;
    }
}

_id_B8BE( var_0 )
{
    switch ( var_0 )
    {
        case "fighter_strike":
            _id_07E3::_id_DEEF( "ks_fighterstrike_flyby" );
            break;
        case "firebomb":
        case "s2_airstrike":
            _id_07E3::_id_DEEF( "ks_bombing_run_flyby" );
            break;
        case "carepackage":
            _id_07E3::_id_DEEF( "ks_carepackage_flyby" );
            break;
        case "emergency_carepackage":
            _id_07E3::_id_DEEF( "ks_emergency_carepackage" );
            break;
        case "zm_carepackage":
        case "paratrooper_insert":
        case "raid_carepackage":
        case "paratroopers":
            _id_07E3::_id_DEEF( "ks_carepackage_flyby" );
            break;
    }
}

_id_6C18( var_0 )
{
    switch ( var_0 )
    {
        case "s2_airstrike":
            return 1000;
        case "firebomb":
            return 1250;
        case "fighter_strike":
            return 200;
        case "zm_carepackage":
        case "paratrooper_insert":
        case "carepackage":
        case "raid_carepackage":
        case "paratroopers":
            return 1000;
        case "emergency_carepackage":
            return 1500;
        case "s2_uav":
            return 300;
        case "counter_uav":
            return 300;
        case "advanced_uav":
            return 350;
        case "plane_gunner":
            return 3000;
    }
}

_id_6C1B( var_0, var_1, var_2 )
{
    if ( isdefined( var_2 ) )
        var_3 = var_2;
    else if ( isdefined( var_1 ) )
        var_3 = var_1.team;
    else
        var_3 = "allies";

    switch ( var_0 )
    {
        case "firebomb":
            if ( var_3 == "allies" )
                return "ger_bomber_lancaster_vista";
            else
                return "ger_bomber_he_177_vista";
        case "s2_airstrike":
            if ( isdefined( var_3 ) && var_3 == "allies" )
                return "usa_bomber_a20_vista";
            else
                return "ger_bomber_he_111_vista_ai";
        case "paratrooper_insert":
        case "carepackage":
        case "raid_carepackage":
        case "paratroopers":
            if ( isdefined( var_3 ) && var_3 == "allies" )
                return "usa_bomber_skytrain_vista";
            else
                return "ger_bomber_junkers52_vista";
        case "zm_carepackage":
            return "usa_bomber_skytrain_vista";
        case "emergency_carepackage":
            if ( isdefined( var_3 ) && var_3 == "allies" )
            {
                return "usa_bomber_commando_vista";
                return;
            }

            return "ger_bomber_wiking_vista";
            return;
    }
}

_id_6C14( var_0, var_1, var_2 )
{
    if ( isdefined( var_2 ) )
        var_3 = var_2;
    else if ( isdefined( var_1 ) )
        var_3 = var_1.team;
    else
        var_3 = "allies";

    switch ( var_0 )
    {
        case "s2_airstrike":
            if ( isdefined( var_3 ) && var_3 == "allies" )
                return "usa_bomber_a20_vista_fade";
            else
                return "ger_bomber_he_111_vista_ai_fade";
        case "paratrooper_insert":
        case "carepackage":
        case "raid_carepackage":
        case "paratroopers":
            if ( isdefined( var_3 ) && var_3 == "allies" )
                return "usa_bomber_skytrain_vista_fade";
            else
                return "ger_bomber_junkers52_vista_fade";
        case "zm_carepackage":
            return "usa_bomber_skytrain_vista_fade";
        case "emergency_carepackage":
            if ( isdefined( var_3 ) && var_3 == "allies" )
            {
                return "usa_bomber_commando_vista_fade";
                return;
            }

            return "ger_bomber_wiking_vista_fade";
            return;
    }
}

_id_6C10( var_0, var_1, var_2 )
{
    if ( isdefined( var_2 ) )
        var_3 = var_2;
    else if ( isdefined( var_1 ) )
        var_3 = var_1.team;
    else
        var_3 = "allies";

    switch ( var_0 )
    {
        case "firebomb":
            if ( var_3 == "allies" )
                return "ks_firebomb_usa";
            else
                return "ks_firebomb_ger";
        case "s2_airstrike":
            if ( isdefined( var_3 ) && var_3 == "allies" )
                return "ks_carpetbomb_usa";
            else
                return "ks_carpetbomb_ger";
        case "carepackage":
            if ( isdefined( var_3 ) && var_3 == "allies" )
                return "ks_carepackage_usa_animated";
            else
                return "ks_carepackage_ger_animated";
        case "raid_carepackage":
            if ( game["defenders"] == "allies" )
                return "ks_carepackage_usa_animated";
            else
                return "ks_carepackage_ger_animated";
        case "zm_carepackage":
            return "ks_carepackage_ger_animated";
        case "paratrooper_insert":
        case "paratroopers":
            if ( isdefined( var_3 ) && var_3 == "allies" )
                return "ks_paratrooper_usa_animated";
            else
                return "ks_paratrooper_ger_animated";
        case "emergency_carepackage":
            if ( isdefined( var_3 ) && var_3 == "allies" )
            {
                return "ks_emergency_airdrop_usa_animated";
                return;
            }

            return "ks_emergency_airdrop_ger_animated";
            return;
    }
}

_id_6C19( var_0 )
{
    switch ( var_0 )
    {
        case "firebomb":
        case "s2_airstrike":
            return "scorestreak_minimap_bombing";
        case "fighter_strike":
            return "scorestreak_minimap_fighter";
        case "plane_gunner":
            return "scorestreak_minimap_fighter";
        case "zm_carepackage":
        case "emergency_carepackage":
        case "paratrooper_insert":
        case "carepackage":
        case "raid_carepackage":
        case "paratroopers":
            return "scorestreak_minimap_drop";
    }
}

_id_6C1A( var_0 )
{
    switch ( var_0 )
    {
        case "zm_carepackage":
        case "emergency_carepackage":
        case "paratrooper_insert":
        case "carepackage":
        case "raid_carepackage":
        case "paratroopers":
            return "aid";
        case "s2_airstrike":
            return "explosive";
        case "firebomb":
            return "fire";
    }
}

_id_DCC2( var_0, var_1, var_2, var_3, var_4 )
{
    var_5 = 1;
    var_6 = 0;
    var_7 = 1;
    var_8 = var_0;

    if ( isdefined( var_4 ) )
        var_8 = var_4;

    if ( isdefined( var_1 ) )
    {
        var_9 = var_2 * 2;
        var_1 _id_07E3::_id_D59F( var_8, var_3, var_9, var_9, var_7, var_6 );
        var_1 _id_07E3::_id_D54A( 100, var_5 );
    }
}

_id_6A91()
{
    return 80;
}

_id_AB83( var_0, var_1, var_2, var_3 )
{
    if ( isdefined( var_0 ) && isdefined( self.owner ) && var_0 == self.owner )
        return -1;

    var_4 = var_3;

    if ( var_1 != "killstreak_flak_gun_mp" )
    {
        switch ( var_2 )
        {
            case "MOD_EXPLOSIVE":
            case "MOD_GRENADE_SPLASH":
            case "MOD_IMPACT":
            case "MOD_GRENADE":
            case "MOD_PROJECTILE_SPLASH":
            case "MOD_PROJECTILE":
                var_4 = var_4 * 0.6;
                break;
            case "MOD_EXPLOSIVE_BULLET":
                var_4 = var_4 * 0.4;
                break;
            case "MOD_PISTOL_BULLET":
            case "MOD_RIFLE_BULLET":
            default:
                if ( issubstr( var_1, "fmj" ) )
                    var_4 = var_4 * 2.0;

                if ( isdefined( var_0 ) && var_0 _id_07E3::_hasperk( "specialty_superbulletpenetration" ) )
                    var_4 = var_4 * 2.0;

                if ( _id_8950( var_1 ) )
                    var_4 = var_4 * 0.12;

                var_4 = var_4 * 0.15;
                break;
        }
    }

    return _id_07E3::_id_9FF4( var_0, var_1, var_2, var_4 );
}

_id_8950( var_0 )
{
    foreach ( var_2 in level._id_CC14 )
    {
        if ( issubstr( var_0, var_2 ) )
            return 1;
    }

    return 0;
}

_id_743E()
{
    level endon( "game_ended" );
    self endon( "death" );

    for (;;)
    {
        level waittill( "launcher_missile_fire", var_0, var_1 );
        var_1[0] thread _id_E4E9( self, var_0 );
        thread _id_90E0( var_1[0], var_0 );
    }
}

_id_E4E9( var_0, var_1 )
{
    var_2 = vectornormalize( var_0.origin - var_1.origin );
    var_3 = 15;
    var_4 = anglestoforward( var_1 getplayerangles() );

    if ( vectordot( var_2, var_4 ) >= cos( var_3 ) )
        _id_07E3::_id_D6DE( 1 );
}

_id_90E0( var_0, var_1 )
{
    self endon( "death" );
    var_0 endon( "death" );
    var_2 = _id_6C17( self.type );

    for (;;)
    {
        var_3 = self.origin;

        if ( self.type == "fighter_strike" )
            var_3 = self gettagorigin( "TAG_BLOOD" );

        var_4 = distancesquared( var_0.origin, var_3 );

        if ( var_4 < var_2 )
            thread _id_90DF( var_0, var_1 );

        wait 0.05;
    }
}

_id_90DF( var_0, var_1 )
{
    self dodamage( 2200, self.origin, var_1, var_0, "MOD_PROJECTILE", var_0._id_04D6 );
    var_0 detonate();
}

_id_3FF1()
{
    self._id_1E03 = 1000;
    self._id_1E02 = 1000;
    self._id_1E06 = _func_0149( self, self._id_1E03, self._id_1E02 );
}

_id_4839()
{
    if ( isdefined( self._id_1E06 ) )
        _func_014D( self._id_1E06 );
}

_id_6C17( var_0 )
{
    switch ( var_0 )
    {
        case "fighter_strike":
            return 10000;
        case "plane_gunner":
        case "zm_carepackage":
        case "firebomb":
        case "emergency_carepackage":
        case "paratrooper_insert":
        case "s2_uav":
        case "s2_airstrike":
        case "carepackage":
        case "advanced_uav":
        case "raid_carepackage":
        case "paratroopers":
        case "counter_uav":
        default:
            return 22500;
    }
}

_id_4765( var_0 )
{
    level endon( "game_ended" );
    level._id_1395 = undefined;
    self notify( "airstrike_complete" );
    _id_C4F4( self );

    if ( isdefined( self._id_9F0C ) )
        self._id_9F0C delete();

    if ( isdefined( self._id_9F0D ) )
        self._id_9F0D delete();

    if ( isdefined( self ) )
    {
        if ( isdefined( self._id_2600 ) )
            self._id_2600 delete();

        if ( isdefined( self._id_2601 ) )
            self._id_2601 delete();

        if ( isdefined( self._id_560C ) )
        {
            foreach ( var_2 in self._id_560C )
                var_2 delete();
        }

        self delete();
    }
}

_id_AB84( var_0, var_1, var_2, var_3 )
{
    thread _id_3E4A();
    var_4 = undefined;

    if ( self.type == "carepackage" || self.type == "emergency_carepackage" || self.type == "raid_carepackage" || self.type == "zm_carepackage" )
        var_4 = "cpkg_destroyed";

    _id_07E3::_id_AB05( var_0, var_1, var_2, var_3, _id_6C11( self.type ), var_4, _id_6C13( self.type ), 1 );
}

_id_3E4A()
{
    self notify( "crashing" );
    self._id_3E44 = 1;

    switch ( self.type )
    {
        case "plane_gunner":
        case "zm_carepackage":
        case "firebomb":
        case "fighter_strike":
        case "emergency_carepackage":
        case "paratrooper_insert":
        case "s2_airstrike":
        case "carepackage":
        case "raid_carepackage":
        case "paratroopers":
            break;
    }
}

_id_7415( var_0 )
{
    level endon( "game_ended" );
    self endon( "delete" );
    scripts\engine\utility::_id_108C3( "death", "crashing" );

    if ( isdefined( self ) )
    {
        var_1 = anglestoforward( self.angles );
        playfx( _id_6C12( self.type, self.team ), self.origin, var_1 );
        _id_07E3::_id_40D2( "ks_plane_destruct_explode", undefined, self.origin );

        if ( self.type == "s2_airstrike" )
            level notify( "aud_carpet_bomb_killed" );
    }

    _id_4765( 1 );
}

_id_6C11( var_0 )
{
    switch ( var_0 )
    {
        case "s2_airstrike":
            return "airstrike_destroyed";
        case "firebomb":
            return "fire_bombing_run_destroyed";
        case "zm_carepackage":
        case "carepackage":
        case "raid_carepackage":
            return "carepackage_plane_destroyed";
        case "emergency_carepackage":
            return "emergency_carepackage_plane_destroyed";
        case "paratrooper_insert":
        case "paratroopers":
            return "paratroopers_plane_destroyed";
    }
}

_id_6C13( var_0 )
{
    switch ( var_0 )
    {
        case "s2_airstrike":
            return "callout_destroyed_airstrike";
        case "firebomb":
            return "callout_destroyed_firebomb";
        case "zm_carepackage":
        case "carepackage":
        case "raid_carepackage":
            return "callout_destroyed_carepackage";
        case "emergency_carepackage":
            return "callout_destroyed_emergency_carepackage";
        case "paratrooper_insert":
        case "paratroopers":
            return "callout_destroyed_paratroopers_plane";
    }
}

_id_6C12( var_0, var_1 )
{
    switch ( var_0 )
    {
        case "firebomb":
            if ( var_1 == "allies" )
                return scripts\engine\utility::getfx( "plane_death" );
            else
                return scripts\engine\utility::getfx( "plane_death" );
        case "s2_airstrike":
            if ( isdefined( var_1 ) && var_1 == "allies" )
                return scripts\engine\utility::getfx( "airstrike_death_allies" );
            else
                return scripts\engine\utility::getfx( "airstrike_death_axis" );
        case "zm_carepackage":
        case "paratrooper_insert":
        case "carepackage":
        case "raid_carepackage":
        case "paratroopers":
            if ( isdefined( var_1 ) && var_1 == "allies" )
                return scripts\engine\utility::getfx( "plane_death" );
            else
                return scripts\engine\utility::getfx( "plane_death" );
        case "emergency_carepackage":
            if ( isdefined( var_1 ) && var_1 == "allies" )
                return scripts\engine\utility::getfx( "plane_death" );
            else
                return scripts\engine\utility::getfx( "plane_death" );
        default:
            return scripts\engine\utility::getfx( "plane_death" );
    }
}

_id_B174( var_0, var_1, var_2 )
{
    switch ( var_0 )
    {
        case "firebomb":
        case "s2_airstrike":
            _id_1859( var_0, var_1, var_2, 1 );
            break;
        case "zm_carepackage":
        case "emergency_carepackage":
        case "paratrooper_insert":
        case "carepackage":
        case "raid_carepackage":
        case "paratroopers":
            _id_1859( var_0, var_1, var_2, 0 );
            break;
    }
}

_id_1859( var_0, var_1, var_2, var_3 )
{
    self endon( "airstrike_complete" );
    var_4 = _id_6A2D( var_0 );
    var_5 = _id_6A2E( var_0 );
    var_6 = 6400;
    var_7 = 12800;

    if ( var_0 == "zm_carepackage" )
    {
        var_6 = 4000;
        var_7 = 8000;
    }

    var_8 = var_6 + var_4 + var_7;
    var_9 = 4 + var_5 + 8;

    if ( var_0 == "zm_carepackage" )
        var_9 = 2 + var_5 + 4;

    thread _id_B179();
    self._id_E771 = "flying_in";

    if ( 1 && isdefined( self._id_9F0C ) )
        self._id_9F0C _id_07E3::_id_D54A( 4000, 1 );

    if ( 1 && isdefined( self._id_9F0D ) )
        self._id_9F0D _id_07E3::_id_D54A( 4000, 1 );

    if ( isdefined( var_3 ) && var_3 )
    {
        var_10 = var_1 + anglestoforward( var_2 ) * var_8;
        self moveto( var_10, var_9 );
    }

    var_11 = 4;

    if ( var_0 == "zm_carepackage" )
        var_11 = 2;

    wait( var_11 );
    self._id_E771 = "strike";
    wait( var_5 );
    self._id_E771 = "flying_out";

    if ( 1 && isdefined( self._id_9F0C ) )
        self._id_9F0C _id_07E3::_id_D54A( 4000, 0 );

    if ( 1 && isdefined( self._id_9F0D ) )
        self._id_9F0D _id_07E3::_id_D54A( 4000, 0 );

    var_12 = 7;

    if ( var_0 == "zm_carepackage" )
        var_12 = 3;

    wait( var_12 );
    var_13 = undefined;

    if ( !isdefined( self.owner ) )
        var_13 = self.team;

    var_14 = _id_6C14( var_0, self.owner, var_13 );

    if ( isdefined( var_14 ) )
    {
        self setmodel( var_14 );
        _id_07E3::_id_D6B3( 1, 0, 1 );
    }

    wait 1;
    self notify( "pathComplete" );
}

_id_B179()
{
    self endon( "airstrike_complete" );
    self endon( "pathComplete" );

    for (;;)
    {
        level waittill( "host_migration_begin" );
        self _meth_8640( 1 );
        level waittill( "host_migration_end" );
        self _meth_8640( 0 );
    }
}

_id_B17D()
{
    self endon( "airstrike_complete" );
    waitframe();
    playfxontag( scripts\engine\utility::getfx( "airstrike_engine" ), self, "tag_engine_right" );
    playfxontag( scripts\engine\utility::getfx( "airstrike_engine" ), self, "tag_engine_left" );
    playfxontag( scripts\engine\utility::getfx( "airstrike_wingtip" ), self, "tag_right_wingtip" );
    playfxontag( scripts\engine\utility::getfx( "airstrike_wingtip" ), self, "tag_left_wingtip" );
}

_id_400D( var_0, var_1 )
{
    var_2 = spawn( "script_model", ( 0, 0, 0 ) );
    var_2 _meth_8374( "airstrike" );
    var_2 _id_07E3::_id_D4D4();
    var_3 = 4 + _id_6A2E( var_1 ) + 8;
    var_2 thread _id_4751( var_3 );
    var_4 = anglestoaxis( ( 35, -45, 0 ) )["forward"];
    var_2 linkto( var_0, "tag_origin", var_4 * -1 * 1000, ( 35, -45, 0 ) );
    var_0.killcament = var_2;
}

_id_4751( var_0 )
{
    self endon( "death" );
    wait( var_0 );
    self delete();
}

_id_687C()
{
    if ( isdefined( level._id_138E ) )
        return level._id_138E;

    var_0 = scripts\engine\utility::_id_69E3( "warbird_anchor", "targetname" );

    if ( !isdefined( var_0 ) )
    {
        var_0 = spawnstruct();
        var_0.origin = ( 0, 0, 0 );
        var_0._id_045A = "warbird_anchor";
    }

    if ( !isdefined( var_0._id_0375 ) )
        var_0._id_0375 = 3500;

    level._id_138E = var_0.origin[2] + 3000;
    return level._id_138E;
}

_id_6C16( var_0 )
{
    var_1 = 0;

    if ( isdefined( level._id_13B9 ) && isdefined( level._id_13B9._id_E2F6 ) )
        var_1 = level._id_13B9._id_E2F6;

    var_2 = 0;

    if ( scripts\cp_mp\utility\game_utility::_id_6B0E() == "mp_gibraltar_02" )
        var_2 = 1000;

    if ( scripts\cp_mp\utility\game_utility::_id_6B0E() == "mp_wolfslair" || scripts\cp_mp\utility\game_utility::_id_6B0E() == "mp_wolfslair_free" || scripts\cp_mp\utility\game_utility::_id_6B0E() == "mp_wolfslair2" )
        var_2 = 1000;

    if ( scripts\cp_mp\utility\game_utility::_id_6B0E() == "mp_sandbox_01" )
        var_2 = -1500;

    if ( scripts\cp_mp\utility\game_utility::_id_6B0E() == "mp_airship" && ( var_0 == "carepackage" || var_0 == "emergency_carepackage" ) )
        var_2 = 1000;

    var_3 = _id_687C();
    return var_3 + var_1 + var_2;
}

_id_686E( var_0, var_1, var_2 )
{
    var_3 = anglestoright( var_1 );
    var_2._id_E70C = var_0;
    var_2._id_E70D = var_0 + var_3 * -1 * 600;
    var_2._id_E70E = var_0 + var_3 * 600;
    var_2._id_E70F = var_0 + var_3 * 1200;
    var_2._id_E710 = var_0 + var_3 * -1200;
}

_id_6C1D( var_0, var_1, var_2, var_3 )
{
    var_4 = 6400;

    if ( var_3 == "zm_carepackage" )
        var_4 = 4000;

    var_5 = _id_6A2D( var_3 );
    var_6 = var_5 / 2 + var_4;
    var_7 = var_0 + anglestoforward( var_1 ) * ( -1 * var_6 );
    var_7 = var_7 * ( 1, 1, 0 );
    var_7 = var_7 + ( 0, 0, var_2 );
    return var_7;
}

_id_6A2D( var_0 )
{
    switch ( var_0 )
    {
        case "air_superiority":
            return 6000;
        case "firebomb":
        case "emergency_carepackage":
        case "paratrooper_insert":
        case "carepackage":
        case "raid_carepackage":
        case "paratroopers":
            return 2500;
        case "zm_carepackage":
            return 1500;
    }
}

_id_6A2E( var_0 )
{
    switch ( var_0 )
    {
        case "firebomb":
        case "emergency_carepackage":
        case "paratrooper_insert":
        case "carepackage":
        case "raid_carepackage":
        case "paratroopers":
            return 1.5625;
        case "s2_airstrike":
            return 3.75;
        case "zm_carepackage":
            return 0.75;
    }
}

_id_5041( var_0, var_1 )
{
    var_2 = var_0;
    var_3 = var_2 + ( 0, 0, -1000000.0 );
    var_4 = _id_07E3::_id_2D15( var_2, var_3, 0, var_1 );

    for ( var_5 = var_4["entity"]; isdefined( var_5 ) && isdefined( var_5.type ); var_5 = var_4["entity"] )
    {
        waitframe();
        var_2 = var_4["position"];
        var_4 = _id_07E3::_id_2D15( var_2, var_3, 0, var_5 );
    }

    return var_4["position"];
}

_id_503E( var_0, var_1 )
{
    var_2 = _id_5040( var_0, var_1 );

    if ( var_2 )
        var_3 = 1;
    else
        var_3 = -1;

    var_4 = scripts\engine\utility::_id_5CBA( var_0.origin );
    var_5 = var_4 + anglestoforward( scripts\engine\utility::_id_5CB9( var_0.angles ) ) * ( var_3 * 100000 );
    var_6 = _func_019F( var_4, var_5, var_1 );
    var_7 = distance( var_4, var_6 );
    return var_7;
}

_id_503F( var_0, var_1, var_2 )
{
    if ( !isdefined( var_2 ) )
        var_2 = 3000;

    var_3 = _id_5040( var_0, var_1 );

    if ( var_3 )
        var_4 = 1;
    else
        var_4 = -1;

    var_5 = scripts\engine\utility::_id_5CBA( var_0.origin );
    var_6 = var_5 + anglestoforward( scripts\engine\utility::_id_5CB9( var_0.angles ) ) * ( var_4 * 100000 );
    var_7 = _func_019F( var_5, var_6, var_1 );
    var_8 = distance( var_5, var_7 );

    if ( var_8 <= var_2 )
        return 1;
    else
        return 0;
}

_id_5040( var_0, var_1 )
{
    var_2 = anglestoforward( scripts\engine\utility::_id_5CB9( var_0.angles ) );
    var_3 = vectornormalize( scripts\engine\utility::_id_5CBA( var_1 ) - var_0.origin );
    var_4 = vectordot( var_2, var_3 );

    if ( var_4 > 0 )
        return 1;
    else
        return 0;
}

_id_1083A( var_0, var_1, var_2 )
{
    var_0 endon( "airstrike_complete" );

    if ( isdefined( var_2 ) )
    {
        var_2 endon( "disconnect" );
        var_2 endon( "joined_team" );
    }

    while ( !_id_503F( var_0, var_0._id_503D, var_1 ) )
        waitframe();
}

_id_F791( var_0, var_1 )
{
    if ( scripts\mp\utility\game::_id_8722() )
        return 0;

    if ( isdefined( level._id_1395 ) || isdefined( level._id_3292 ) )
    {
        scripts\mp\hud_message::_id_DCBD( "KILLSTREAKS/AIR_SPACE_TOO_CROWDED" );
        return 0;
    }

    level._id_1395 = 1;
    thread _id_13BD();
    _id_07E3::_id_978D( var_1, level._id_9A95 );

    switch ( var_1 )
    {
        case "air_superiority":
            thread _id_0A06::_id_13BA( var_0, var_1, self );
            break;
    }

    return 1;
}

_id_F79E( var_0, var_1 )
{
    if ( scripts\mp\utility\game::_id_8722() )
        return 0;

    if ( isdefined( level._id_1395 ) || isdefined( level._id_3292 ) )
    {
        scripts\mp\hud_message::_id_DCBD( "KILLSTREAKS/AIR_SPACE_TOO_CROWDED" );
        return 0;
    }

    var_2 = _id_D068( var_0, var_1 );

    if ( !isdefined( var_2 ) || !var_2 )
        return 0;

    return 1;
}

_id_D068( var_0, var_1 )
{
    self endon( "stop_location_selection" );

    if ( !isdefined( level._id_9AB0 ) )
        level._id_9AB0 = 1024;

    var_2 = level._id_9AB0 / 6.46875;

    if ( level._id_E427 )
        var_2 = var_2 * 1.5;

    var_3 = 1;
    self setclientomnvar( "ui_map_location_num_planes", 1 );
    self setclientomnvar( "ui_map_location_height", _id_6C16( var_1 ) );
    _id_07E3::_id_0B3D( var_1, "map_artillery_selector", var_3, var_2, 0.5 );
    thread _id_107EF();
    var_4 = undefined;
    var_5 = undefined;
    var_6 = 0;

    while ( !var_6 && !scripts\mp\utility\game::_id_8722( 0 ) )
    {
        self waittill( "confirm_location", var_7, var_8 );

        if ( !var_3 )
            var_8 = 0;

        if ( _id_FF46( var_7, var_8, self, var_1 ) )
        {
            var_4 = var_7;
            var_5 = var_8;
            self setclientomnvar( "ui_map_location_use_carepackages", 0 );
            self setclientomnvar( "ui_map_location_num_planes", 0 );
            self setclientomnvar( "ui_map_location_height", 0 );
            break;
        }
        else
            thread _id_DC88();
    }

    self _meth_82ED( 0, 0.3 );
    self notify( "location_selection_complete" );
    _id_07E3::_id_DEEF( "ks_bombing_run_location_selected" );
    self setclientomnvar( "ui_map_location_blocked", 0 );

    if ( scripts\mp\utility\game::_id_8722() )
        return 0;

    if ( isdefined( level._id_1395 ) || isdefined( level._id_3292 ) )
    {
        scripts\mp\hud_message::_id_DCBD( "KILLSTREAKS/AIR_SPACE_TOO_CROWDED" );
        return 0;
    }

    level._id_1395 = 1;
    thread _id_13BD();
    _id_07E3::_id_978D( var_1, var_4 );
    thread _id_E71D( var_0, [ var_4 ], [ var_5 ], var_1 );
    return 1;
}

_id_DC88()
{
    self endon( "location_selection_complete" );
    self endon( "disconnect" );
    self endon( "stop_location_selection" );
    self notify( "airstrikeShowBlockedHUD" );
    self endon( "airstrikeShowBlockedHUD" );
    self setclientomnvar( "ui_map_location_blocked", 1 );
    wait 1.5;
    self setclientomnvar( "ui_map_location_blocked", 0 );
}

_id_107EF()
{
    self endon( "location_selection_complete" );
    self endon( "disconnect" );
    self waittill( "stop_location_selection" );
    self _meth_82ED( 0, 0.3 );
    self setclientomnvar( "ui_map_location_blocked", 0 );

    if ( scripts\mp\hostmigration::_id_10956() > 0 )
        self _meth_83FF( _id_07E3::_id_6ADA() );

    level._id_1395 = undefined;
}

_id_FF46( var_0, var_1, var_2, var_3 )
{
    var_4 = _id_6C16( var_3 );
    var_5 = 1;
    return _id_07E3::_id_2639( var_0, var_4, var_1, var_5 );
}

_id_6B0D()
{
    switch ( scripts\cp_mp\utility\game_utility::_id_6B0E() )
    {
        case "mp_battleship_2":
            return 90;
        case "mp_canon_farm":
            return 90;
        case "mp_carentan_s2_winter":
        case "mp_carentan_s2":
            return 0;
        case "mp_d_day":
            return 90;
        case "mp_flak_tower":
            return 90;
        case "mp_forest_01":
            return 15;
        case "mp_france_village":
            return 90;
        case "mp_gibraltar_02":
            return 25;
        case "mp_london":
            return 90;
        case "mp_paris_s2":
            return 90;
        case "mp_ruins_aachen":
            return 90;
        case "mp_wolfslair2":
        case "mp_wolfslair_free":
        case "mp_wolfslair":
            return 0;
        case "mp_scorstreak_training":
            return 90;
        case "mp_raid_d_day":
            return 0;
        case "mp_prague":
            return 0;
        case "mp_v2_rocket_02":
            return 90;
        case "mp_egypt_02":
            return 0;
        case "mp_dunkirk":
            return 90;
        case "mp_stalingrad":
            return 0;
        case "mp_monte_cassino_v2":
        case "mp_market_garden":
            return 90;
        case "mp_airship":
            return 270;
        case "mp_sandbox_01":
            return 0;
        default:
            return 90;
    }
}

_id_81CE()
{
    level._id_B17F = [];
}

_id_10E4( var_0 )
{
    level._id_B17F[level._id_B17F.size] = var_0;
}

_id_C4F4( var_0 )
{
    level._id_B17F = scripts\engine\utility::array_remove( level._id_B17F, var_0 );
}
