// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    level._id_7916 = 1;
    _id_0C89();
    _id_81C9();
}

_id_0C89()
{
    level _id_000F::_id_98F5( "give_high_five", ::_id_0BEA );
    level _id_000F::_id_98F5( "return_high_fives", ::_id_0C96 );
}

_id_D5C7( var_0, var_1 )
{
    if ( getdvarint( "#x3a94ab57f69760eb2", 0 ) == 1 && getdvarint( "high_fives_enabled" ) == 1 && _func_00BE( "ui_hf_target_player" ) == -1 )
    {
        if ( var_1 > level._id_7916 )
        {
            level._id_7916 = var_1;
            setomnvar( "ui_hf_target_player", var_0 getentitynumber() );
            setomnvar( "ui_hf_trigger_event", level._id_7916 );
        }
    }
}

_id_81C9()
{
    if ( getdvarint( "#x3a94ab57f69760eb2", 0 ) == 0 || getdvarint( "high_fives_enabled" ) == 0 )
        return;

    level._id_B7EA = undefined;
    setomnvar( "ui_hf_target_player", -1 );

    foreach ( var_1 in level.players )
    {
        var_1._id_7557 = 0;
        var_1 setclientomnvar( "ui_hf_offer_hf", 0 );
        var_1 setclientomnvar( "ui_hf_return_hf", 0 );
        var_1 setclientomnvar( "ui_hf_returned_hfs", 0 );
        _func_01E6( "ui_hf_given_hfs", var_1 getentitynumber(), 0 );
    }

    level thread _id_7917();
}

_id_7917()
{
    self endon( "disconnect" );
    var_0 = -1;

    while ( _func_00BE( "ui_hf_target_player" ) == var_0 )
        waitframe();

    foreach ( var_2 in level.players )
        var_2._id_7557 = 0;

    var_0 = _func_00BE( "ui_hf_target_player" );
    level._id_B7EA = _id_6946( var_0 );

    if ( !isdefined( level._id_B7EA ) )
    {
        _id_81C9();
        return;
    }

    foreach ( var_2 in level.players )
    {
        if ( var_2 != level._id_B7EA )
            var_2 thread _id_DCB0();
    }

    level thread _id_6F87();
}

_id_DCB0()
{
    var_0 = self;
    var_0 endon( "disconnect" );
    var_0 setclientomnvar( "ui_hf_offer_hf", 1 );
    var_0 scripts\engine\utility::waittill_any_2( "high_five_given", "give_high_five_timer_elapsed" );
    var_0 setclientomnvar( "ui_hf_offer_hf", 0 );
}

_id_6F87()
{
    level endon( "disconnect" );
    wait 3.5;
    var_0 = 0;

    foreach ( var_2 in level.players )
    {
        if ( var_2 != level._id_B7EA )
        {
            if ( getdvarint( "high_five_debug_mode" ) == 1 )
            {
                var_2._id_7557 = 1;
                _func_01E6( "ui_hf_given_hfs", var_2 getentitynumber(), 1 );
            }

            if ( var_2._id_7557 )
                var_0++;

            var_2 notify( "give_high_five_timer_elapsed" );
        }
    }

    if ( var_0 > 0 )
        level._id_B7EA thread _id_DCDC();
    else
        _id_81C9();
}

_id_DCDC()
{
    self endon( "disconnect" );
    var_0 = self;
    var_0 setclientomnvar( "ui_hf_return_hf", 1 );
    var_0 thread _id_C789();
    var_0 scripts\engine\utility::waittill_any_2( "high_fives_returned", "return_high_five_timer_elapsed" );
    var_0 setclientomnvar( "ui_hf_return_hf", 0 );
}

_id_C789()
{
    var_0 = self;
    var_0 endon( "high_fives_returned" );
    level endon( "disconnect" );
    wait 3.5;

    if ( getdvarint( "high_five_debug_mode" ) == 1 )
    {
        level thread _id_DCB1();
        var_0 notify( "high_fives_returned" );
        return;
    }

    var_0 notify( "return_high_five_timer_elapsed" );
    _id_81C9();
}

_id_DCB1()
{
    foreach ( var_1 in level.players )
    {
        if ( var_1._id_7557 )
            var_1 setclientomnvar( "ui_hf_returned_hfs", 1 );
    }

    wait 3.5;

    foreach ( var_1 in level.players )
    {
        if ( var_1._id_7557 )
            var_1 setclientomnvar( "ui_hf_returned_hfs", 0 );
    }

    _id_81C9();
}

_id_0BEA( var_0 )
{
    var_1 = self;
    var_1 endon( "disconnect" );
    var_1._id_7557 = 1;
    var_1 notify( "high_five_given" );
    _func_01E6( "ui_hf_given_hfs", var_1 getentitynumber(), 1 );
}

_id_0C96( var_0 )
{
    var_1 = self;
    var_1 endon( "disconnect" );
    var_1 notify( "high_fives_returned" );
    level thread _id_DCB1();
}

_id_6946( var_0 )
{
    var_1 = undefined;

    foreach ( var_3 in level.players )
    {
        if ( var_3 getentitynumber() == var_0 )
        {
            var_1 = var_3;
            break;
        }
    }

    return var_1;
}
