// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

main()
{
    if ( !isdefined( level._id_03E1 ) )
        _id_0888::main();

    _id_8090();
    thread _id_E437();
    thread _id_10411();
}

_id_8090()
{
    self._id_03E1 = spawnstruct();
    self._id_03E1._id_E436 = [];
    self._id_03E1._id_6016 = [];
    scripts\engine\utility::_id_5453( "stealth_enabled" );
    scripts\engine\utility::_id_5453( "stealth_override_goal" );
    scripts\engine\utility::_id_5454( "stealth_enabled" );
    scripts\engine\utility::_id_5453( "stealth_in_shadow" );
    _id_088C::_id_71EF( "stealth_spotted" );
    _id_088C::_id_71DA();
    self._id_03E1._id_2C30 = 0;
}

_id_E437()
{
    self endon( "death" );
    self notify( "spotted_thread" );
    self endon( "spotted_thread" );

    for (;;)
    {
        scripts\engine\utility::_id_5456( "stealth_enabled" );
        _id_088C::_id_71F3( "stealth_spotted" );

        if ( !scripts\engine\utility::_id_544E( "stealth_enabled" ) )
            scripts\engine\utility::_id_5456( "stealth_enabled" );

        thread _id_E747();
        scripts\engine\utility::_id_5456( "stealth_enabled" );
        _id_088C::_id_71F1( "stealth_spotted" );

        if ( !scripts\engine\utility::_id_544E( "stealth_enabled" ) )
            scripts\engine\utility::_id_5456( "stealth_enabled" );

        thread _id_E74B();
    }
}

_id_E747()
{
    thread _id_088C::_id_D485( 0 );
    self._id_03E1._id_AA1A = self._id_01ED;
    self._id_01ED = 0;
    self._id_01BC = 0;
    self._id_016C = 1;
    self._id_016A = 1;

    if ( isdefined( self._id_03E1._id_6016["hidden"] ) )
        _id_087F::_id_E79A( "hidden" );
}

_id_E74B()
{
    thread _id_088C::_id_D485( 1 );

    if ( isdefined( self._id_03E1._id_AA1A ) )
        self._id_01ED = self._id_03E1._id_AA1A;
    else
        self._id_01ED = 3;

    self._id_016C = 0;
    self._id_016A = 0;
    self _meth_8284( 0 );

    if ( isdefined( self._id_03E1._id_6016["spotted"] ) )
        _id_087F::_id_E79A( "spotted" );
}

_id_6E09()
{
    self endon( "death" );
}

_id_10411()
{
    self endon( "death" );
    self endon( "long_death" );

    for (;;)
    {
        scripts\engine\utility::_id_5456( "stealth_enabled" );

        if ( !isdefined( self._id_03E1._id_7CF8 ) )
            self._id_0283 = _id_642A();

        wait 0.05;
    }
}

_id_642A()
{
    var_0 = self._id_0120;

    if ( var_0 == "back" )
        var_0 = "prone";

    if ( _id_088C::_id_71FF() )
        var_1 = "spotted";
    else
        var_1 = "hidden";

    var_2 = level._id_03E1._id_4871._id_C00D[var_1][var_0];

    if ( scripts\engine\utility::_id_544E( "stealth_in_shadow" ) )
        var_2 = max( level._id_03E1._id_4871._id_C00D["hidden"]["prone"], var_2 * 0.5 );

    return var_2;
}
