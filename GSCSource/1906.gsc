// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_021D()
{
    level._id_0F3A = [];

    if ( _id_099D::_id_8A10( "game", "registerOnPlayerSpawnCallback" ) )
        [[ _id_099D::_id_6D05( "game", "registerOnPlayerSpawnCallback" ) ]]( ::_id_EED5 );
}

_id_EEDC( var_0, var_1, var_2, var_3, var_4, var_5, var_6 )
{
    if ( level._id_0F3A.size >= 50 )
        return;

    if ( _id_EED6( var_3 ) >= 2 )
        return;

    var_7 = _func_0361( var_0 );

    if ( _id_EEE4( var_7 ) )
        return;

    _id_1119( var_7, var_1, var_2, var_3, var_4, var_5, var_6 );
    return var_7;
}

_id_EEDB( var_0 )
{
    if ( !_id_EEE4( var_0 ) )
        return;

    _id_C521( var_0 );
    _func_0362( var_0 );
}

_id_1119( var_0, var_1, var_2, var_3, var_4, var_5, var_6 )
{
    var_7 = _func_020F();
    var_7._id_9B3B = var_0;
    var_7._id_9B3E = var_3;
    var_7._id_5F98 = var_4;
    var_7._id_DCC9 = [];
    var_7._id_DCCA = [];
    var_7._id_9B23 = [];
    var_7._id_9B24 = [];
    level._id_0F3A[level._id_0F3A.size] = var_7;
    level thread _id_EED7( var_7, var_0 );

    if ( isdefined( var_1 ) )
    {
        if ( isalive( var_1 ) )
        {
            foreach ( var_9 in var_1 )
            {
                if ( _func_0117( var_9 ) )
                {
                    var_7._id_DCC9[var_7._id_DCC9.size] = var_9;
                    _func_0367( var_0, var_9 );
                    continue;
                }

                if ( _id_8A78( var_9 ) )
                {
                    var_7._id_DCCA[var_7._id_DCCA.size] = var_9;
                    _func_0368( var_0, var_9 );
                }
            }
        }
        else if ( _func_0117( var_1 ) )
        {
            var_7._id_DCC9[var_7._id_DCC9.size] = var_1;
            _func_0367( var_0, var_1 );
        }
        else if ( _id_8A78( var_1 ) )
        {
            var_7._id_DCCA[var_7._id_DCCA.size] = var_1;
            _func_0368( var_0, var_1 );
        }
    }

    if ( isdefined( var_2 ) )
    {
        if ( isalive( var_2 ) )
        {
            foreach ( var_12 in var_2 )
                _id_EED9( var_12, var_0, var_6 );
        }
        else
            _id_EED9( var_2, var_0, var_6 );
    }

    if ( istrue( var_5 ) )
        level thread _id_EEE3( var_0, var_6 );

    if ( istrue( var_6 ) )
    {
        level thread _id_EEE0( var_0 );
        level thread _id_EEE1( var_0 );
    }
}

_id_C521( var_0 )
{
    var_1 = undefined;
    var_2 = [];

    foreach ( var_4 in level._id_0F3A )
    {
        if ( var_4._id_9B3B == var_0 )
        {
            var_1 = var_4;
            continue;
        }

        var_2[var_2.size] = var_4;
    }

    if ( isdefined( var_1 ) )
        var_1 = undefined;

    level._id_0F3A = var_2;
    level notify( "removed_targetMarkerGroup_" + var_0 );
}

_id_EEE4( var_0 )
{
    var_1 = 0;

    foreach ( var_3 in level._id_0F3A )
    {
        if ( var_3._id_9B3B == var_0 )
        {
            var_1 = 1;
            break;
        }
    }

    return var_1;
}

_id_6DA1( var_0 )
{
    var_1 = undefined;

    foreach ( var_3 in level._id_0F3A )
    {
        if ( var_3._id_9B3B == var_0 )
        {
            var_1 = var_3;
            break;
        }
    }

    return var_1;
}

_id_EEE3( var_0, var_1 )
{
    level endon( "game_ended " );
    level endon( "removed_targetMarkerGroup_" + var_0 );

    for (;;)
    {
        level waittill( "player_spawned", var_2 );

        if ( _id_3124( var_0, var_2 ) )
            _id_EED9( var_2, var_0, var_1 );
    }
}

_id_EEE1( var_0 )
{
    level endon( "game_ended " );
    level endon( "removed_targetMarkerGroup_" + var_0 );

    for (;;)
    {
        level waittill( "unset_noscopeoutline", var_1 );

        if ( _id_3124( var_0, var_1 ) )
            _id_EED9( var_1, var_0 );
    }
}

_id_EEE0( var_0 )
{
    level endon( "game_ended " );
    level endon( "removed_targetMarkerGroup_" + var_0 );

    for (;;)
    {
        level waittill( "set_noscopeoutline", var_1 );

        if ( _id_3124( var_0, var_1 ) )
        {
            var_2 = var_1 getentitynumber();
            _id_EEDF( var_1, var_2, var_0 );
        }
    }
}

_id_EED9( var_0, var_1, var_2 )
{
    var_3 = _id_6DA1( var_1 );
    var_4 = var_0 getentitynumber();

    if ( var_3._id_9B23.size >= 20 )
    {
        var_0 _id_EED4( var_3, var_1 );
        return;
    }

    if ( isdefined( var_0 ) && _func_0117( var_0 ) )
    {
        if ( istrue( var_2 ) )
        {
            var_5 = var_3._id_9B3E;
            var_6 = isdefined( var_3._id_5F98 );
            var_7 = istrue( var_3._id_5F98 );

            if ( var_6 )
            {
                if ( !var_7 )
                {
                    if ( _id_099D::_id_8A10( "perk", "hasPerk" ) )
                    {
                        if ( var_0 [[ _id_099D::_id_6D05( "perk", "hasPerk" ) ]]( "specialty_noscopeoutline" ) )
                            return;
                    }
                }
            }
            else if ( _id_099D::_id_8A10( "perk", "hasPerk" ) )
            {
                if ( var_0 [[ _id_099D::_id_6D05( "perk", "hasPerk" ) ]]( "specialty_noscopeoutline" ) )
                    return;
            }
        }
    }

    if ( !isdefined( var_3._id_9B23[var_4] ) )
    {
        var_3._id_9B23[var_4] = 1;
        _func_0363( var_1, var_0 );

        if ( _func_0117( var_0 ) )
        {
            var_0 thread _id_EEDD( "death", var_3 );
            var_0 thread _id_EEDD( "disconnect", var_3 );
            var_0 thread _id_EEDD( "joined_team", var_3 );
        }
        else
            var_0 thread _id_EEDD( "death", var_3 );
    }
}

_id_EEDD( var_0, var_1 )
{
    var_2 = self getentitynumber();
    var_1 endon( "ent_removed_" + var_2 );
    level endon( "removed_targetMarkerGroup_" + var_1._id_9B3B );
    self waittill( var_0 );
    _id_EEDF( self, var_2, var_1._id_9B3B );
}

_id_EED4( var_0, var_1 )
{
    if ( !_id_EEE4( var_1 ) )
        return;

    var_0._id_9B24[var_0._id_9B24.size] = self;
    thread _id_EED8( var_0, var_1 );
}

_id_EED8( var_0, var_1 )
{
    level endon( "game_ended" );
    level endon( "removed_targetMarkerGroup_" + var_1 );
    self waittill( "disconnect" );
    _id_EEDE( var_0, var_1 );
}

_id_EEDE( var_0, var_1 )
{
    if ( !_id_EEE4( var_1 ) )
        return;

    var_2 = [];

    foreach ( var_4 in var_0._id_9B24 )
    {
        if ( var_4 == self )
            continue;

        var_2[var_2.size] = var_4;
    }

    var_0._id_9B24 = var_2;
}

_id_EED7( var_0, var_1 )
{
    level endon( "game_ended" );
    level endon( "removed_targetMarkerGroup_" + var_1 );

    while ( _id_EEE4( var_1 ) )
    {
        level waittill( "ent_removed_from_marker_group", var_2 );

        if ( var_2 != var_0 )
            continue;

        if ( var_0._id_9B24.size == 0 )
            continue;

        var_3 = undefined;

        if ( !isdefined( var_0._id_9B24[0] ) )
            continue;
        else
            var_3 = var_0._id_9B24[0];

        var_4 = var_3 getentitynumber();

        if ( !isdefined( var_0._id_9B23[var_4] ) )
        {
            var_0._id_9B23[var_4] = 1;
            var_3 _id_EEDE( var_0, var_1 );
            _id_EED9( var_3, var_1 );
        }
    }
}

_id_EEDF( var_0, var_1, var_2 )
{
    var_3 = _id_6DA1( var_2 );

    if ( isdefined( var_3 ) && isdefined( var_3._id_9B23[var_1] ) )
    {
        var_3._id_9B23[var_1] = undefined;

        if ( isdefined( var_0 ) )
            _func_0364( var_2, var_0 );

        var_3 notify( "ent_removed_" + var_1 );
        level notify( "ent_removed_from_marker_group", var_3 );
    }
}

_id_EED6( var_0 )
{
    var_1 = 0;

    foreach ( var_3 in level._id_0F3A )
    {
        if ( var_3._id_9B3E == var_0 )
            var_1++;
    }

    return var_1;
}

_id_EED5()
{
    self _meth_82F6( "ui_clear_target_markers", gettime() );
}

_id_8A78( var_0 )
{
    if ( var_0 == "spectator" )
        return 1;

    foreach ( var_2 in level._id_EF86 )
    {
        if ( var_0 == var_2 )
            return 1;
    }

    return 0;
}

_id_3124( var_0, var_1 )
{
    var_2 = 0;
    var_3 = _id_6DA1( var_0 );
    var_4 = var_3._id_9B3E;
    var_5 = istrue( level._id_EF62 ) && isdefined( var_3._id_5F98 );
    var_6 = istrue( var_3._id_5F98 );

    if ( !isdefined( var_4 ) )
        return var_2;

    if ( var_5 )
    {
        if ( var_6 )
        {
            if ( var_1._id_045B == var_4._id_045B )
                var_2 = 1;
        }
        else if ( var_1._id_045B != var_4._id_045B )
            var_2 = 1;
    }
    else if ( var_6 )
    {
        if ( _func_0117( var_1 ) && var_1 == var_4 )
            var_2 = 1;
    }
    else
        var_2 = 1;

    return var_2;
}
