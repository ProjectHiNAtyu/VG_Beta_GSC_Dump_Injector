// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_86D9( var_0 )
{
    if ( !isdefined( var_0 ) )
        var_0 = self;

    if ( isdefined( var_0._id_00E1 ) )
        return var_0._id_00E1 == "misc_turret";
    else
        return 0;
}

_id_86F7( var_0 )
{
    if ( !isdefined( var_0 ) )
        var_0 = self;

    if ( isdefined( var_0._id_00E1 ) )
        return var_0._id_00E1 == "script_vehicle" && !_func_036F( var_0 _meth_8185() );
    else
        return 0;
}

_id_2D84( var_0, var_1, var_2 )
{
    var_3 = undefined;

    if ( isdefined( var_0._id_CCC5 ) || isdefined( var_0._id_CCC3 ) )
    {
        [var_5, var_6] = _id_2D81( var_0 );
        var_7 = var_5 + _func_01B6( var_6 );

        if ( var_2 > 0 )
            var_3 = var_7 / var_2;
        else
            var_3 = var_7 / 0.05;
    }
    else
        var_3 = var_1._id_0B3E._id_03A3;

    return int( var_3 );
}

_id_2D79( var_0 )
{
    if ( var_0 == "delay" )
        return 0.2;
    else if ( var_0 == "delay_range" )
        return 0.5;
    else if ( var_0 == "burst" )
        return 0.5;
    else if ( var_0 == "burst_range" )
        return 1.5;
    else if ( var_0 == "burst_fire_rate" )
        return 0.05;
    else
    {

    }
}

_id_2D83( var_0 )
{
    var_1 = undefined;

    if ( isdefined( var_0 ) && isdefined( var_0._id_CCC1 ) )
        var_1 = var_0._id_CCC1;
    else
        var_1 = _id_2D79( "burst_fire_rate" );

    return var_1;
}

_id_2D81( var_0 )
{
    if ( isdefined( var_0 ) && isdefined( var_0._id_CCC5 ) )
        var_1 = var_0._id_CCC5;
    else
        var_1 = _id_2D79( "burst" );

    if ( isdefined( var_0 ) && isdefined( var_0._id_CCC3 ) )
        var_2 = var_0._id_CCC3 - var_1;
    else
        var_2 = _id_2D79( "burst_range" );

    return [ var_1, var_2 ];
}

_id_2D82( var_0 )
{
    if ( isdefined( var_0 ) && isdefined( var_0._id_CCC5 ) )
        var_1 = var_0._id_CCC5;
    else
        var_1 = _id_2D79( "burst" );

    if ( isdefined( var_0 ) && isdefined( var_0._id_CCC3 ) )
        var_2 = var_0._id_CCC3;
    else
    {
        var_3 = _id_2D79( "burst_range" );
        var_2 = var_1 + var_3;
    }

    return [ var_1, var_2 ];
}

_id_2D7F( var_0 )
{
    var_1 = undefined;

    if ( _func_0104( self ) )
        var_1 = self;

    if ( isdefined( var_0 ) && isdefined( var_0._id_CCF0 ) )
        var_2 = var_0._id_CCF0;
    else if ( isdefined( var_1 ) && isdefined( var_1._id_10D1D ) && isdefined( var_1._id_10D1D["turret"] ) )
        var_2 = var_1._id_10D1D["turret"]._id_9E98;
    else
        var_2 = _id_2D79( "delay" );

    if ( isdefined( var_0 ) && isdefined( var_0._id_CCEE ) )
        var_3 = var_0._id_CCEE - var_2;
    else if ( isdefined( var_1 ) && isdefined( var_1._id_10D1D ) && isdefined( var_1._id_10D1D["turret"] ) )
        var_3 = var_1._id_10D1D["turret"]._id_9C42 - var_2;
    else
        var_3 = _id_2D79( "delay_range" );

    return [ var_2, var_3 ];
}

_id_2D80( var_0 )
{
    var_1 = undefined;

    if ( _func_0104( self ) )
        var_1 = self;

    if ( isdefined( var_0 ) && isdefined( var_0._id_CCF0 ) )
        var_2 = var_0._id_CCF0;
    else if ( isdefined( var_1 ) && isdefined( var_1._id_10D1D ) && isdefined( var_1._id_10D1D["turret"] ) )
        var_2 = var_1._id_10D1D["turret"]._id_9E98;
    else
        var_2 = _id_2D79( "delay" );

    if ( isdefined( var_0 ) && isdefined( var_0._id_CCEE ) )
        var_3 = var_0._id_CCEE;
    else if ( isdefined( var_1 ) && isdefined( var_1._id_10D1D ) && isdefined( var_1._id_10D1D["turret"] ) )
        var_3 = var_1._id_10D1D["turret"]._id_9C42;
    else
    {
        var_4 = _id_2D79( "delay_range" );
        var_3 = var_2 + var_4;
    }

    return [ var_2, var_3 ];
}

_id_2D75( var_0, var_1 )
{
    var_2 = undefined;
    self endon( "death" );
    self endon( "turretstatechange" );
    self notify( "kill_burst_fire_do_shoot_nonstop" );
    self endon( "kill_burst_fire_do_shoot_nonstop" );

    if ( istrue( var_1 ) )
        self endon( "turretmodeset" );

    if ( isdefined( var_0 ) )
        var_2 = var_0;
    else
        var_2 = _id_2D83( self );

    for (;;)
    {
        if ( isdefined( self._id_DA0D ) )
            self _meth_83C0( self._id_DA0D );
        else
            self _meth_83C0();

        wait( var_2 );
    }
}

set_turret_shoot_params()
{
    var_0 = "turret";

    if ( isdefined( self._id_10D1D ) && isdefined( self._id_10D1D[var_0] ) )
    {
        var_1 = 100;
        var_2 = self._id_10D1D[var_0].minpercentcliptofire;
        var_3 = self._id_10D1D[var_0].maxpercentcliptofire;

        if ( var_2 > var_3 )
        {

        }

        var_4 = _func_01B7( var_2, var_3 );
        self._id_0B3E._id_03A9 = int( var_1 * var_4 );
    }
}

_id_F876()
{
    self notify( "kill_turret_vm_playeranims_think" );
    self endon( "kill_turret_vm_playeranims_think" );
    var_0 = self _meth_8185();

    if ( !var_0.trigger || var_0._id_005A == "none" )
        return;

    for (;;)
    {
        var_1 = _id_077B::_id_10893( "turretownerchange", "death" );

        if ( var_1 == "death" )
            return;

        var_2 = self _meth_8183();
        var_3 = undefined;
        var_0 = undefined;

        if ( isdefined( var_2 ) && _func_0117( var_2 ) && !_func_0107( var_2 ) )
        {
            var_2 giveweapon( self._id_04D5 );
            var_3 = var_2 getcurrentweapon();
            var_0 = self _meth_8185();
            var_2 switchtoweapon( var_0 );
        }

        var_1 = _id_077B::_id_10893( "turretownerchange", "death" );

        if ( isdefined( var_2 ) && _func_0117( var_2 ) && !_func_0107( var_2 ) )
        {
            var_2 switchtoweapon( var_3 );
            var_2 takeallweapons( var_0 );
        }

        if ( var_1 == "death" )
            return;
    }
}

_id_FEF7()
{
    var_0 = self _meth_8182();

    if ( !isdefined( var_0 ) )
        return 0;

    var_1 = var_0 _meth_8183();

    if ( !isdefined( var_1 ) )
        return 0;

    return var_1 == self;
}

_id_F865()
{
    var_0 = "turret";

    if ( _id_06BB::_id_8703( var_0 ) )
    {
        if ( !isdefined( self._id_10D1D[var_0] ) )
        {
            self._id_10D1D[var_0] = _func_020F();
            self._id_10D1D[var_0]._id_9E98 = _id_06BB::_id_6838( var_0, 2 );
            self._id_10D1D[var_0]._id_9C42 = _id_06BB::_id_6838( var_0, 3 );
            self._id_10D1D[var_0].minpercentcliptofire = _id_06BB::_id_6838( var_0, 10 );
            self._id_10D1D[var_0].maxpercentcliptofire = _id_06BB::_id_6838( var_0, 11 );
        }
    }
}

#using_animtree("turret");

play_paired_turret_anim_if_needed( var_0, var_1, var_2 )
{
    if ( !isdefined( var_1 ) || var_1 != "PlayPairedTurretAnim" )
        return;

    if ( !isdefined( var_2 ) )
    {
        var_2 = self _meth_8182();

        if ( !isdefined( var_2 ) )
            var_2 = _id_0694::_id_23A0();
    }

    if ( !isdefined( var_2 ) )
        return;

    self notify( "kill_play_paired_turret_anim" );
    self endon( "kill_play_paired_turret_anim" );
    var_3 = get_paired_turret_anim( var_0 );

    if ( isdefined( var_3 ) )
    {
        var_2 _meth_8845( 1 );
        var_2 _meth_841D( #animtree );
        var_4 = _func_0079( var_3 );
        var_2 _meth_82E4( var_3, 1.0, 0.05 );
        wait( var_4 );
        var_2 _meth_83F8();
        var_2 _meth_8845( 0 );
    }
}

get_paired_turret_anim( var_0 )
{
    if ( !isdefined( var_0 ) )
        return;

    var_1 = _func_00C1( var_0 );

    if ( isdefined( level.turret_paired_anims ) && isdefined( level.turret_paired_anims[var_1] ) )
        return level.turret_paired_anims[var_1];
}
