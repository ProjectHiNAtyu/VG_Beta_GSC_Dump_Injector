// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_3D59()
{
    self._id_03E1._id_3D53 = spawnstruct();
}

_id_3D5A()
{
    if ( isdefined( level._id_03E1 ) && isdefined( level._id_03E1._id_3D53 ) )
        return;

    level._id_03E1._id_3D53 = spawnstruct();
    level._id_03E1._id_3D53._id_C5E6 = 30;
    level _id_088C::_id_D3B7( "saw_corpse", ::_id_3D5D );
    level _id_088C::_id_D3B7( "found_corpse", ::_id_3D58 );
    _id_D18E();
}

_id_D18E()
{
    var_0["sight_dist"] = 600;
    var_0["detect_dist"] = 300;
    var_0["found_dist"] = 100;
    _id_D18D( var_0 );
}

_id_D18D( var_0 )
{
    if ( !isdefined( var_0["shadow_dist"] ) )
        var_0["shadow_dist"] = var_0["found_dist"];

    level._id_03E1._id_3D53._id_D95E = _func_0214( var_0["shadow_dist"] );
    level._id_03E1._id_3D53._id_DD2F = _func_0214( var_0["sight_dist"] );
    level._id_03E1._id_3D53._id_4873 = _func_0214( var_0["detect_dist"] );
    level._id_03E1._id_3D53._id_5EF1 = _func_0214( var_0["found_dist"] );
}

_id_D18C()
{
    level._id_03E1._id_7CE9[self getentitynumber()] = self.origin;
}

_id_D18B()
{
    level._id_03E1._id_10A4[self getentitynumber()] = self;
}

_id_3D55( var_0 )
{
    if ( !isdefined( self._id_7D5E ) || distancesquared( self._id_7D5E, var_0 ) > 1.0 )
    {
        self._id_7D5D = undefined;

        if ( isdefined( level._id_F5FC ) )
        {
            foreach ( var_2 in level._id_F5FC )
            {
                if ( isdefined( var_2 ) && _func_0119( var_0, var_2 ) )
                {
                    self._id_7D5D = 1;
                    break;
                }
            }
        }

        self._id_7D5E = var_0;
    }

    return istrue( self._id_7D5D );
}

_id_3D5F()
{
    if ( isdefined( self._id_03E1._id_3D5C ) && gettime() < self._id_03E1._id_3D5C )
        return;

    if ( scripts\engine\utility::_id_544E( "stealth_hold_position" ) )
        return;

    if ( self._id_020F )
        return;

    if ( istrue( self._id_03E1._id_3D53._id_850E ) )
        return;

    if ( isdefined( self._id_03E1._id_3D53._id_5449 ) )
        self._id_03E1._id_3D5C = gettime() + 100;
    else
        self._id_03E1._id_3D5C = gettime() + 1000;

    var_0 = [];

    if ( isdefined( level._id_5D67 ) )
        var_0 = [[ level._id_5D67 ]]();

    var_1 = undefined;
    var_2 = undefined;

    foreach ( var_4 in var_0 )
    {
        var_5 = var_4 getentitynumber();

        if ( isdefined( level._id_03E1._id_7CE9 ) && isdefined( level._id_03E1._id_7CE9[var_5] ) && distancesquared( level._id_03E1._id_7CE9[var_5], var_4.origin ) < _func_0214( 100 ) )
        {
            level._id_03E1._id_7CE9[var_5] = undefined;
            var_4._id_5EF0 = 1;
        }

        if ( isdefined( var_4._id_5EF0 ) )
            continue;

        var_6 = var_4 _id_088C::_id_6968();
        var_7 = distancesquared( self.origin, var_6 );
        var_8 = level._id_03E1._id_3D53._id_5EF1;
        var_9 = level._id_03E1._id_3D53._id_DD2F;
        var_10 = level._id_03E1._id_3D53._id_4873;

        if ( isdefined( self._id_03E1._id_AD24 ) )
            var_8 = self._id_03E1._id_AD24 * self._id_03E1._id_AD24;

        if ( isdefined( self._id_03E1._id_AD25 ) )
            var_9 = self._id_03E1._id_AD25 * self._id_03E1._id_AD25;

        if ( isdefined( self._id_03E1._id_AD23 ) )
            var_10 = self._id_03E1._id_AD23 * self._id_03E1._id_AD23;

        if ( var_4 _id_3D55( var_6 ) )
        {
            var_9 = level._id_03E1._id_3D53._id_D95E;
            var_10 = level._id_03E1._id_3D53._id_D95E;
        }

        if ( var_7 < var_8 )
        {
            if ( abs( self.origin[2] - var_6[2] ) < 60 )
            {
                var_1 = var_4;
                break;
            }
        }

        if ( isdefined( self._id_03E1._id_3D53._id_5449 ) )
        {
            if ( self._id_03E1._id_3D53._id_5449 == var_4 )
                continue;

            var_11 = self._id_03E1._id_3D53._id_5449 _id_088C::_id_6968();
            var_12 = distancesquared( self.origin, var_11 );

            if ( var_12 <= var_7 )
                continue;
        }

        if ( var_7 > var_9 )
            continue;

        if ( var_6[2] - self.origin[2] > 128 )
            continue;

        if ( var_7 < var_10 )
        {
            if ( !isdefined( var_4._id_D019 ) && self _meth_8066( var_4 ) )
            {
                var_2 = var_4;
                break;
            }
        }

        var_13 = anglestoforward( self gettagangles( "tag_eye" ) );
        var_14 = vectornormalize( var_6 + ( 0, 0, 30 ) - self geteye() );

        if ( vectordot( var_13, var_14 ) > 0.55 )
        {
            if ( !isdefined( var_4._id_D019 ) && self _meth_8066( var_4 ) )
            {
                var_2 = var_4;
                break;
            }
        }
    }

    if ( isdefined( var_1 ) )
    {
        var_1._id_5EF0 = 1;

        if ( istrue( var_1._id_D019 ) && isdefined( self._id_03E1._id_3D53._id_5449 ) && self._id_03E1._id_3D53._id_5449 == var_1 )
            self._id_03E1._id_AF1B = gettime();

        self _meth_8522( "found_corpse", var_1, var_1 _id_088C::_id_6968() );
    }
    else if ( isdefined( var_2 ) )
    {
        thread _id_3D5E( var_2 );
        self _meth_8522( "saw_corpse", var_2, var_2 _id_088C::_id_6968() );
    }
}

_id_3D58( var_0 )
{
    self notify( "corpse_found" );
    self endon( "corpse_found" );
    self endon( "death" );
    var_1 = var_0._id_0186;
    var_2 = var_1 _id_088C::_id_6968();

    if ( isdefined( self._id_03E1._id_3D53._id_5449 ) )
        self._id_03E1._id_3D53._id_5449._id_D019 = undefined;

    self._id_03E1._id_3D53._id_5449 = var_1;
    self._id_03E1._id_24B6 = 1;

    if ( isdefined( level._id_5D9B ) )
        var_1 [[ level._id_5D9B ]]( level._id_03E1._id_3D53._id_C5E6 );
}

_id_3D5D( var_0 )
{
    var_1 = var_0._id_0186;
    var_2 = var_1 _id_088C::_id_6968();
    self._id_03E1._id_3D53.origin = var_2;
    self._id_03E1._id_24B6 = 1;
    thread _id_3D5E( var_1 );
}

_id_3D5E( var_0 )
{
    self notify( "corpse_seen_claim" );
    self endon( "corpse_seen_claim" );

    if ( isdefined( self._id_03E1._id_3D53._id_5449 ) )
        self._id_03E1._id_3D53._id_5449._id_D019 = undefined;

    var_0._id_D019 = 1;
    self._id_03E1._id_3D53._id_5449 = var_0;
    self waittill( "death" );

    if ( isdefined( var_0 ) )
        var_0._id_D019 = undefined;

    if ( isdefined( self ) )
        thread _id_3D57();
}

_id_3D57()
{
    if ( isdefined( self._id_03E1 ) && isdefined( self._id_03E1._id_3D53 ) )
    {
        if ( isdefined( self._id_03E1._id_3D53._id_5449 ) )
            self._id_03E1._id_3D53._id_5449._id_D019 = undefined;

        self._id_03E1._id_3D53._id_5449 = undefined;
        self._id_03E1._id_3D53._id_850E = undefined;
    }
}

_id_EBE9()
{
    if ( !isdefined( self._id_03E1._id_EBE7 ) )
        self._id_03E1._id_EBE7 = spawnstruct();

    if ( isdefined( self._id_03E1._id_EBE7._id_A4CF ) && gettime() < self._id_03E1._id_EBE7._id_A4CF )
        return;

    if ( scripts\engine\utility::_id_544E( "stealth_hold_position" ) )
        return;

    if ( self._id_020F )
        return;

    if ( istrue( self._id_03E1._id_EBE7._id_850E ) )
        return;

    if ( isdefined( self._id_03E1._id_EBE7._id_5449 ) )
        self._id_03E1._id_EBE7._id_A4CF = gettime() + 100;
    else
        self._id_03E1._id_EBE7._id_A4CF = gettime() + 1000;

    var_0 = level._id_03E1._id_EBE7._id_4E2C;
    var_1 = undefined;
    var_2 = undefined;
    var_3 = undefined;

    foreach ( var_3 in var_0 )
    {
        var_5 = var_3 getentitynumber();

        if ( isdefined( var_3._id_5EF0 ) )
            continue;

        var_6 = var_3.origin;
        var_7 = distancesquared( self.origin, var_6 );
        var_8 = level._id_03E1._id_EBE7._id_5EF1;
        var_9 = level._id_03E1._id_EBE7._id_DD2F;
        var_10 = level._id_03E1._id_EBE7._id_4873;

        if ( var_7 < var_8 )
        {
            if ( abs( self.origin[2] - var_6[2] ) < 60 )
            {
                var_1 = var_3;
                break;
            }
        }

        if ( isdefined( self._id_03E1._id_EBE7._id_5449 ) )
        {
            if ( self._id_03E1._id_EBE7._id_5449 == var_3 )
                continue;

            var_11 = self._id_03E1._id_EBE7._id_5449.origin;
            var_12 = distancesquared( self.origin, var_11 );

            if ( var_12 <= var_7 )
                continue;
        }

        if ( var_7 > var_9 )
            continue;

        if ( var_6[2] - self.origin[2] > 128 )
            continue;

        if ( var_7 < var_10 )
        {
            if ( !isdefined( var_3._id_D019 ) && self _meth_8066( var_3 ) && scripts\engine\utility::_id_30D8( var_3.origin, self, level._id_03E1._id_31D4 ) )
            {
                var_2 = var_3;
                break;
            }
        }

        var_13 = anglestoforward( self gettagangles( "tag_eye" ) );
        var_14 = vectornormalize( var_6 + ( 0, 0, 30 ) - self geteye() );

        if ( vectordot( var_13, var_14 ) > 0.55 )
        {
            if ( !isdefined( var_3._id_D019 ) && self _meth_8066( var_3 ) && scripts\engine\utility::_id_30D8( var_3.origin, self, level._id_03E1._id_31D4 ) )
            {
                var_2 = var_3;
                break;
            }
        }
    }

    if ( isdefined( var_1 ) )
    {
        var_1._id_5EF0 = 1;
        var_16 = undefined;

        if ( istrue( var_1._id_D019 ) && isdefined( self._id_03E1._id_EBE7._id_5449 ) && self._id_03E1._id_EBE7._id_5449 == var_1 )
            self._id_03E1._id_AF1B = gettime();

        if ( isdefined( var_3._id_2FCA ) )
            var_16 = var_3._id_2FCA[0].origin;
        else
            var_16 = var_3.origin;

        self _meth_8522( "suspicious_door", var_1, var_16 );
    }
}

_id_EBE8( var_0 )
{
    var_1 = var_0._id_0186;

    if ( isdefined( var_1._id_1339 ) )
        return;

    var_1._id_1339 = self;

    if ( isdefined( var_1._id_2FCA ) && isdefined( var_1._id_2FCA[0] ) )
        var_2 = var_1._id_2FCA[0].origin;
    else
        var_2 = var_1.origin;

    var_3 = _func_02A6( var_2, self );
    var_0.origin = var_2 + anglestoforward( ( 0, randomfloatrange( 0, 360 ), 0 ) ) * 75;
    var_0._id_84F8 = _func_02A6( var_0.origin, self );
    _id_0883::_id_2C3E( "investigate", var_0 );
}
