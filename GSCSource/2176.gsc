// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_7FA1()
{
    if ( !isdefined( level._id_7BA2 ) )
    {
        level._id_7BA2 = spawnstruct();
        _id_8195();
    }

    if ( isdefined( level._id_03E1 ) )
    {
        level._id_03E1._id_7BAA = level._id_7BA2._id_7BAA;
        level._id_7BA2 = undefined;
    }
}

_id_5ADC( var_0, var_1, var_2, var_3 )
{
    if ( !isdefined( var_3 ) )
        var_3 = 1;

    var_4 = var_2;
    var_5 = var_0;
    var_6 = min( var_1._id_24BF, 3 );
    var_7 = 48 * ( 1 + var_6 );
    var_8 = 84 * ( 1 + var_6 );

    while ( var_3 && var_4 < var_1._id_C942.size || !var_3 && var_4 >= 0 )
    {
        var_9 = var_1._id_C942[var_4].origin;
        var_10 = _id_081A::_id_68F8( var_5, var_9, var_1, undefined, var_7, var_8, 0 );

        if ( isdefined( var_10 ) )
        {
            var_11 = var_5;

            if ( var_3 && var_4 - 1 >= 0 )
                var_11 = var_1._id_C942[var_4 - 1].origin;
            else if ( !var_3 && var_4 + 1 < var_1._id_C942.size )
                var_11 = var_1._id_C942[var_4 + 1].origin;

            var_12 = var_9 - var_11;
            var_13 = length( var_12 );
            var_12 = var_12 / var_13;
            var_14 = var_4 == var_2 && ( var_2 == 0 && var_3 || var_2 == var_1._id_C942.size && !var_3 );

            if ( var_14 || vectordot( var_12, var_10.origin - var_11 ) > var_13 - 24 )
            {
                if ( var_3 )
                    return [ var_10, var_4 + 1 ];
                else
                    return [ var_10, var_4 - 1 ];
            }

            return [ var_10, var_4 ];
        }

        var_15 = distance2d( var_5, var_9 );
        var_7 = max( var_7 - var_15, 0 );
        var_8 = max( var_8 - var_15, 0 );
        var_5 = var_9;

        if ( var_3 )
        {
            var_4++;
            continue;
        }

        var_4--;
    }
}

_id_5AC8( var_0, var_1 )
{
    var_2 = var_1.size;
    var_3 = 0;
    var_4 = -1;

    for ( var_5 = 0; var_5 < var_2; var_5++ )
    {
        var_6 = ( var_5 + 1 ) % var_2;
        var_7 = var_1[var_6].origin - var_1[var_5].origin;
        var_8 = length( var_7 );
        var_7 = var_7 / var_8;
        var_9 = var_0 - var_1[var_5].origin;
        var_10 = vectordot( var_7, var_9 );

        if ( var_3 > 0 && ( var_10 < 0 || var_10 > var_8 ) )
            continue;

        var_11 = ( var_7[1], -1 * var_7[0], 0 );
        var_11 = vectornormalize( var_11 );
        var_12 = abs( vectordot( var_11, var_9 ) );

        if ( var_3 <= 0 || var_12 < var_3 )
        {
            var_3 = var_12;
            var_4 = var_6;
        }
    }

    return var_4;
}

_id_6CC9( var_0 )
{
    var_1 = 1000000000;
    var_2 = undefined;
    var_3 = level._id_03E1._id_7BAA[self._id_CE60];

    if ( !isdefined( var_3 ) )
        return undefined;

    foreach ( var_5 in var_3._id_7BA3 )
    {
        if ( !isdefined( self._id_CE60 ) || self._id_CE60 != var_5._id_E7AB )
            continue;

        if ( _func_0119( var_0, var_5._id_1069F ) )
            return var_5;

        var_6 = _func_0133( var_5._id_19D5 - self.origin );

        if ( var_6 < var_1 )
        {
            var_1 = var_6;
            var_2 = var_5;
        }
    }

    return var_2;
}

_id_6A8F( var_0 )
{
    var_1 = [];

    foreach ( var_3 in var_0 )
    {
        var_4 = strtok( var_3._id_CE60, " " );

        foreach ( var_6 in var_4 )
            var_1[var_1.size] = var_6;
    }

    return scripts\engine\utility::_id_1B99( var_1 );
}

_id_6A8E()
{
    var_0 = [];

    foreach ( var_2 in level._id_EA67 )
    {
        if ( isdefined( var_2._id_CE5F ) && var_2._id_CE5F == 1 )
        {
            var_3 = var_2;
            var_3._id_F49A = [];
            var_4 = var_0.size;
            var_3._id_0219 = var_4;
            var_0[var_4] = var_3;
        }
    }

    return var_0;
}

_id_6A90( var_0, var_1 )
{
    var_2 = [];

    foreach ( var_4 in var_0 )
    {
        var_2[var_4] = [];

        foreach ( var_6 in var_1 )
        {
            if ( issubstr( var_6._id_CE60, var_4 ) )
            {
                var_7 = var_2[var_4].size;
                var_2[var_4][var_7] = var_6;
            }
        }
    }

    return var_2;
}

_id_2CD9()
{
    foreach ( var_20, var_1 in level._id_7BA2._id_7BAA )
    {
        foreach ( var_3 in var_1._id_7BA3 )
        {
            var_4 = [];

            foreach ( var_16, var_6 in var_3._id_F48B )
            {
                var_7 = var_3._id_E7AB;
                var_8 = var_6 scripts\engine\utility::_id_653D();

                foreach ( var_10 in var_8 )
                {
                    foreach ( var_12 in var_10._id_3BB2 )
                    {
                        if ( var_12._id_E7AB == var_7 )
                        {
                            var_13 = var_6._id_F49A.size;
                            var_6._id_F49A[var_13] = var_10;

                            if ( !isdefined( var_10._id_F49A ) )
                                var_10._id_F49A = [];

                            if ( !scripts\engine\utility::array_contains( var_10._id_F49A, var_6 ) )
                            {
                                var_13 = var_10._id_F49A.size;
                                var_10._id_F49A[var_13] = var_6;
                            }

                            if ( !scripts\engine\utility::array_contains( var_12._id_F48B, var_10 ) )
                            {
                                var_13 = var_12._id_F48B.size;
                                var_12._id_F48B[var_13] = var_10;
                            }

                            break;
                        }
                    }
                }

                if ( var_6._id_F49A.size == 0 )
                    var_4[var_4.size] = var_16;
            }

            foreach ( var_16 in var_4 )
                scripts\engine\utility::array_remove_index( var_3._id_F48B, var_16, 0 );
        }
    }
}

_id_2CD8()
{
    foreach ( var_23, var_1 in level._id_7BA2._id_7BAA )
    {
        foreach ( var_3 in var_1._id_7BA3 )
        {
            var_3._id_C1B2 = [];

            foreach ( var_5 in var_3._id_F48B )
            {
                foreach ( var_7 in var_5._id_F49A )
                {
                    var_8 = undefined;

                    foreach ( var_10 in var_7._id_3BB2 )
                    {
                        if ( var_10._id_E7AB == var_3._id_E7AB )
                        {
                            var_8 = var_10;
                            break;
                        }
                    }

                    if ( !isdefined( var_8 ) )
                        continue;

                    var_12 = spawnstruct();
                    var_12._id_C1B1 = var_8;
                    var_12._id_F48A = var_5;
                    var_12._id_F48C = var_7;
                    var_13 = var_3._id_C1B2.size;
                    var_3._id_C1B2[var_13] = var_12;
                }
            }
        }

        foreach ( var_3 in var_1._id_7BA3 )
        {
            if ( var_3._id_C942.size == 0 )
                continue;

            if ( var_3._id_C942.size == 1 )
            {
                var_3._id_19D5 = var_3._id_C942[0].origin;
                continue;
            }

            var_18 = 0;
            var_19 = 0;
            var_20 = 1;

            for ( var_20 = 1; var_20 < var_3._id_C942.size; var_20++ )
            {
                var_19 = length( var_3._id_C942[var_20].origin - var_3._id_C942[var_20 - 1].origin );
                var_18 = var_18 + var_19;
            }

            var_18 = var_18 * 0.5;

            for ( var_20 = 0; var_20 < var_3._id_C942.size - 1; var_20++ )
            {
                var_19 = length( var_3._id_C942[var_20].origin - var_3._id_C942[var_20 + 1].origin );

                if ( var_18 - var_19 < 0 )
                    break;

                var_18 = var_18 - var_19;
            }

            var_21 = var_18 / var_19;
            var_3._id_19D5 = _func_0259( var_3._id_C942[var_20].origin, var_3._id_C942[var_20 + 1].origin, var_21 );
        }
    }
}

_id_3866( var_0 )
{
    foreach ( var_2 in var_0 )
    {
        var_2._id_3BB2 = undefined;
        var_2._id_F49A = undefined;
    }

    foreach ( var_9, var_5 in level._id_7BA2._id_7BAA )
    {
        foreach ( var_7 in var_5._id_7BA3 )
            var_7._id_F48B = undefined;
    }
}

_id_8195()
{
    var_0 = getentarray( "info_volume_stealth_clear", "classname" );
    var_1 = _id_6A8F( var_0 );
    var_2 = _id_6A8E();
    var_3 = [];
    var_4 = _id_6A90( var_1, var_0 );
    level._id_7BA2._id_7BAA = [];

    foreach ( var_36, var_6 in var_4 )
    {
        level._id_7BA2._id_7BAA[var_36] = spawnstruct();
        level._id_7BA2._id_7BAA[var_36]._id_7BA3 = [];
        level._id_7BA2._id_7BAA[var_36]._id_EE8C = 0.0;

        foreach ( var_19, var_8 in var_6 )
        {
            var_9 = spawnstruct();
            var_9._id_1069F = var_8;
            var_9._id_0219 = var_19;
            var_9._id_19D5 = ( 0, 0, 0 );
            var_9._id_24BF = 100000;
            var_9._id_24C0 = 100000;
            var_9._id_3CE2 = 20000;
            var_10 = var_3[var_8 getentitynumber()];

            if ( !isdefined( var_10 ) )
            {
                var_10 = spawnstruct();
                var_10._id_24BD = 0;
                var_10._id_9C02 = 2;
                var_10._id_24BE = 0;
                var_10._id_7D58 = 0;
                var_10._id_B4DE = 0;
                var_10._id_1CEB = 0;
                var_3[var_8 getentitynumber()] = var_10;
            }

            var_9._id_D9A8 = var_10;

            if ( isdefined( var_8._id_CCDD ) )
                var_10._id_9C02 = var_8._id_CCDD;

            if ( isdefined( var_8._id_CE79 ) )
                var_10._id_3CE2 = var_8._id_CE79;

            var_9._id_E7AB = var_36;
            var_9._id_C942 = [];
            var_9._id_F48B = [];

            foreach ( var_12 in var_2 )
            {
                if ( _func_0119( var_12.origin, var_8 ) )
                {
                    var_13 = var_9._id_C942.size;
                    var_9._id_C942[var_13] = var_12;

                    if ( !isdefined( var_12._id_3BB2 ) )
                        var_12._id_3BB2 = [];

                    var_13 = var_12._id_3BB2.size;
                    var_12._id_3BB2[var_13] = var_9;
                    var_14 = var_12 scripts\engine\utility::_id_653D();

                    if ( var_14.size != 0 )
                    {
                        var_13 = var_9._id_F48B.size;
                        var_9._id_F48B[var_13] = var_12;
                    }
                }
            }

            if ( var_9._id_C942.size == 0 )
            {

            }

            var_9._id_DE12 = [];

            foreach ( var_17 in anim._id_DE25 )
            {
                if ( _func_0119( var_17.origin, var_8 ) )
                {
                    var_13 = var_9._id_DE12.size;
                    var_9._id_DE12[var_13] = var_17;
                }
            }

            var_13 = level._id_7BA2._id_7BAA[var_36]._id_7BA3.size;
            level._id_7BA2._id_7BAA[var_36]._id_7BA3[var_13] = var_9;
        }

        foreach ( var_9 in level._id_7BA2._id_7BAA[var_36]._id_7BA3 )
        {
            if ( var_9._id_C942.size == 0 )
                continue;

            var_21 = -1;

            for ( var_22 = 0; var_22 < var_9._id_C942.size; var_22++ )
            {
                var_12 = var_9._id_C942[var_22];
                var_23 = var_12._id_045A;

                if ( !isdefined( var_23 ) )
                {
                    if ( var_21 != -1 )
                        var_24 = var_12.origin;

                    var_21 = var_22;
                    continue;
                }

                var_25 = undefined;

                foreach ( var_27 in var_9._id_C942 )
                {
                    if ( isdefined( var_27.target ) && var_27.target == var_23 )
                        var_25 = var_27;
                }

                if ( !isdefined( var_25 ) )
                {
                    if ( var_21 != -1 )
                    {

                    }

                    var_21 = var_22;
                }
            }

            if ( var_21 == -1 )
                var_21 = 0;

            var_29 = [];
            var_30 = var_21;
            var_29[0] = var_9._id_C942[var_30];

            for ( var_22 = 1; var_22 < var_9._id_C942.size; var_22++ )
            {
                var_12 = var_9._id_C942[var_30];
                var_31 = var_12.target;
                var_32 = 0;

                for ( var_33 = undefined; var_32 < var_9._id_C942.size; var_32++ )
                {
                    var_34 = var_9._id_C942[var_32];
                    var_23 = var_34._id_045A;

                    if ( isdefined( var_23 ) && var_31 == var_23 )
                    {
                        var_33 = var_34;
                        break;
                    }
                }

                if ( !isdefined( var_33 ) )
                {

                }

                var_29[var_22] = var_33;
                var_30 = var_32;
            }

            var_9._id_C942 = var_29;
        }
    }

    var_3 = undefined;

    foreach ( var_38 in var_2 )
    {
        if ( !isdefined( var_38._id_3BB2 ) )
        {

        }
    }

    _id_2CD9();
    _id_2CD8();
    _id_3866( var_2 );
}

_id_7BB2( var_0, var_1 )
{
    var_2 = var_1._id_7BA3.size;

    for ( var_3 = 0; var_3 < var_2; var_3++ )
    {
        var_4 = var_1._id_7BA3[var_3];
        var_4._id_24C0 = 1;
        var_4._id_D9A8._id_B4DE = 0;
    }

    foreach ( var_6 in level.players )
    {
        if ( !var_6 scripts\engine\utility::_id_5452( "stealth_enabled" ) || !var_6 scripts\engine\utility::_id_544E( "stealth_enabled" ) )
            continue;

        for ( var_3 = 0; var_3 < var_2; var_3++ )
        {
            var_4 = var_1._id_7BA3[var_3];
            var_4._id_24C1 = 0;
        }

        var_7 = undefined;
        var_8 = 100000000000000000000.0;

        for ( var_3 = 0; var_3 < var_2; var_3++ )
        {
            var_4 = var_1._id_7BA3[var_3];

            if ( _func_0119( var_6.origin, var_4._id_1069F ) )
            {
                var_7 = var_4;
                break;
            }

            var_9 = _func_0133( var_4._id_19D5 - var_6.origin );

            if ( var_9 < var_8 )
            {
                var_8 = var_9;
                var_7 = var_4;
            }
        }

        var_7._id_D9A8._id_B4DE = 1;
        var_10 = [ var_7 ];
        var_7._id_24C1 = 1;
        var_9 = 0;

        for ( var_11 = 0; var_11 < var_10.size; var_9++ )
        {
            var_12 = var_10.size;

            for ( var_13 = var_11; var_13 < var_12; var_13++ )
            {
                var_4 = var_10[var_13];
                var_4._id_24C0 = var_9 * var_4._id_24C0;
                var_4._id_24C1 = 1;
                var_4._id_24BF = var_9;
                var_14 = var_4._id_C1B2.size;

                for ( var_15 = 0; var_15 < var_14; var_15++ )
                {
                    var_16 = var_4._id_C1B2[var_15];

                    if ( !var_16._id_C1B1._id_24C1 )
                    {
                        var_10[var_10.size] = var_16._id_C1B1;
                        var_16._id_C1B1._id_24C1 = 1;
                    }
                }
            }

            var_11 = var_12;
        }
    }

    var_18 = 1;

    for ( var_3 = 0; var_3 < var_2; var_3++ )
    {
        var_4 = var_1._id_7BA3[var_3];
        var_18 = max( var_4._id_24C0, var_18 );
    }

    for ( var_3 = 0; var_3 < var_2; var_3++ )
    {
        var_4 = var_1._id_7BA3[var_3];
        var_4._id_24C0 = var_4._id_24C0 / var_18;
        var_4._id_24C1 = undefined;
    }
}

_id_7BB1( var_0 )
{
    if ( isdefined( self._id_03E1._id_3912 ) )
    {
        self._id_03E1._id_3912._id_4129 = var_0;
        _id_7BC0( var_0 );
    }
}

_id_7BC6( var_0 )
{
    if ( isdefined( self._id_03E1._id_3912._id_4129 ) && self._id_03E1._id_3912._id_4129 == var_0 )
        _id_7BB3( var_0 );
}

_id_7BC0( var_0 )
{
    var_0._id_D9A8._id_24BD = var_0._id_D9A8._id_24BD + 1;
    _id_7BC4( var_0 );
}

_id_7BB3( var_0 )
{
    var_0._id_D9A8._id_24BD = var_0._id_D9A8._id_24BD - 1;
    _id_7BC5( var_0 );

    if ( var_0._id_D9A8._id_7D58 == 0 )
        var_0._id_D9A8._id_24BE = gettime() + var_0._id_3CE2;
}

_id_7BC4( var_0 )
{
    if ( !self._id_03E1._id_3912._id_88B3 && _func_0119( self.origin, var_0._id_1069F ) )
    {
        var_0._id_D9A8._id_7D58 = var_0._id_D9A8._id_7D58 + 1;
        self._id_03E1._id_3912._id_88B3 = 1;

        if ( var_0._id_D9A8._id_B4DE && var_0._id_D9A8._id_7D58 == 1 )
        {
            var_1 = 1000;
            var_0._id_D9A8._id_1CEB = gettime() + var_1;
        }
    }
}

_id_7BC5( var_0 )
{
    if ( self._id_03E1._id_3912._id_88B3 )
    {
        var_0._id_D9A8._id_7D58 = var_0._id_D9A8._id_7D58 - 1;
        self._id_03E1._id_3912._id_88B3 = 0;
    }
}

_id_7BBE()
{
    var_0 = self._id_03E1._id_3912._id_4129;

    if ( var_0._id_C1B2.size == 0 )
        return;

    if ( !isdefined( self._id_CE60 ) || !isdefined( level._id_03E1._id_7BAA[self._id_CE60] ) )
        return;

    var_1 = undefined;
    var_2 = gettime();
    var_3 = level._id_03E1._id_7BAA[self._id_CE60]._id_EE8C;
    var_4 = 1.0;

    foreach ( var_6 in level._id_03E1._id_7BAA[self._id_CE60]._id_7BA3 )
    {
        if ( var_6 == var_0 )
            continue;

        if ( var_6._id_D9A8._id_24BE > gettime() )
            continue;

        if ( var_6._id_D9A8._id_B4DE && var_6._id_D9A8._id_7D58 > 0 && var_2 > var_6._id_D9A8._id_1CEB )
            continue;

        if ( self._id_03E1._id_3912._id_BC4D[0] == var_6 || self._id_03E1._id_3912._id_BC4D[1] == var_6 )
            continue;

        if ( self._id_CE60 != var_6._id_E7AB )
            continue;

        if ( var_6._id_D9A8._id_24BD >= var_6._id_D9A8._id_9C02 )
            continue;

        var_7 = abs( var_3 - var_6._id_24C0 );

        if ( var_7 < var_4 )
        {
            var_1 = var_6;
            var_4 = var_7;
        }
    }

    if ( !isdefined( var_1 ) )
        var_1 = var_0._id_C1B2[0]._id_C1B1;

    _id_7BC6( var_0 );
    self._id_03E1._id_3912._id_BC4D[0] = self._id_03E1._id_3912._id_BC4D[1];
    self._id_03E1._id_3912._id_BC4D[1] = self._id_03E1._id_3912._id_4129;
    _id_7BB1( var_1 );
    var_3 = var_3 + 0.5;

    if ( var_3 > 1.0 )
        var_3 = 0.0;

    level._id_03E1._id_7BAA[self._id_CE60]._id_EE8C = var_3;
}
