// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_4033()
{
    if ( !isdefined( level._id_E47F ) )
        level._id_E47F = 4;

    if ( !isdefined( level._id_E47D ) )
        level._id_E47D = 2;

    setdvarifuninitialized( "#x37910bb2efd41be7b", "0" );

    if ( !isdefined( level._id_E4A5 ) )
        level._id_E4A5 = [];

    var_0 = _id_6B5A();
    var_1 = gettime();
    level._id_E4A5[var_0] = spawnstruct();
    level._id_E4A5[var_0]._id_9D9E = [];
    level._id_E4A5[var_0]._id_9123 = [];
    level._id_E4A5[var_0]._id_CFD6 = [];
    level._id_E4A5[var_0]._id_E49F = 0;
    level._id_E4A5[var_0]._id_A4C6 = var_1 + 1000;
    level._id_E4A5[var_0]._id_A48E = var_1 + 1000;
    level._id_E4A5[var_0]._id_A4C5 = var_1 + 3000;
    return var_0;
}

_id_6B5A()
{
    if ( !isdefined( level._id_E4A6 ) )
        level._id_E4A6 = 0;

    var_0 = level._id_E4A6;
    level._id_E4A6 = level._id_E4A6 + 1;
    return var_0;
}

_id_1147( var_0, var_1 )
{
    var_2 = level._id_E4A5[var_0]._id_9D9E.size;
    level._id_E4A5[var_0]._id_9D9E[var_2] = var_1;
    var_1._id_03D6 = var_0;
    var_1 thread _id_E4A4( var_1._id_03D6 );
    var_1 scripts\engine\utility::_id_D16D( 1 );
    var_1._id_03D5 = 0;

    if ( var_2 != 0 )
    {
        var_3 = level._id_E4A5[var_0]._id_9119;
        var_1 _meth_8325( var_3._id_01E7 );
        var_1._id_01E8 = var_3._id_01E8;
        var_1 _meth_8659( var_3 );
    }
    else
        level._id_E4A5[var_0]._id_9119 = var_1;

    var_1 _id_E483();
}

_id_E483()
{
    var_0 = level._id_E4A5[self._id_03D6];
    var_1 = undefined;

    if ( _id_8A43() )
    {
        if ( var_0._id_9123.size >= level._id_E47D )
        {
            var_1 = var_0._id_9123[0];
            var_0._id_9123[0] = self;
            var_0._id_CFD6[var_0._id_CFD6.size] = var_1;
            return;
        }

        var_0._id_9123[var_0._id_9123.size] = self;
    }
    else if ( var_0._id_9123.size < level._id_E47D )
        var_0._id_9123[var_0._id_9123.size] = self;
    else
        var_0._id_CFD6[var_0._id_CFD6.size] = self;
}

_id_8A43()
{
    return isdefined( level._id_E4A5 ) && isdefined( level._id_E4A5[self._id_03D6] ) && level._id_E4A5[self._id_03D6]._id_9119 == self;
}

_id_E488( var_0 )
{
    var_1 = _id_4033();
    var_0 _id_1147( var_1, var_0 );
    return var_1;
}

_id_1BA5( var_0, var_1 )
{
    var_2 = [];

    foreach ( var_4 in var_0 )
    {
        if ( !isalive( var_4 ) )
            continue;

        if ( var_4 == var_1 )
            continue;

        var_2[var_2.size] = var_4;
    }

    return var_2;
}

_id_C4AA( var_0, var_1 )
{
    if ( !isdefined( level._id_E4A5[var_0] ) )
        return;

    var_1._id_03D6 = -1;
    level._id_E4A5[var_0]._id_9D9E = _id_1BA5( level._id_E4A5[var_0]._id_9D9E, var_1 );
    level._id_E4A5[var_0]._id_9123 = _id_1BA5( level._id_E4A5[var_0]._id_9123, var_1 );
    level._id_E4A5[var_0]._id_CFD6 = _id_1BA5( level._id_E4A5[var_0]._id_CFD6, var_1 );
    var_2 = level._id_E4A5[var_0]._id_9D9E.size;

    if ( var_2 == 0 )
        level._id_E4A5[var_0] = undefined;
    else if ( var_2 <= 2 )
    {
        var_3 = level._id_E4A5[var_0];
        _id_E486( var_0, 0 );
        var_4 = var_3._id_9119 _id_5AD7( var_0, 1 );

        if ( var_4 == -1 )
        {
            _id_E486( var_0, 0 );
            return;
        }

        _id_E49E( var_0, var_4 );
        return;
    }
    else
        _id_E486( var_0, 0 );
}

_id_E486( var_0, var_1 )
{
    var_2 = level._id_E4A5[var_0]._id_9D9E[var_1];
    level._id_E4A5[var_0]._id_9119 = var_2;
    level._id_E4A5[var_0]._id_9123 = scripts\engine\utility::array_remove( level._id_E4A5[var_0]._id_9123, var_2 );
    level._id_E4A5[var_0]._id_CFD6 = scripts\engine\utility::array_remove( level._id_E4A5[var_0]._id_CFD6, var_2 );
    var_2 _id_E483();

    foreach ( var_4 in level._id_E4A5[var_0]._id_9D9E )
        var_4 _meth_8659( var_2 );
}

_id_E49E( var_0, var_1 )
{
    if ( var_0 == -1 || var_1 == -1 )
        return;

    foreach ( var_3 in level._id_E4A5[var_0]._id_9D9E )
    {
        var_3._id_03D6 = -1;
        var_3 notify( "squad_removed" );
        var_3 _id_1147( var_1, var_3 );
    }

    level._id_E4A5[var_0] = undefined;
}

_id_E48E( var_0 )
{
    return isdefined( level._id_E4A5[var_0] );
}

_id_D6DD( var_0, var_1, var_2 )
{
    if ( !isdefined( var_2 ) )
        var_2 = 1024;

    foreach ( var_4 in level._id_E4A5[var_0]._id_9D9E )
    {
        var_4._id_1CF0 = var_1;
        var_4._id_01E8 = var_2;
        var_4 _meth_8325( var_1 );
        var_4 scripts\engine\utility::_id_D16D( 1 );
    }
}

_id_88B9()
{
    return self._id_03D6 >= 0;
}

_id_FD38()
{
    var_0 = gettime();

    if ( !_id_88B9() )
        _id_5ADF();
    else if ( level._id_E4A5[self._id_03D6]._id_A4C5 < var_0 && _id_8A43() )
    {
        if ( level._id_E4A5[self._id_03D6].size < level._id_E47F )
        {
            var_1 = _id_E48F();
            _id_E49E( self._id_03D6, var_1 );
        }

        level._id_E4A5[self._id_03D6]._id_A4C5 = var_0 + 3000;
    }
}

_id_5ADF()
{
    if ( !isdefined( level._id_E4A5 ) || level._id_E4A5.size == 0 )
        return _id_E488( self );

    var_0 = _id_5AD7( -1, 0 );

    if ( var_0 == -1 )
        return _id_E488( self );

    _id_1147( var_0, self );
}

_id_5AD7( var_0, var_1 )
{
    if ( !isdefined( level._id_E4A5 ) || level._id_E4A5.size == 0 )
        return -1;

    var_2 = -1;
    var_3 = 100000000;
    var_4 = level._id_E4A5[var_0];

    foreach ( var_8, var_6 in level._id_E4A5 )
    {
        var_6 = var_6._id_9D9E;

        if ( var_8 == var_0 )
            continue;

        if ( var_6.size >= level._id_E47F )
            continue;

        if ( !isalive( var_6[0] ) )
            continue;

        if ( var_6[0].team != self.team )
            continue;

        var_7 = distancesquared( var_6[0].origin, self.origin );

        if ( var_1 )
        {
            if ( var_7 > 1000000 )
                continue;

            if ( var_6.size + level._id_E4A5[var_0]._id_9D9E.size > level._id_E47F )
                continue;
        }
        else if ( var_7 > 160000 )
            continue;

        if ( var_7 < var_3 )
        {
            var_3 = var_7;
            var_2 = var_6[0]._id_03D6;
        }
    }

    return var_2;
}

_id_E48F()
{
    return _id_5AD7( self._id_03D6, 1 );
}

_id_E4A4( var_0 )
{
    self endon( "squad_removed" );
    self waittill( "death" );

    if ( !isdefined( self ) )
    {
        level._id_E4A5[var_0]._id_9D9E = scripts\engine\utility::_id_1BA9( level._id_E4A5[var_0]._id_9D9E );

        if ( level._id_E4A5[var_0]._id_9D9E.size == 0 )
            level._id_E4A5[var_0] = undefined;

        return;
    }

    _id_C4AA( self._id_03D6, self );
}
