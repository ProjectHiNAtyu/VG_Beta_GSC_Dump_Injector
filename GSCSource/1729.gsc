// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_948C( var_0, var_1 )
{
    var_2 = _func_021A( var_0, " " );
    _id_077B::_id_1B8F( var_2, ::_id_948E, var_1 );
}

_id_71FA( var_0, var_1, var_2 )
{
    if ( !isdefined( level._id_FFF1._id_F075._id_10132 ) )
        level._id_FFF1._id_F075._id_10132 = [];

    if ( !isdefined( level._id_FFF1._id_F075._id_10132[var_0] ) )
        level._id_FFF1._id_F075._id_10132[var_0] = [];

    if ( !isdefined( level._id_FFF1._id_F075._id_10132[var_0][var_2] ) )
        level._id_FFF1._id_F075._id_10132[var_0][var_2] = [];

    foreach ( var_4 in level._id_FFF1._id_F075._id_10132[var_0][var_2] )
    {
        if ( var_1 == var_4 )
            return;
    }

    level._id_FFF1._id_F075._id_10132[var_0][var_2][level._id_FFF1._id_F075._id_10132[var_0][var_2].size] = var_1;
}

_id_9485()
{
    level notify( "new_lights_delayfxforframe" );
    level endon( "new_lights_delayfxforframe" );

    if ( !isdefined( level._id_6068 ) )
        level._id_6068 = 0;

    level._id_6068 = level._id_6068 + _func_01B7( 0.2, 0.4 );

    if ( level._id_6068 > 2 )
        level._id_6068 = 0;

    wait 0.05;
    level._id_6068 = undefined;
}

_id_9489( var_0, var_1, var_2 )
{
    self notify( "lights_off" );

    if ( isdefined( var_2 ) )
        var_1 = var_2;
    else if ( !isdefined( var_1 ) )
        var_1 = self._id_00DE;

    if ( !isdefined( var_0 ) )
        var_0 = "all";

    if ( !isdefined( self._id_9484 ) )
        return;

    if ( !isdefined( level._id_FFF1._id_F075._id_10132[var_1][var_0] ) )
        return;

    var_3 = level._id_FFF1._id_F075._id_10132[var_1][var_0];
    var_4 = 0;
    var_5 = 2;

    if ( isdefined( self._id_9C6C ) )
        var_5 = self._id_9C6C;

    self._id_948A = 1;

    foreach ( var_7 in var_3 )
        self._id_9484[var_7] = -1;

    foreach ( var_7 in var_3 )
    {
        var_10 = level._id_FFF1._id_F075._id_10131[var_1][var_7];

        if ( isdefined( var_10._id_F844 ) )
        {
            if ( self._id_9E55[var_10._id_F844] tagexists( var_10._id_0400 ) )
                _func_0218( var_10._id_50E6, self._id_9E55[var_10._id_F844], var_10._id_0400 );
        }
        else if ( self tagexists( var_10._id_0400 ) )
            _func_0218( var_10._id_50E6, self, var_10._id_0400 );

        var_4++;

        if ( var_4 >= var_5 )
        {
            var_4 = 0;
            wait 0.05;
        }

        if ( !isdefined( self ) )
            return;

        self._id_9484[var_7] = undefined;
    }

    self._id_948A = undefined;
}

_id_948E( var_0, var_1 )
{
    level._id_8FF1 = gettime();
    self endon( "lights_off" );
    self endon( "death" );

    if ( !isdefined( var_0 ) )
        var_0 = "all";

    if ( !isdefined( var_1 ) )
        var_1 = self._id_00DE;

    if ( !isdefined( level._id_FFF1._id_F075._id_10132 ) )
        return;

    if ( !isdefined( level._id_FFF1._id_F075._id_10132[var_1] ) || !isdefined( level._id_FFF1._id_F075._id_10132[var_1][var_0] ) )
        return;

    thread _id_9485();

    if ( !isdefined( self._id_9484 ) )
        self._id_9484 = [];

    var_2 = level._id_FFF1._id_F075._id_10132[var_1][var_0];
    var_3 = 0;
    var_4 = [];

    foreach ( var_6 in var_2 )
    {
        if ( isdefined( self._id_9484[var_6] ) && self._id_9484[var_6] == 1 )
            continue;

        var_7 = level._id_FFF1._id_F075._id_10131[var_1][var_6];

        if ( isdefined( var_7._id_4628 ) )
            var_8 = var_7._id_4628;
        else
            var_8 = 0;

        for ( var_8 = var_8 + level._id_6068; isdefined( var_4["" + var_8] ); var_8 = var_8 + 0.05 )
        {

        }

        var_4["" + var_8] = 1;

        if ( isdefined( var_7._id_F844 ) )
            childthread _id_DD56( self._id_9E55[var_7._id_F844], var_8, var_7 );
        else
            childthread _id_DD56( self, var_8, var_7 );

        self._id_9484[var_6] = 1;

        if ( !isdefined( self ) )
            break;
    }

    level._id_6068 = 0;
}

_id_DD56( var_0, var_1, var_2 )
{
    var_0 endon( "death" );
    wait( var_1 );

    for (;;)
    {
        if ( istrue( self._id_948A ) )
        {
            waitframe();
            continue;
        }

        break;
    }

    _func_0197( var_2._id_50E6, self, var_2._id_0400 );
}

_id_9488( var_0, var_1, var_2 )
{
    var_3 = _func_021A( var_0, " ", var_1 );
    _id_077B::_id_1B8F( var_3, ::_id_9489, var_1, var_2 );
}

_id_F995()
{
    if ( !isdefined( self._id_750E ) )
        return;

    while ( isdefined( self._id_9484 ) && self._id_9484.size )
        wait 0.05;
}

_id_D2A2( var_0, var_1 )
{
    self._id_75E9 = var_0;
    var_0 _meth_820B( self, self._id_75F2, self._id_75EC, self._id_75EB );
    var_0 _meth_8337( 1 );
    var_0 _meth_833A( 500 );
    var_0 _meth_833F( "forceshadowon" );

    if ( isdefined( var_1 ) )
    {
        if ( isdefined( var_1._id_0220 ) )
            var_0 _meth_8337( var_1._id_0220 );

        if ( isdefined( var_1._id_0333 ) )
            var_0 _meth_833A( var_1._id_0333 );

        if ( isdefined( var_1.outer_fov ) || isdefined( var_1.inner_fov ) )
            var_0 _meth_8336( var_1.outer_fov, var_1.inner_fov );

        if ( isdefined( var_1.shadow_bias ) )
            var_0 _meth_833B( var_1.shadow_bias );

        if ( isdefined( var_1.shadow_near_plane_bias ) )
            var_0 _meth_833C( var_1.shadow_near_plane_bias );
    }

    if ( isdefined( self._id_4550 ) )
    {
        if ( isdefined( self._id_75EA ) )
            _func_0197( self._id_4550, self, self._id_75EA );

        if ( isdefined( self._id_75ED ) )
            _func_0197( self._id_4550, self, self._id_75ED );
    }
}

toggle_optimized_headlight_ent( var_0, var_1 )
{
    if ( !isdefined( var_0 ) )
    {
        var_2 = self._id_75E9 _meth_8146();

        if ( var_2 != 0 )
            var_0 = 0;
        else
            var_0 = 1;
    }

    if ( var_0 )
    {
        self._id_75E9 _meth_8337( 1 );
        _func_0197( self._id_4550, self, self._id_75EA );
        _func_0197( self._id_4550, self, self._id_75ED );
    }
    else
    {
        self._id_75E9 _meth_8337( 0 );
        kick( self._id_4550, self, self._id_75EA );
        kick( self._id_4550, self, self._id_75ED );
    }
}

_id_D2A3( var_0 )
{
    var_0 _meth_820B( self, self._id_ED79, self._id_ED78, self._id_ED77 );
    var_0 _meth_8333( ( 1, 0, 0 ) );
    var_0 _meth_8337( 0 );
    var_0 _meth_833A( 150 );
    var_0 _meth_8336( 120, 110 );
    var_0 _meth_8334( 0.1 );

    if ( isdefined( self._id_4573 ) )
        return;
}

_id_D233( var_0 )
{
    self endon( "death" );

    if ( self._id_75EE == self._id_75EF || isdefined( self._id_01FF ) && self._id_01FF <= 0 )
    {
        self._id_75EE = self._id_75F0;
        self._id_75E9 _meth_8337( 0 );
        self._id_75E9 _meth_833F( "forceshadowoff" );
    }
    else if ( self._id_75EE == self._id_75F1 )
    {
        self._id_75EE = self._id_75EF;

        if ( isdefined( self._id_75ED ) && var_0 == self._id_75ED )
            self._id_75E9 _meth_820B( self, self._id_75EA, ( 0, 0, 0 ), ( 20, 0, 0 ) );
        else if ( isdefined( self._id_75EA ) && var_0 == self._id_75EA )
            self._id_75E9 _meth_820B( self, self._id_75ED, ( 0, 0, 0 ), ( 20, 0, 0 ) );

        self._id_75E9 _meth_8337( 0.1 );
    }

    if ( isdefined( self._id_01FF ) && self._id_01FF > 0 && isdefined( self._id_4550 ) )
    {
        if ( var_0 == self._id_75ED )
            kick( self._id_4550, self, self._id_75ED );
        else
            kick( self._id_4550, self, self._id_75EA );
    }
}
