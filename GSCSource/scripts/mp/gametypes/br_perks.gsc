// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_021D()
{
    level._id_2A5E = getdvarint( "scr_br_perk_points", 0 ) != 0;

    if ( !istrue( level._id_2A5E ) )
        return;
}

_id_AB62( var_0, var_1, var_2 )
{
    if ( _func_0121( var_0, "kill" ) && istrue( level._id_2A5E ) )
    {
        if ( var_0 != "last_stand_kill" )
        {
            if ( isdefined( var_1 ) && isai( var_1 ) )
            {
                if ( var_1._id_2A5F < var_2._id_2A5F && var_1 scripts\mp\tac_ops\hostage_utility::_id_0BF6( "specialty_br_bountyhunter" ) )
                {
                    var_1 _id_6FA7( var_1, var_2._id_2A5F - var_1._id_2A5F );
                    var_1 _id_0A44::_id_0D78( "specialty_br_bountyhunter" );
                    return;
                }

                var_1 iprintlnbold( "+1 Perk Point - " + var_2._id_02BA + " killed" );
                var_1 _id_AFDF( var_1 );
            }
        }

        var_3 = _id_07E1::_id_6CEE( "score_increment" );
        return var_3;
    }

    return 0;
}

_id_AFDF( var_0 )
{
    var_1 = _id_0A7C::_id_6DAC( var_0._id_045B, "players" );

    foreach ( var_0 in var_1 )
        _id_6FA7( var_0, 1.0 );
}

_id_AFE0()
{
    level endon( "game_ended" );
    level waittill( "infils_ready" );
    wait 5;
    var_0 = level._id_9C7A;
    var_1 = 100.0 / var_0;
    var_2 = 5.0;

    for (;;)
    {
        wait( var_2 );
        var_3 = _id_0A69::_id_6AF4().size;
        var_4 = ( var_0 - var_3 ) * var_1;

        if ( !istrue( var_4 == 0 ) )
        {
            foreach ( var_6 in level._id_B758 )
            {
                if ( isai( var_6 ) )
                    _id_6FA7( var_6, var_4 );
            }
        }

        var_0 = var_3;
    }
}

_id_EDCC( var_0 )
{
    if ( !istrue( level._id_2A5E ) )
        return;

    var_1 = 1;

    if ( isdefined( var_0._id_010E ) )
        var_1 = var_0._id_010E;

    if ( var_0._id_CF15 == "brloot_perk_point" )
        _id_AFE1( self );
    else
        scripts\mp\gametypes\br_pickups::_id_F74F( var_0._id_CF15, var_1 );
}

_id_AFE1( var_0 )
{
    var_1 = getdvarint( "scr_br_perk_points_pickup_value", 5.0 );
    _id_6FA7( var_0, var_1 );
}

_id_6FA7( var_0, var_1 )
{
    var_0._id_2A5F = clamp( var_0._id_2A5F + var_1, 0, 150 );

    if ( var_0._id_2A5F < 20 )
        var_0._id_AFBE = 0;
    else if ( var_0._id_2A5F < 30 )
        var_0._id_AFBE = 1;
    else if ( var_0._id_2A5F < 42 )
        var_0._id_AFBE = 2;
    else if ( var_0._id_2A5F < 56 )
        var_0._id_AFBE = 3;
    else if ( var_0._id_2A5F < 72 )
        var_0._id_AFBE = 4;
    else if ( var_0._id_2A5F < 90 )
        var_0._id_AFBE = 5;
    else if ( var_0._id_2A5F < 110 )
        var_0._id_AFBE = 6;
    else if ( var_0._id_2A5F < 130 )
        var_0._id_AFBE = 7;
    else if ( var_0._id_2A5F < 150 )
        var_0._id_AFBE = 8;
}

_id_2DBE( var_0 )
{
    if ( var_0 < self._id_2A60.size )
    {
        var_1 = self._id_2A60[var_0];

        if ( var_1 < 3 )
        {
            if ( self._id_2A5F < var_1 + 1 )
                self iprintlnbold( "You can't afford this perk!" );
            else
            {
                self._id_2A60[var_0]++;

                switch ( var_0 )
                {
                    case 0:
                        if ( var_1 == 0 )
                        {
                            scripts\mp\tac_ops\hostage_utility::_id_6FA5( "specialty_hard_shell" );
                            thread _id_07B9::_id_DCE0( "br_specialty_hard_shell" );
                        }
                        else if ( var_1 == 1 )
                            thread _id_07B9::_id_DCE0( "br_specialty_throwback" );
                        else if ( var_1 == 2 )
                        {
                            scripts\mp\tac_ops\hostage_utility::_id_6FA5( "specialty_blastshield" );
                            thread _id_07B9::_id_DCE0( "br_specialty_blastshield" );
                        }

                        break;
                    case 1:
                        if ( var_1 == 0 )
                        {
                            scripts\mp\tac_ops\hostage_utility::_id_6FA5( "specialty_lightweight" );
                            thread _id_07B9::_id_DCE0( "br_specialty_lightweight" );
                        }
                        else if ( var_1 == 1 )
                        {
                            scripts\mp\tac_ops\hostage_utility::_id_6FA5( "specialty_marathon" );
                            thread _id_07B9::_id_DCE0( "br_specialty_marathon" );
                        }
                        else if ( var_1 == 2 )
                        {
                            scripts\mp\tac_ops\hostage_utility::_id_6FA5( "specialty_quieter" );
                            thread _id_07B9::_id_DCE0( "br_specialty_quieter" );
                        }

                        break;
                    case 2:
                        if ( var_1 == 0 )
                        {
                            scripts\mp\tac_ops\hostage_utility::_id_6FA5( "specialty_quickswap" );
                            thread _id_07B9::_id_DCE0( "br_specialty_quickswap" );
                        }
                        else if ( var_1 == 1 )
                        {
                            scripts\mp\tac_ops\hostage_utility::_id_6FA5( "specialty_fastreload" );
                            thread _id_07B9::_id_DCE0( "br_specialty_fastreload" );
                        }
                        else if ( var_1 == 2 )
                        {
                            scripts\mp\tac_ops\hostage_utility::_id_6FA5( "specialty_gung_ho" );
                            thread _id_07B9::_id_DCE0( "br_specialty_gung_ho" );
                        }

                        break;
                    case 3:
                        if ( var_1 == 0 )
                        {
                            scripts\mp\tac_ops\hostage_utility::_id_6FA5( "specialty_boom" );
                            thread _id_07B9::_id_DCE0( "br_specialty_boom" );
                        }
                        else if ( var_1 == 1 )
                        {
                            scripts\mp\tac_ops\hostage_utility::_id_6FA5( "specialty_selectivehearing" );
                            thread _id_07B9::_id_DCE0( "br_specialty_selectivehearing" );
                        }
                        else if ( var_1 == 2 )
                        {
                            scripts\mp\tac_ops\hostage_utility::_id_6FA5( "specialty_tracker" );
                            thread _id_07B9::_id_DCE0( "br_specialty_tracker" );
                        }

                        break;
                    case 4:
                        if ( var_1 == 0 )
                        {
                            scripts\mp\tac_ops\hostage_utility::_id_6FA5( "specialty_holdbreath" );
                            thread _id_07B9::_id_DCE0( "br_specialty_holdbreath" );
                        }
                        else if ( var_1 == 1 )
                        {
                            scripts\mp\tac_ops\hostage_utility::_id_6FA5( "specialty_quickdraw" );
                            thread _id_07B9::_id_DCE0( "br_specialty_quickdraw" );
                        }
                        else if ( var_1 == 2 )
                        {
                            scripts\mp\tac_ops\hostage_utility::_id_6FA5( "specialty_steadyaimpro" );
                            thread _id_07B9::_id_DCE0( "br_specialty_steadyaim" );
                        }

                        break;
                    default:
                        break;
                }
            }
        }
    }
}
