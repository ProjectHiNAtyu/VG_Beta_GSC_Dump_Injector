// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_E3DD()
{
    level thread _id_FBEF();
}

_id_8241()
{
    _id_B669();
}

_id_68FB( var_0, var_1 )
{
    var_2 = undefined;

    if ( isdefined( var_0._id_A4B0 ) )
    {
        var_2 = _id_6B71( var_0._id_A4B0 );
        var_0._id_A4B0 = undefined;
    }

    if ( !isdefined( var_2 ) )
        var_2 = var_0 scripts\mp\gametypes\br_gulag::_id_B6A2();

    if ( !isdefined( var_2 ) )
    {
        var_3 = scripts\mp\utility\teams::_id_6A3A( var_0.team );
        var_2 = _id_68F6( var_0, var_3 );
    }

    if ( !isdefined( var_2 ) )
    {
        if ( isdefined( var_1 ) && isplayer( var_1 ) && var_1.team != var_0.team )
        {
            if ( isalive( var_1 ) && !istrue( var_1._id_7245 ) && !istrue( var_1._id_82AC ) )
                var_2 = var_1;
            else
            {
                var_4 = scripts\mp\utility\teams::_id_6A3A( var_1.team );
                var_2 = _id_68F6( var_0, var_4 );
            }
        }
    }

    if ( !isdefined( var_2 ) && isplayer( var_1 ) && isplayer( var_1 ) && var_1 != var_0 )
        var_2 = _id_6B71( var_1 );

    if ( !isdefined( var_2 ) )
        var_2 = _id_68F6( var_0, level.players );

    return var_2;
}

_id_44AF( var_0, var_1, var_2 )
{
    var_3 = "player: " + var_0.name + ", candidate: " + var_1.name + ", playersChecked.size: " + var_2.size;
    _id_0A78::_id_479A( var_3 );
    var_3 = "";
    var_4 = int( min( var_2.size, 3 ) );
    var_5 = 0;

    foreach ( var_7 in var_2 )
    {
        var_3 = var_3 + ( " - player: " + var_7.name + ", eliminated: " + istrue( var_7._id_2A3D ) );
        var_5++;

        if ( var_5 > var_4 )
            break;
    }

    _id_0A78::_id_479A( var_3 );
}

_id_6B71( var_0 )
{
    var_1 = [];
    var_2 = 0;

    for ( var_3 = var_0; isdefined( var_3 ) && !_id_8AD4( var_3 ); var_3 = var_3 _id_B6A8() )
    {
        var_2++;
        var_4 = var_3 getentitynumber();

        if ( var_2 >= 150 || isdefined( var_1[var_4] ) )
        {
            _id_44AF( var_0, var_3, var_1 );
            return;
        }

        var_1[var_4] = var_3;
    }

    return var_3;
}

_id_68F6( var_0, var_1 )
{
    var_2 = undefined;
    var_3 = [];
    var_4 = [];
    var_5 = [];

    foreach ( var_7 in var_1 )
    {
        if ( !isdefined( var_7 ) || !_id_8AD4( var_7 ) || var_7 == var_0 )
            continue;

        if ( istrue( var_7._id_7245 ) )
        {
            var_4[var_4.size] = var_7;
            continue;
        }

        if ( istrue( var_7._id_82AC ) )
        {
            var_5[var_5.size] = var_7;
            continue;
        }

        var_3[var_3.size] = var_7;
    }

    if ( var_3.size > 0 )
    {
        var_9 = randomint( var_3.size );
        var_2 = var_3[var_9];
    }

    if ( !isdefined( var_2 ) && var_4.size > 0 )
    {
        var_9 = randomint( var_4.size );
        var_2 = var_4[var_9];
    }

    if ( !isdefined( var_2 ) && var_5.size > 0 )
    {
        var_9 = randomint( var_5.size );
        var_2 = var_5[var_9];
    }

    return var_2;
}

_id_8AD4( var_0 )
{
    if ( !isdefined( var_0 ) )
        return 0;

    if ( istrue( scripts\mp\gametypes\br_gametypes::_id_8778( "isValidSpectateTarget" ) ) )
        return scripts\mp\gametypes\br_gametypes::_id_CA17( "isValidSpectateTarget", var_0 );

    if ( !isalive( var_0 ) && ( istrue( var_0._id_7246 ) || !istrue( var_0._id_7245 ) ) )
        return 0;

    return !istrue( var_0._id_2A3D );
}

_id_E30D( var_0 )
{
    var_1 = spawnstruct();

    if ( isdefined( var_0._id_E3E0 ) )
    {
        var_1 = var_0._id_E3E0;
        var_0._id_E3E0 = undefined;
    }
    else
    {
        var_1.origin = var_0.origin + ( 0, 0, 100 );
        var_1.angles = var_0.angles;
    }

    scripts\mp\playerlogic::_id_E30B( var_1, undefined, 0 );
}

_id_E37A( var_0, var_1, var_2 )
{
    if ( scripts\mp\gametypes\br_public::_id_8A9F() )
        return;

    var_3 = self;
    var_3 _id_E30D( var_3 );

    if ( scripts\mp\gametypes\br_gametypes::_id_8839( "teamSpectate" ) )
        return;

    thread scripts\mp\gametypes\br_gulag::_id_B7BD();

    if ( !istrue( var_2 ) )
        var_3 thread _id_F61A();

    var_4 = _id_68FB( var_3, var_0.attacker );
    _id_1CFD( var_3, var_4 );

    if ( !istrue( var_3._id_2A95 ) )
    {
        var_3 notify( "br_spectatorInitialized" );
        var_3._id_2A95 = 1;
    }
}

_id_F61A()
{
    self endon( "disconnect" );
    self endon( "br_team_fully_eliminated" );
    var_0 = scripts\mp\utility\teams::_id_6A3A( self.team, 1 );

    if ( var_0.size > 0 )
    {
        if ( scripts\mp\utility\game::_id_6D80() != "dmz" )
        {
            thread _id_D4A0();
            wait 0.25;
            self setclientomnvar( "ui_br_end_game_splash_type", 5 );
            wait 1.0;
            self setclientomnvar( "ui_br_end_game_splash_type", 0 );
        }
    }
}

_id_D4A0()
{
    self endon( "disconnect" );
    self endon( "br_team_fully_eliminated" );
    self endon( "started_spawnPlayer" );

    if ( scripts\mp\utility\game::getgametype() != "dmz" )
    {
        _id_1096B( self );

        if ( scripts\mp\gametypes\br_public::_id_89E8( self ) )
            return;

        _id_0A70::_id_D5DD( 75 );

        for (;;)
        {
            waittillframeend;

            if ( isdefined( self._id_B7ED ) && istrue( self._id_B7ED._id_7245 ) )
            {
                waitframe();
                continue;
            }

            _id_0A70::_id_D5DD( 75 );
            var_0 = scripts\engine\utility::_id_10896( "buybackRequested", "br_spectator_end_forced_spectator", "playertospectate_set" );

            if ( var_0 == "buybackRequested" )
            {
                _id_0A70::_id_D5DD( 0 );
                wait 10;
            }
        }
    }
}

_id_44B0( var_0, var_1 )
{
    var_2 = "player: " + var_0.name;

    if ( isdefined( var_1 ) )
        var_2 = var_2 + ( ", playerToSpectate: " + var_1.name + ", alive: " + isalive( var_1 ) + ", eliminated: " + istrue( var_1._id_2A3D ) + ", gulag: " + istrue( var_1._id_7245 ) );

    _id_0A78::_id_479A( var_2 );
    waitframe();
    var_2 = "waitframe - playerToSpectate: " + var_1.name + ", alive: " + isalive( var_1 ) + ", eliminated: " + istrue( var_1._id_2A3D ) + ", gulag: " + istrue( var_1._id_7245 );
    _id_0A78::_id_479A( var_2 );
}

_id_B669()
{
    self._id_BBF5 = undefined;
    self._id_A4B0 = undefined;
    self._id_B7ED = undefined;
    self setclientomnvar( "ui_show_spectateHud", -1 );
    self notify( "forcePlayerSpectateTarget" );
    self notify( "playerMonitorSpectatorCycle" );
}

_id_5E97( var_0 )
{
    if ( istrue( level._id_2C16 ) )
        return;

    var_1 = self;
    level endon( "brSpawnPlayersEnding" );
    var_1 endon( "disconnect" );
    var_1 notify( "forcePlayerSpectateTarget" );
    var_1 endon( "forcePlayerSpectateTarget" );
    var_1._id_BBF5 = 1;

    if ( var_1.sessionstate != "intermission" )
    {
        var_2 = var_1 _id_B6A8();

        if ( istrue( var_2._id_10A12 ) )
        {
            var_1 scripts\mp\gametypes\br_gulag::_id_B797( 1 );
            level notify( "update_circle_omnvars" );
        }

        var_1 _id_E30D( var_2 );
    }

    if ( !isdefined( var_0 ) || !isplayer( var_0 ) || !isalive( var_0 ) && !isdefined( var_0._id_EA1B ) )
    {
        if ( level._id_609B || level.players.size == 1 )
        {
            var_1 setclientomnvar( "ui_show_spectateHud", var_1 getentitynumber() );
            var_1._id_BBF5 = undefined;
            return;
        }

        thread _id_44B0( var_1, var_0 );
        var_0 = _id_68FB( var_1 );
    }

    var_0 endon( "disconnect" );
    var_3 = var_0 getentitynumber();
    var_1._id_B7ED = var_0;
    var_1 setclientomnvar( "ui_show_spectateHud", var_3 );

    if ( !var_1 _meth_86A3() )
        var_1 _meth_86A2();

    var_1 _meth_879C( 0.0 );
    var_4 = var_0.origin;

    if ( isdefined( var_0._id_EA1B ) )
    {
        var_4 = var_0._id_EA1B.origin;
        var_1 _meth_86A1( var_4, 1 );
    }
    else
        var_1 _meth_86A1( var_4, 1, 0, var_0 );

    var_1 _meth_8214( var_0 );
    var_5 = var_0 getweaponslistprimaries();
    var_1 loadweaponsforplayer( var_5, 1 );
    waitframe();
    var_6 = getdvarint( "spectate_stream_update_distsq", 2500 );
    var_7 = getdvarint( "spectate_stream_update_time", 500 );
    var_8 = getdvarint( "spectate_stream_timeout", 9000 );
    var_9 = gettime() + var_7;
    var_10 = gettime() + var_8;

    while ( ( !var_1 _meth_86A3() || !var_1 _meth_81A2( var_0 ) || !var_1 _meth_8519( var_5 ) ) && gettime() < var_10 )
    {
        if ( isdefined( var_0 ) && !isdefined( var_0._id_EA1B ) && gettime() > var_9 )
        {
            var_11 = distance2dsquared( var_0.origin, var_4 );

            if ( var_11 > var_6 )
            {
                var_4 = var_0.origin;
                var_1 _meth_86A1( var_4, 1, 0, var_0 );
                var_9 = gettime() + var_7;
            }
        }

        waitframe();
    }

    var_13 = getdvarint( "spectate_stream_update_time", 2000 );
    var_10 = gettime() + var_8;
    var_14 = 0;

    while ( ( isdefined( var_0._id_EA1B ) || !isalive( var_0 ) ) && gettime() < var_10 )
    {
        if ( gettime() > var_14 )
        {
            var_1 _meth_86A1( var_4, 1 );
            var_14 = gettime() + var_13;
        }

        waitframe();
    }

    var_1 _id_B69B( var_0 );
    var_1 thread _id_B70C();
    var_1 _meth_86A2();

    if ( istrue( var_1._id_10A12 ) )
    {
        var_1 scripts\mp\gametypes\br_gulag::_id_B797( 0 );
        level notify( "update_circle_omnvars" );
    }
}

_id_B69B( var_0 )
{
    var_1 = self;
    var_2 = var_0 getentitynumber();
    var_1 scripts\mp\utility\player::_id_FD24( "spectator" );
    var_1._id_01BD = var_2;
    var_1 scripts\mp\utility\player::_id_0BC4( 0 );
    var_1 _meth_87A0( 0.0 );
    var_1 thread scripts\mp\gametypes\br_gulag::_id_B663();
    var_1 setclientomnvar( "ui_show_spectateHud", -1 );
    var_3 = var_1 getspectatingplayer();

    while ( !isdefined( var_3 ) || var_2 != var_3 getentitynumber() )
    {
        waitframe();
        var_3 = var_1 getspectatingplayer();

        if ( !isdefined( var_0 ) || !_id_8AD4( var_0 ) )
            break;
    }

    var_1 notify( "br_spectator_end_forced_spectator" );
    var_1._id_01BD = -1;

    if ( isdefined( var_0 ) && _id_8AD4( var_0 ) )
        var_1 _meth_8604( var_2, 1 );

    var_1._id_BBF5 = undefined;
}

_id_1CFD( var_0, var_1 )
{
    var_0 _meth_8012( "freelook", 0 );
    var_0 _meth_8012( "none", 0 );
    var_0 _meth_876E( 0 );

    if ( level.teambased && isdefined( var_1 ) )
        var_0 _meth_8012( var_1.team, 1 );

    var_0 thread _id_5E97( var_1 );
    self notify( "playertospectate_set" );
}

_id_B70C()
{
    self notify( "playerMonitorSpectatorCycle" );
    self endon( "playerMonitorSpectatorCycle" );
    self endon( "forcePlayerSpectateTarget" );
    self endon( "disconnect" );
    self endon( "started_spawnPlayer" );

    for (;;)
    {
        self waittill( "spectating_cycle_start", var_0 );

        if ( !isdefined( var_0 ) )
            continue;

        if ( var_0 scripts\mp\gametypes\br_gulag::_id_B6D1() )
            scripts\mp\gametypes\br_gulag::_id_B662();

        var_1 = _id_B803( var_0 );
        var_2 = self getspectatingplayer();

        if ( !istrue( var_1 ) || !isdefined( var_2 ) )
        {
            _func_0341( self getentitynumber(), 1 );

            if ( _id_8AD4( self._id_B7ED ) )
            {
                if ( !self._id_B7ED scripts\mp\gametypes\br_gulag::_id_B6D1() )
                    thread scripts\mp\gametypes\br_gulag::_id_B663();

                _id_B69B( self._id_B7ED );
            }
            else
            {
                var_0 = _id_68FB( self );

                if ( !self._id_B7ED scripts\mp\gametypes\br_gulag::_id_B6D1() )
                    thread scripts\mp\gametypes\br_gulag::_id_B663();

                _id_1CFD( self, var_0 );
            }

            continue;
        }

        self._id_B7ED = var_0;

        if ( var_2 != var_0 )
            self._id_B7ED = var_2;

        if ( self._id_B7ED scripts\mp\gametypes\br_gulag::_id_B6D1() )
        {
            if ( !scripts\mp\gametypes\br_gulag::_id_B6D1() )
                scripts\mp\gametypes\br_gulag::_id_B662();

            continue;
        }

        thread scripts\mp\gametypes\br_gulag::_id_B663();
    }
}

_id_B803( var_0 )
{
    var_0 endon( "death_or_disconnect" );
    self waittill( "spectating_cycle" );
    return 1;
}

_id_B6A8()
{
    var_0 = undefined;

    if ( !istrue( self._id_03C4 ) )
        var_0 = self getspectatingplayer();

    if ( !isdefined( var_0 ) && isdefined( self._id_A4B0 ) )
        var_0 = self._id_A4B0;

    if ( !isdefined( var_0 ) && isdefined( self._id_B7ED ) )
        var_0 = self._id_B7ED;

    return var_0;
}

_id_6D4D( var_0 )
{
    var_1 = [];

    foreach ( var_3 in level.players )
    {
        if ( !isdefined( var_3 ) )
            continue;

        if ( _id_8AD4( var_3 ) )
            continue;

        if ( !istrue( var_3._id_2A95 ) )
            continue;

        var_4 = var_3 _id_B6A8();

        if ( !isdefined( var_4 ) )
            continue;

        if ( var_4 == var_0 )
            var_1[var_1.size] = var_3;
    }

    return var_1;
}

_id_9E78( var_0, var_1, var_2 )
{
    if ( !_id_07A8::_id_609F( "prematch_done" ) )
        return;

    var_3 = _id_68FB( var_0, var_1 );

    if ( var_2 && !istrue( var_0._id_7245 ) )
        var_0._id_A4B0 = var_3;

    _id_FC5B( var_0, var_3 );
}

_id_FC5B( var_0, var_1 )
{
    var_2 = _id_6D4D( var_0 );

    foreach ( var_4 in var_2 )
    {
        if ( var_0.team == var_4.team && var_1.team != var_0.team && isdefined( var_0._id_EA1B ) )
        {
            _id_1CFD( var_4, var_0 );
            continue;
        }

        if ( isdefined( var_4._id_A4B0 ) )
        {
            var_4._id_A4B0 = var_1;
            continue;
        }

        _id_1CFD( var_4, var_1 );
    }
}

_id_FBEF()
{
    level endon( "game_ended" );
    _id_07A8::_id_60A3( "prematch_done" );

    for (;;)
    {
        var_0 = [];

        foreach ( var_2 in level.players )
        {
            if ( isdefined( var_2 ) )
            {
                var_3 = var_2 getspectatingplayer();

                if ( isdefined( var_3 ) )
                {
                    var_4 = var_3 getentitynumber();
                    var_0[var_4] = scripts\mp\gametypes\br::_id_64F7( var_0[var_4] ) + 1;
                }
            }
        }

        var_6 = 0;

        foreach ( var_2 in level.players )
        {
            if ( isdefined( var_2 ) )
            {
                var_8 = var_2 getentitynumber();
                var_9 = scripts\mp\gametypes\br::_id_64F7( var_0[var_8] );
                var_2 setclientomnvar( "ui_br_active_spectators", var_9 );
                var_6++;

                if ( var_6 % 10 == 0 )
                    waitframe();
            }
        }

        wait 1.0;
    }
}

_id_48CD( var_0 )
{
    level notify( "devSpectateTest" );
    level endon( "devSpectateTest" );
    var_1 = _id_6A87( var_0 );

    if ( !isdefined( var_1 ) )
        return;

    var_2 = [ scripts\mp\gametypes\br::_id_402F( ( -21500, 46200, -300 ), 0, 6000 ), scripts\mp\gametypes\br::_id_402F( ( 51000, -39000, 1401 ), 0, 4000 ), scripts\mp\gametypes\br::_id_402F( ( 32000, 40000, 767 ), 0, 5500 ), scripts\mp\gametypes\br::_id_402F( ( 23000, -15000, -158 ), 0, 6000 ) ];

    if ( level._id_036A != "mp_donetsk" )
        var_2 = undefined;

    if ( istrue( level._id_FE74 ) )
    {
        foreach ( var_4 in level._id_7245._id_1A97 )
            var_4._id_9BAD = [];

        level._id_7245._id_1A97 = _func_01FF( level._id_7245._id_1A97, level._id_9A9A[0].origin );
        level._id_7245._id_9CA0 = -1;
        level._id_7245._id_F213 = 15;
        setdvar( "scr_br_fc_overtime", 15 );
        setdvar( "scr_br_fc_jailTimeout", 95 );
    }

    _id_07A8::_id_60A2( "prematch_done" );
    level notify( "prematch_over" );
    level._id_9C97 = 3;
    level._id_2A82 = 1;
    level._id_EF85 = 1;
    level._id_4AC7 = 0;
    level._id_7D18 = 0;
    setdvar( "#x3738d0e9e75660aa3", 1 );
    setdvar( "br_minplayers", 150 );
    setdvar( "live_lobby_minplayers_start", 150 );
    setdvar( "scr_br_fc_forceArena", -1 );
    setdvar( "scr_br_spectateMinStreamWaitDebug", 0 );
    setdvar( "scr_br_gulag_win_hold", 0 );

    foreach ( var_7 in level.players )
    {
        if ( var_7 _meth_878C() )
        {
            var_7 allowmovement( 0 );
            var_7 allowfire( 0 );
            var_7 allowmelee( 0 );
        }

        var_7._id_2A3B = undefined;
        var_7._id_7245 = undefined;
        var_7._id_8B42 = undefined;
        var_7._id_7246 = undefined;
        var_7._id_B7ED = undefined;
        var_7._id_A4B0 = undefined;
        var_7._id_725D = undefined;
        var_7._id_726B = undefined;
        var_7._id_97B5 = undefined;
        var_7 notify( "gulag_end" );
        var_7 notify( "last_stand_revived" );
        var_7 notify( "last_stand_start" );
        var_7 _meth_87A0( 0.0 );
        var_7._id_D6CF = undefined;
    }

    if ( !isdefined( level._id_48CC ) )
        level._id_48CC = [];

    if ( !isdefined( level._id_48CA ) )
    {
        for ( var_9 = 0; var_9 < level._id_EF86.size; var_9++ )
        {
            var_10 = level._id_EF86[var_9];

            if ( var_10 != var_1.team )
            {
                if ( !isdefined( level._id_48CA ) )
                {
                    level._id_48CA = var_10;
                    continue;
                }

                level._id_48CB = var_10;
                break;
            }
        }
    }

    _id_C7DF( var_1, var_1.team );
    _id_C7DF( var_1, level._id_48CA );
    _id_C7DF( var_1, level._id_48CB );
    var_11 = _id_6DBE( var_1, var_1.team );
    var_12 = _id_6DBE( var_1, level._id_48CA );
    var_13 = _id_6DBE( var_1, level._id_48CB );

    if ( isdefined( var_2 ) )
    {
        for ( var_9 = 0; var_9 < var_11.size; var_9++ )
        {
            var_14 = var_11[var_9];
            var_15 = var_12[var_9];
            var_16 = var_13[var_9];
            var_17 = var_2[var_9];
            var_18 = 0;
            var_14 _id_B7E3( var_17, var_18 );
            var_18++;
            var_15 _id_B7E3( var_17, var_18 );
            var_18++;
            var_16 _id_B7E3( var_17, var_18 );
        }
    }

    level._id_4AC7 = 1;
    var_1 iprintlnbold( "Test ready" );
    wait 2;

    if ( _id_1AE8( var_0, "killcam1" ) || _id_1AE8( var_0, "killchain" ) || _id_1AE8( var_0, "disconnect1" ) || _id_1AE8( var_0, "disconnect2" ) || _id_1AE8( var_0, "disconnect3" ) )
    {
        _id_8D79( var_1, var_1, var_12 );

        if ( _id_1AE8( var_0, "disconnect2" ) )
        {
            while ( var_1.sessionstate != "intermission" )
                waitframe();

            while ( var_1.sessionstate == "intermission" )
                waitframe();
        }
        else if ( _id_1AE8( var_0, "disconnect3" ) )
        {
            while ( var_1.sessionstate != "intermission" )
                waitframe();

            wait 0.5;
        }
        else
        {
            _id_1096B( var_1 );
            wait 3;

            if ( _id_1AE8( var_0, "disconnect1" ) )
            {
                var_1 iprintlnbold( "Waiting" );
                wait 10;
            }
        }
    }

    if ( _id_1AE8( var_0, "disconnect1" ) || _id_1AE8( var_0, "disconnect2" ) || _id_1AE8( var_0, "disconnect3" ) )
    {
        var_19 = var_1 _id_B6A8();
        _func_012D( var_19 getentitynumber(), "EXE/PLAYERKICKED_BOT_BALANCE" );
    }

    if ( _id_1AE8( var_0, "killchain" ) )
    {
        for ( var_19 = var_1 _id_B6A8(); !isdefined( var_19 ); var_19 = var_1 _id_B6A8() )
            waitframe();

        _id_8D79( var_1, var_19, var_12 );
        _id_1096B( var_1 );
        wait 3;
    }

    if ( _id_1AE8( var_0, "killchain" ) )
    {
        for ( var_19 = var_1 _id_B6A8(); !isdefined( var_19 ); var_19 = var_1 _id_B6A8() )
            waitframe();

        _id_8D79( var_1, var_19, var_12 );
        _id_1096B( var_1 );
        wait 3;
    }

    if ( _id_1AE8( var_0, "killchain" ) )
    {
        for ( var_19 = var_1 _id_B6A8(); !isdefined( var_19 ); var_19 = var_1 _id_B6A8() )
            waitframe();

        _id_8D79( var_1, var_19, var_13 );
        _id_1096B( var_1 );
        wait 3;
    }

    if ( _id_1AE8( var_0, "killchain" ) )
    {
        for ( var_19 = var_1 _id_B6A8(); !isdefined( var_19 ); var_19 = var_1 _id_B6A8() )
            waitframe();

        _id_8D79( var_1, var_19, var_13 );
        _id_1096B( var_1 );
        wait 3;
    }

    if ( _id_1AE8( var_0, "killchain" ) )
    {
        for ( var_19 = var_1 _id_B6A8(); !isdefined( var_19 ); var_19 = var_1 _id_B6A8() )
            waitframe();

        _id_8D79( var_1, var_19, var_13 );
        _id_1096B( var_1 );
        wait 3;
    }

    if ( _id_1AE8( var_0, "gulag1" ) )
    {
        foreach ( var_7 in var_11 )
        {
            if ( var_7 != var_1 )
            {
                var_7._id_2A3B = 1;
                _id_8D79( var_1, var_7, var_12 );
            }
        }

        wait 10;
        _id_8D79( var_1, var_1, var_12 );
    }

    if ( _id_1AE8( var_0, "gulag2" ) || _id_1AE8( var_0, "gulag3" ) )
    {
        _id_8D79( var_1, var_1, var_12 );
        var_1 waittill( "killcam_ended" );
        wait 2;

        foreach ( var_7 in var_11 )
        {
            if ( var_7 != var_1 )
            {
                var_7._id_2A3B = 1;
                _id_8D79( var_1, var_7, var_12 );
            }
        }

        while ( !isdefined( var_1 getspectatingplayer() ) )
            waitframe();

        var_24 = var_1 getspectatingplayer();
        var_24._id_2A3B = 1;
        wait 1;

        foreach ( var_7 in var_12 )
        {
            var_7._id_2A3B = 1;
            _id_8D79( var_1, var_7, var_13 );
        }

        while ( !istrue( var_24._id_7246 ) )
            waitframe();

        wait 5;

        if ( _id_1AE8( var_0, "gulag2" ) )
        {
            var_27 = spawnstruct();
            var_27._id_B7BE = ( 26474, -16709, -162 );
            var_27._id_B7B8 = ( 85, 135, 0 );
            var_24._id_D6CF = var_27;

            foreach ( var_7 in var_12 )
            {
                if ( istrue( var_7._id_7246 ) )
                {
                    var_7._id_2A3B = 1;
                    _id_8D79( var_1, var_7, var_13 );
                    break;
                }
            }

            while ( !var_24 _meth_81CB() )
                waitframe();

            while ( var_24 _meth_81CB() )
                waitframe();

            waitframe();
            var_30 = var_24 getplayerangles();
            var_24 setplayerangles( ( 85, var_30[1], 0 ) );
        }
        else
            _id_8D79( var_1, var_24, var_13 );
    }

    if ( _id_1AE8( var_0, "gulag4" ) )
    {
        var_1._id_2A3B = 1;
        var_31 = _id_8D79( var_1, var_1, var_12 );
        var_31._id_2A3B = 1;
        _id_8D79( var_1, var_31, var_11 );
    }

    if ( _id_1AE8( var_0, "gulaggulag" ) )
    {
        var_32 = getdvarint( "scr_br_fc_arena1", 0 );
        var_33 = getdvarint( "scr_br_fc_arena2", 5 );
        setdvar( "scr_br_fc_jailTimeout", 9999 );
        setdvar( "scr_br_fc_forceArena", var_32 );
        var_1._id_2A3B = 1;
        var_31 = _id_8D79( var_1, var_1, var_12 );
        setdvar( "scr_br_fc_forceArena", var_33 );

        foreach ( var_7 in var_11 )
        {
            if ( var_7 != var_1 )
            {
                var_7._id_2A3B = 1;
                _id_8D79( var_1, var_7, var_12 );
            }
        }

        setdvar( "scr_br_fc_forceArena", var_32 );
        var_31._id_2A3B = 1;
        _id_8D79( var_1, var_31, var_13 );

        while ( !istrue( var_1._id_7246 ) && !istrue( var_31._id_7246 ) )
            waitframe();

        wait 5;
        _id_8D79( var_1, var_1, undefined, var_31 );
        setdvar( "scr_br_fc_jailTimeout", 90 );
    }

    if ( _id_1AE8( var_0, "killkill" ) )
    {
        var_31 = var_12[0];

        foreach ( var_7 in var_11 )
        {
            if ( var_7 != var_1 )
                _id_8D79( var_1, var_7, undefined, var_31 );
        }

        _id_8D79( var_1, var_31, undefined, var_1 );
        wait 10;
        _id_8D79( var_1, var_1, undefined, var_31 );
    }

    if ( _id_1AE8( var_0, "killcam2" ) )
    {
        var_31 = _id_8D79( var_1, var_1, var_12 );
        wait 3;
        _id_8D79( var_1, var_1._id_A4B0, var_12 );
    }

    if ( _id_1AE8( var_0, "gulag5" ) || _id_1AE8( var_0, "gulag6" ) )
    {
        var_38 = undefined;

        foreach ( var_7 in var_11 )
        {
            if ( !isdefined( var_38 ) && var_7 != var_1 )
            {
                var_38 = var_7;
                continue;
            }

            _id_8D79( var_1, var_7, var_12 );
            _id_1096B( var_7 );
        }

        var_38._id_2A3B = 1;

        if ( _id_1AE8( var_0, "gulag6" ) )
        {
            setdvar( "scr_br_fc_jailTimeout", 9999 );
            var_32 = getdvarint( "scr_br_fc_arena1", 5 );
            setdvar( "scr_br_fc_forceArena", var_32 );
            var_38._id_97B5 = 1;
        }

        _id_8D79( var_1, var_38, var_12 );
    }

    if ( _id_1AE8( var_0, "gulag7" ) )
    {
        _id_8D79( var_1, var_1, var_12 );
        var_1 waittill( "killcam_ended" );
        wait 2;
        var_41 = undefined;

        foreach ( var_7 in var_11 )
        {
            if ( var_7 != var_1 )
            {
                var_7._id_2A3B = 1;
                var_41 = var_7;
                var_41 scripts\mp\gametypes\br_gulag::_id_824B();
                break;
            }
        }

        while ( !isdefined( var_1 getspectatingplayer() ) )
            waitframe();

        wait 1;
        var_44 = undefined;

        foreach ( var_7 in var_12 )
        {
            var_7._id_2A3B = 1;
            var_44 = var_7;
            _id_8D79( var_1, var_7, var_13 );
            break;
        }

        while ( !istrue( var_41._id_7246 ) && !istrue( var_44._id_7246 ) )
            waitframe();

        wait 5;
        setdvar( "scr_br_gulag_win_hold", 1 );
        _id_8D79( var_1, var_44, undefined, var_41 );

        while ( var_1 getspectatingplayer() != var_41 )
            wait 1;

        wait 5;
        setdvar( "scr_br_gulag_win_hold", 0 );
    }

    if ( _id_1AE8( var_0, "gulag8" ) )
    {
        level._id_7245._id_F213 = 3;
        setdvar( "scr_br_fc_overtime", 3 );
        setdvar( "scr_br_fc_jailTimeout", -1 );
        _id_8D79( var_1, var_1, var_12 );
        var_1 waittill( "killcam_ended" );
        wait 2;
        var_41 = undefined;

        foreach ( var_7 in var_11 )
        {
            if ( var_7 != var_1 )
            {
                var_7._id_2A3B = 1;
                var_41 = var_7;
                var_41 scripts\mp\gametypes\br_gulag::_id_824B();
                break;
            }
        }

        while ( !isdefined( var_1 getspectatingplayer() ) )
            waitframe();

        while ( var_1 getspectatingplayer() != var_41 )
        {
            iprintlnbold( "Switch to spectating gulag player" );
            waitframe();
        }

        wait 1;
        var_44 = undefined;

        foreach ( var_7 in var_12 )
        {
            var_7._id_2A3B = 1;
            var_44 = var_7;
            _id_8D79( var_1, var_7, var_13 );
            break;
        }
    }

    if ( _id_1AE8( var_0, "twooneframe" ) )
    {
        foreach ( var_7 in var_11 )
        {
            if ( var_7 != var_1 )
            {
                _id_8D79( var_1, var_7, var_12 );
                break;
            }
        }

        wait 5;

        foreach ( var_7 in var_11 )
        {
            if ( isalive( var_7 ) )
                _id_8D7A( var_1, var_7, var_12 );
        }
    }

    if ( _id_1AE8( var_0, "suicide" ) )
    {
        foreach ( var_7 in var_11 )
        {
            if ( var_7 != var_1 )
                _id_8D79( var_1, var_7, var_12 );
        }

        wait 5;

        if ( var_1 scripts\mp\utility\perk::_hasperk( "specialty_pistoldeath" ) )
            var_1 scripts\mp\utility\perk::removeperk( "specialty_pistoldeath" );

        var_1 suicide();
    }

    if ( _id_1AE8( var_0, "team" ) )
    {
        foreach ( var_7 in var_11 )
        {
            if ( var_7 != var_1 )
                _id_8D7A( var_1, var_7, var_12 );
        }
    }

    if ( _id_1AE8( var_0, "moving" ) )
    {
        _id_8D7A( var_1, var_1, var_12 );

        while ( !isdefined( var_1._id_B7ED ) )
            waitframe();

        var_7 = var_1._id_B7ED;
        var_59 = anglestoforward( var_7.angles );
        var_60 = getdvarint( "testforward", 5 );

        for ( var_61 = var_1 getspectatingplayer(); !isdefined( var_61 ); var_61 = var_1 getspectatingplayer() )
        {
            var_62 = var_7.origin + var_59 * var_60;
            var_7 setorigin( var_62 );
            waitframe();
        }
    }

    if ( _id_1AE8( var_0, "heli1" ) || _id_1AE8( var_0, "heli2" ) )
    {
        var_24 = undefined;

        foreach ( var_7 in var_11 )
        {
            if ( var_7 != var_1 )
            {
                if ( !isdefined( var_24 ) )
                {
                    var_24 = var_7;
                    continue;
                }

                _id_8D7A( var_1, var_7, var_12 );
            }
        }

        wait 1;
        _id_8D7A( var_1, var_1, var_12 );
        _id_1096B( var_1 );
        wait 1;
        var_65 = getarraykeys( level._id_FFF1._id_82E6["little_bird"] );
        var_66 = level._id_FFF1._id_82E6["little_bird"][var_65[0]];
        var_67 = var_66 _meth_86E8();
        var_24 setorigin( var_66.origin );
        wait 1;
        _id_09B8::_id_10107( var_67, "single", "vehicle_use", var_24, 0 );

        if ( _id_1AE8( var_0, "heli2" ) )
        {
            wait 3;
            _func_012D( var_24 getentitynumber(), "EXE/PLAYERKICKED_BOT_BALANCE" );
        }
    }

    if ( _id_1AE8( var_0, "water" ) )
        var_1 setorigin( ( 28252, -32627, -415 ) );

    if ( _id_1AE8( var_0, "disconnectswitch1" ) )
    {
        _id_8D7A( var_1, var_1, var_12 );
        _id_1096B( var_1 );
        var_24 = var_1 _id_B6A8();

        while ( !var_1 _meth_805D( "BUTTON_RSHLDR" ) )
            waitframe();

        var_68 = undefined;

        foreach ( var_7 in var_11 )
        {
            if ( var_7 != var_1 && var_7 != var_24 )
            {
                var_68 = var_7;
                break;
            }
        }

        wait 0.5;
        _func_012D( var_68 getentitynumber(), "EXE/PLAYERKICKED_BOT_BALANCE" );
    }

    if ( _id_1AE8( var_0, "disconnectswitch2" ) )
    {
        _id_8D7A( var_1, var_1, var_12 );
        _id_1096B( var_1 );
        var_24 = var_1 _id_B6A8();

        while ( !var_1 _meth_805D( "BUTTON_RSHLDR" ) )
            waitframe();

        wait 0.5;
        _func_012D( var_24 getentitynumber(), "EXE/PLAYERKICKED_BOT_BALANCE" );
    }

    if ( _id_1AE8( var_0, "endspectate" ) )
    {
        level._id_2A3A = 1;
        setdvar( "br_minplayers", 2 );
        level._id_7245._id_9CA0 = 0;
        wait 1;
        _id_8D7A( var_1, var_1, var_12 );
        _id_1096B( var_1 );
        wait 2;

        foreach ( var_7 in var_11 )
        {
            if ( var_7 != var_1 )
                _id_8D7A( var_1, var_7, var_12 );
        }

        _id_1096B( var_1 );
        wait 2;
        var_31 = var_1 _id_B6A8();
        _id_8D7A( var_1, var_31, var_13 );
        _id_1096B( var_1 );
        wait 2;
        var_31 = var_1 _id_B6A8();
        _id_8D7A( var_1, var_31, var_13 );
        _id_1096B( var_1 );
        wait 2;
        var_31 = var_1 _id_B6A8();
        _id_8D7A( var_1, var_31, var_13 );
        _id_1096B( var_1 );
        wait 2;
    }

    if ( _id_1AE8( var_0, "teamwipe" ) )
    {
        setdvar( "scr_br_spectateMinStreamWaitDebug", 5 );

        foreach ( var_7 in var_11 )
        {
            if ( var_7 != var_1 )
                _id_8D7A( var_1, var_7, var_12 );
        }

        wait( getdvarfloat( "test_teamwipe", 5 ) );
        var_31 = _id_8D7A( var_1, var_1, var_12 );
        wait( getdvarfloat( "test_teamwipe2", 13 ) );
        _id_8D7A( var_1, var_31, var_13 );
    }

    if ( _id_1AE8( var_0, "deathswitch1" ) )
    {
        setdvar( "scr_br_spectateMinStreamWaitDebug", 5 );
        _id_8D7A( var_1, var_1, var_12 );
        _id_1096B( var_1 );
        var_24 = var_1 _id_B6A8();

        while ( !var_1 _meth_805D( "BUTTON_RSHLDR" ) )
            waitframe();

        var_68 = undefined;

        foreach ( var_7 in var_11 )
        {
            if ( var_7 != var_1 && var_7 != var_24 )
            {
                var_68 = var_7;
                break;
            }
        }

        wait 0.5;
        _id_8D7A( var_1, var_68, var_12 );
    }

    if ( _id_1AE8( var_0, "squadwidget" ) )
    {
        setdvar( "scr_br_fc_jailTimeout", 9999 );
        setdvar( "scr_br_spectateMinStreamWaitDebug", 3 );

        foreach ( var_7 in var_11 )
        {
            if ( var_7 != var_1 )
                _func_012D( var_7 getentitynumber(), "EXE/PLAYERKICKED_BOT_BALANCE" );
        }

        wait 5;
        var_79 = var_12[0];
        var_80 = var_12[1];
        var_79._id_2A3B = 1;
        _id_8D7A( var_1, var_79, undefined, var_1 );
        wait( getdvarfloat( "test_squadwidget", 4 ) );
        _id_8D7A( var_1, var_1, undefined, var_80 );
    }
}

_id_B7E3( var_0, var_1 )
{
    var_2 = self getentitynumber();

    if ( isdefined( level._id_48CC[var_2] ) )
        var_0 = level._id_48CC[var_2];
    else
        level._id_48CC[var_2] = var_0;

    if ( self _meth_878C() )
    {
        self allowmovement( 0 );
        self allowfire( 0 );
        self allowmelee( 0 );
    }

    var_3 = anglestoforward( ( 0, 0, 0 ) );
    var_4 = var_0.origin + var_3 * ( var_1 * 50 );
    var_5 = getgroundposition( var_4, 15, 100 );
    self setorigin( var_5 );
    self setplayerangles( ( 0, 0, 0 ) );
}

_id_8D79( var_0, var_1, var_2, var_3 )
{
    if ( !isdefined( var_3 ) )
        var_3 = _id_6B51( var_0, var_1.origin, var_2 );

    var_1 dodamage( 500, var_3.origin, var_3, undefined, "MOD_EXPLOSIVE", var_3 getcurrentprimaryweapon() );
    wait 1;

    while ( isalive( var_1 ) )
    {
        var_1 dodamage( 500, var_3.origin, var_3, undefined, "MOD_EXPLOSIVE", var_3 getcurrentprimaryweapon() );
        waitframe();
    }

    return var_3;
}

_id_8D7A( var_0, var_1, var_2, var_3 )
{
    if ( !isdefined( var_3 ) )
        var_3 = _id_6B51( var_0, var_1.origin, var_2 );

    if ( var_1 scripts\mp\utility\perk::_hasperk( "specialty_pistoldeath" ) )
        var_1 scripts\mp\utility\perk::removeperk( "specialty_pistoldeath" );

    var_1 dodamage( 500, var_3.origin, var_3, undefined, "MOD_EXPLOSIVE", var_3 getcurrentprimaryweapon() );
    return var_3;
}

_id_1096B( var_0 )
{
    while ( var_0.sessionstate != "intermission" )
        waitframe();

    while ( var_0.sessionstate == "intermission" )
        waitframe();

    while ( var_0.sessionstate != "spectator" )
        waitframe();
}

_id_6B51( var_0, var_1, var_2 )
{
    var_2 = _func_01FF( var_2, var_1 );

    if ( isalive( var_2[0] ) )
    {
        var_3 = distance2dsquared( var_1, var_2[0].origin );

        if ( var_3 < 40000 )
            return var_2[0];
    }

    var_4 = undefined;

    for ( var_5 = 1; var_5 < var_2.size; var_5++ )
    {
        var_6 = var_2[var_5];

        if ( isalive( var_6 ) )
        {
            var_4 = var_6;
            break;
        }
    }

    return var_4;
}

_id_6A87( var_0 )
{
    if ( isdefined( level._id_48CE ) )
        return level._id_48CE;

    var_1 = scripts\mp\gamelogic::_id_6A88();

    if ( _id_1AE8( var_0, "clientHost" ) )
    {
        foreach ( var_3 in level.players )
        {
            if ( !isai( var_3 ) && !var_3 _meth_878C() && ( !isdefined( var_1 ) || var_3 != var_1 ) )
            {
                var_1 = var_3;
                break;
            }
        }
    }
    else if ( !isdefined( var_1 ) )
    {
        foreach ( var_3 in level.players )
        {
            if ( !isai( var_3 ) && !var_3 _meth_878C() )
            {
                level._id_48CE = var_3;
                var_1 = var_3;
                break;
            }
        }
    }
    else
        level._id_9C97 = 3;

    if ( !isdefined( level._id_48CE ) )
        level._id_48CE = var_1;

    return var_1;
}

_id_1AE8( var_0, var_1 )
{
    foreach ( var_3 in var_0 )
    {
        if ( var_3 == var_1 )
            return 1;
    }

    return 0;
}

_id_C7DF( var_0, var_1 )
{
    var_2 = level._id_EF67[var_1]["players"];
    var_3 = 0;

    foreach ( var_5 in var_2 )
    {
        if ( !isalive( var_5 ) || var_5.sessionstate != "playing" )
        {
            var_6 = var_5 getentitynumber();

            if ( isdefined( level._id_48CC[var_6] ) )
            {
                var_5._id_5EA2 = ( 0, 0, 0 );
                var_5._id_5EA7 = level._id_48CC[var_6].origin;
            }
            else
            {
                var_5._id_5EA2 = var_5.angles;
                var_5._id_5EA7 = var_5.origin;
            }

            var_5 _id_E284( 0 );
            var_3 = 1;
        }

        var_5._id_2A3D = undefined;
    }

    if ( var_3 )
    {
        var_0 iprintlnbold( "Reviving Team: " + var_1 );
        wait 1.0;
    }
}

_id_6DBE( var_0, var_1 )
{
    var_2 = 0;

    if ( level._id_EF67[var_1]["teamCount"] < level._id_9C97 )
        var_2 = level._id_9C97 - level._id_EF67[var_1]["teamCount"];

    if ( var_2 > 0 )
    {
        level._id_9FDC = ::_id_E284;
        var_3 = level.players.size;
        _id_106B( var_2, var_1 );
        var_0 iprintlnbold( "Spawning Team: " + var_1 );
        var_4 = gettime() + 10000;

        while ( gettime() < var_4 && level._id_EF67[var_1]["aliveCount"] < level._id_9C97 )
            waitframe();

        level._id_9FDC = scripts\mp\gametypes\br::_id_E283;
    }

    return level._id_EF67[var_1]["alivePlayers"];
}

_id_106B( var_0, var_1 )
{
    setdvar( "#x3b1bd17b1a6dd9a6b", "1" );

    if ( !isdefined( var_1 ) )
        var_1 = "autoassign";

    level thread [[ level._id_2777["bots_spawn"] ]]( var_0, var_1 );

    if ( level._id_9BB4 )
        _func_01DA( "hasBots", 1 );
}

_id_E284( var_0 )
{
    self.class = scripts\mp\gametypes\br::_id_B061();
    self.pers["class"] = self.class;
    scripts\mp\playerlogic::_id_E334( undefined, 0 );
    self freezecontrols( 1 );
    waitframe();
    self _meth_86B0( 0 );
    self _meth_86B1( 0 );
    var_1 = !self _meth_878C();

    if ( var_1 )
    {
        while ( isalive( self ) && isdefined( self._id_10DA7 ) && !self _meth_8519( self._id_10DA7 ) )
            waitframe();
    }

    self notify( "brWaitAndSpawnClientComplete" );
    self._id_10847 = 0;
    self freezecontrols( 0 );
}
