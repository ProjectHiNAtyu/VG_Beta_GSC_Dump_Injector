// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_0271()
{
    _id_07B3::_id_021D();
    _id_07B3::_id_D849();
    var_0[0] = _id_0A69::_id_6A43();
    _id_07AD::_id_0271( var_0 );

    if ( isusingmatchrulesdata() )
    {
        level._id_81CB = ::_id_81CB;
        [[ level._id_81CB ]]();
        level thread _id_0A69::_id_C2DD();
    }
    else
    {
        _id_0A69::registersharedfunc( _id_0A69::_id_6A43(), 600 );
        _id_0A69::_id_C29F( _id_0A69::_id_6A43(), 30 );
        _id_0A69::_id_C2C2( _id_0A69::_id_6A43(), 1 );
        _id_0A69::_id_C29B( _id_0A69::_id_6A43(), 1 );
        _id_0A69::_id_C270( _id_0A69::_id_6A43(), 0 );
        _id_0A69::_id_C24F( _id_0A69::_id_6A43(), 0 );
    }

    _id_FC7A();
    level._id_AB9A = ::_id_AB9A;
    level._id_AB46 = ::_id_AB46;
    level._id_6D2C = ::_id_6D2C;
    level._id_9FD5 = ::_id_AB91;
    level._id_AB2C = ::_id_AB2C;
    level._id_AB62 = ::_id_AB62;
    level._id_4950 = 0;
    _func_01F0( "ffa" );

    if ( istrue( level._id_18F6 ) )
    {
        level._id_2DCE = ::_id_1631;
        _func_01E5( "ui_skip_loadout", 1 );
        _id_D6D5();
        game["dialog"]["gametype"] = "allornothing";
    }
    else
        game["dialog"]["gametype"] = "gametype_ffa";

    if ( getdvarint( "#x33b8132c2bbd3f240" ) )
        game["dialog"]["gametype"] = "hc_" + game["dialog"]["gametype"];
    else if ( getdvarint( "#x3863d66ab814c070" ) )
        game["dialog"]["gametype"] = "thirdp_" + game["dialog"]["gametype"];

    game["dialog"]["ffa_lead_first"] = "gamestate_lead";
    game["dialog"]["ffa_lead_second"] = "gamestate_second";
    game["dialog"]["ffa_lead_third"] = "gamestate_third";
    game["dialog"]["ffa_lead_last"] = "gamestate_last";
    game["dialog"]["offense_obj"] = "hint_killall";
    game["dialog"]["defense_obj"] = "hint_ffa";
}

_id_1631()
{
    return "gamemode";
}

_id_81CB()
{
    _id_0A69::_id_D4D3( 1 );
    _func_01D2( "scr_dm_aonrules", getmatchrulesdata( "dmData", "aonRules" ) );
    _func_01D2( "scr_dm_scoreontargetplayer", getmatchrulesdata( "dmData", "scoreOnTargetPlayer" ) );
    _func_01D2( "scr_dm_targetplayercycle", getmatchrulesdata( "dmData", "targetPlayerCycle" ) );
    _func_01D2( "scr_dm_showtargettime", getmatchrulesdata( "dmData", "showTargetTime" ) );
    _func_01D2( "scr_dm_winlimit", 1 );
    _id_0A69::_id_C2C2( "dm", 1 );
    _func_01D2( "scr_dm_roundlimit", 1 );
    _id_0A69::_id_C29B( "dm", 1 );
    _func_01D2( "scr_dm_halftime", 0 );
    _id_0A69::_id_C24F( "dm", 0 );
}

_id_AB9A()
{
    _func_01CE( "auto_change" );

    foreach ( var_1 in level._id_EF86 )
    {
        _id_0A69::_id_D610( var_1, &"OBJECTIVES/DM" );

        if ( level._id_E427 )
            _id_0A69::_id_D60E( var_1, &"OBJECTIVES/DM" );
        else
            _id_0A69::_id_D60E( var_1, &"OBJECTIVES/DM_SCORE" );

        _id_0A69::_id_D609( var_1, &"OBJECTIVES/DM_HINT" );
    }

    _id_07EE::_id_D454( "FreeForAll", "Crit_Default" );
    level._id_E324 = ( 0, 0, 0 );
    level._id_E321 = ( 0, 0, 0 );
    _id_07EE::_id_1111( "mp_dm_spawn_start", 1 );
    _id_07EE::_id_110D( "allies", "mp_dm_spawn" );
    _id_07EE::_id_110D( "allies", "mp_dm_spawn_secondary", 1, 1 );
    _id_07EE::_id_110D( "axis", "mp_dm_spawn" );
    _id_07EE::_id_110D( "axis", "mp_dm_spawn_secondary", 1, 1 );
    _id_07EE::_id_C2AB( "dm", "mp_dm_spawn" );
    _id_07EE::_id_C2AB( "dm_fallback", "mp_dm_spawn_secondary" );
    level._id_9A95 = _id_07EE::_id_5AC1( level._id_E324, level._id_E321 );
    setgameendtime( level._id_9A95 );
    level._id_BEE8 = 1;
}

_id_FC7A()
{
    scripts\mp\gametypes\common::_id_FC36();
    level._id_18F6 = _id_0A66::_id_507C( "aonRules", 0, 0, 2 );
    level._id_CC02 = _id_0A66::_id_507C( "scoreOnTargetPlayer", 0, 0, 1 );
    level._id_EEF1 = _id_0A66::_id_507C( "targetPlayerCycle", 0, 0, 1 );
    level._id_DCEB = _id_0A66::_id_507C( "showTargetTime", 1, 0, 6 );

    switch ( level._id_DCEB )
    {
        case 0:
            level._id_A8FF = 60.0;
            break;
        case 1:
            level._id_A8FF = 0.05;
            break;
        case 2:
            level._id_A8FF = 1.0;
            break;
        case 3:
            level._id_A8FF = 1.5;
            break;
        case 4:
            level._id_A8FF = 2.0;
            break;
        case 5:
            level._id_A8FF = 3.0;
            break;
        case 6:
            level._id_A8FF = 4.0;
            break;
    }

    if ( level._id_18F6 > 0 )
    {
        level._id_2582 = 1;
        level._id_15B0 = _func_01D0( "scr_dm_allowSupers", 0 );
    }
    else
        level notify( "cancel_loadweapons" );
}

_id_6D2C()
{
    var_0 = undefined;

    if ( level._id_7E95 )
    {
        var_1 = _id_07EE::_id_6D30( "mp_dm_spawn_start" );

        if ( var_1.size > 0 )
        {
            if ( !isdefined( level._id_C57C ) )
            {

            }

            var_0 = _id_07EE::_id_6D2F( var_1, 1 );
        }

        if ( !isdefined( var_0 ) )
        {
            var_1 = _id_07EE::_id_6DBF( self._id_045B );
            var_0 = _id_07EF::_id_6D6B( var_1 );
        }
    }
    else
        var_0 = _id_07EE::_id_6D2C( self, "none", "dm", "dm_fallback" );

    return var_0;
}

_id_AB91()
{
    self _meth_82F6( "ui_match_status_hint_text", 0 );

    if ( level._id_18F6 > 0 )
        thread _id_AB8E();

    if ( level._id_CC02 )
    {
        if ( !isdefined( self._id_EF0D ) )
        {
            thread getstructarray();
            thread _id_A44A();
        }
    }

    level notify( "spawned_player" );
}

_id_AB2C( var_0, var_1, var_2, var_3, var_4, var_5 )
{
    scripts\mp\gametypes\common::_id_AA76( var_0, var_1, var_2, var_3, var_4, var_5 );

    if ( level._id_18F6 > 0 )
    {

    }

    var_6 = 0;

    foreach ( var_8 in level._id_B758 )
    {
        if ( isdefined( var_8._id_0369 ) && var_8._id_0369 > var_6 )
            var_6 = var_8._id_0369;
    }

    if ( !level._id_4950 )
    {
        if ( var_1._id_0369 >= int( level._id_CBFC * level._id_41C9 - level._id_CBFC / 2 ) )
            thread _id_4CCF( var_1 );
    }

    if ( var_1._id_0369 == level._id_CBFC - 2 )
        level._id_8CC3 = 1;

    var_10 = var_1 _id_0A7B::_id_6C0A( "killChains" );

    if ( isdefined( var_10 ) )
        var_1 _id_0A7B::_id_D544( var_10 );
}

_id_AB62( var_0, var_1, var_2, var_3 )
{
    var_1 _id_0A7B::_id_7D93( "gamemodeScore", var_2 );
    var_4 = int( var_1 _id_0A7B::_id_6C0A( "gamemodeScore" ) );
    var_1 scripts\mp\gamelogic::_id_E76D( "round", "gamemodeScore", var_4 );

    if ( var_1._id_0309["cur_kill_streak"] > var_1 _id_0A7B::_id_6C0A( "killChains" ) )
    {
        var_1._id_0309["killChains"] = var_1._id_0309["cur_kill_streak"];
        var_1 _id_0A7B::_id_D544( var_1._id_0309["cur_kill_streak"] );
    }

    if ( _func_0121( var_0, "super_" ) )
        return 0;

    if ( _func_0121( var_0, "kill_ss" ) )
        return 0;

    if ( _func_0121( var_0, "kill" ) )
    {
        if ( level._id_CC02 )
        {
            if ( var_3 != var_1._id_EF0D )
                return 0;
            else
            {
                var_1 notify( "target_eliminated" );
                var_1._id_EF0D = undefined;
                var_1 thread getstructarray();
                var_1 thread _id_A44A();
            }
        }

        var_5 = _id_07E1::_id_6CEE( "score_increment" );
        return var_5;
    }
    else if ( var_0 == "assist_ffa" )
        var_1 _id_0A78::_id_2C79( "earned_score_buffered", var_2 );

    return 0;
}

_id_4CCF( var_0 )
{
    var_0 _id_0A64::_id_9120( "ffa_lead_first" );
    var_1 = _id_077B::_id_1BAE( level._id_B758, ::_id_3AD2 );

    if ( isdefined( var_1[1] ) )
        var_1[1] _id_0A64::_id_9120( "ffa_lead_second" );

    if ( isdefined( var_1[2] ) && var_1.size > 2 )
        var_1[2] _id_0A64::_id_9120( "ffa_lead_third" );

    if ( isdefined( var_1[var_1.size - 1] ) && var_1.size > 3 )
        var_1[var_1.size - 1] _id_0A64::_id_9120( "ffa_lead_last" );

    level._id_4950 = 1;
}

_id_3AD2( var_0, var_1 )
{
    return var_0._id_0369 >= var_1._id_0369;
}

_id_AB8E()
{
    self endon( "death_or_disconnect" );
    self waittill( "giveLoadout" );
    _id_CA14();
}

_id_D6D5()
{
    level._id_18F3["allies"]["loadoutPrimary"] = "s4_pi_mike1911";
    level._id_18F3["allies"]["loadoutPrimaryAttachment"] = "none";
    level._id_18F3["allies"]["loadoutPrimaryAttachment2"] = "none";
    level._id_18F3["allies"]["loadoutPrimaryCamo"] = "none";
    level._id_18F3["allies"]["loadoutPrimaryReticle"] = "none";
    level._id_18F3["allies"]["loadoutSecondary"] = "none";
    level._id_18F3["allies"]["loadoutSecondaryAttachment"] = "none";
    level._id_18F3["allies"]["loadoutSecondaryAttachment2"] = "none";
    level._id_18F3["allies"]["loadoutSecondaryCamo"] = "none";
    level._id_18F3["allies"]["loadoutSecondaryReticle"] = "none";
    level._id_18F3["allies"]["loadoutEquipmentPrimary"] = "equip_throwing_knife";
    level._id_18F3["allies"]["loadoutEquipmentSecondary"] = "none";
    level._id_18F3["allies"]["loadoutSuper"] = "none";
    level._id_18F3["allies"]["loadoutStreakType"] = "assault";
    level._id_18F3["allies"]["loadoutKillstreak1"] = "none";
    level._id_18F3["allies"]["loadoutKillstreak2"] = "none";
    level._id_18F3["allies"]["loadoutKillstreak3"] = "none";
    level._id_18F3["allies"]["loadoutPerks"] = [ "specialty_fastreload" ];
    level._id_18F3["allies"]["loadoutGesture"] = "playerData";
    level._id_18F3["axis"] = level._id_18F3["allies"];
}

_id_CA14()
{
    _id_6F79();

    if ( level._id_18F6 == 2 )
        self._id_9648 = "archetype_assault";

    if ( !istrue( _id_0999::_id_89D2() ) )
        _id_6D03( self._id_9648 );

    self._id_18F4 = 0;
    self._id_18F5 = 0;
    var_0 = self._id_965F;
    self switchtoweaponimmediate();
    waittillframeend;
    self giveweapon( "iw7_g18_mpr_aon_fixed" );
    self giveweapon( "s4_me_knife_mp" );
    self _meth_8513( "s4_me_knife_mp" );
    self giveweapon( "s4_me_knife_mp" );
    self _meth_819C( "iw7_g18_mpr_aon_fixed" );

    if ( isdefined( var_0 ) )
    {
        _id_099A::_id_0BEB( var_0 );
        self _meth_8564( var_0 );
        self._id_62D2 = var_0;
    }

    scripts\engine\trace::_id_38F9();
    var_1 = "primary";

    if ( level._id_18F6 == 2 )
        scripts\engine\trace::_id_6F76( "power_blinkKnife", var_1 );
    else
        scripts\engine\trace::_id_6F76( "equip_throwing_knife", var_1 );

    _id_099A::_id_4D21( "iw7_g18_mpr_aon_fixed", 1 );
}

_id_6F79()
{
    var_0 = [ "specialty_blindeye", "specialty_gpsjammer", "specialty_falldamage", "specialty_sharp_focus", "specialty_stalker" ];

    foreach ( var_2 in var_0 )
        scripts\mp\tac_ops\hostage_utility::_id_6FA5( var_2 );
}

_id_6D03( var_0 )
{
    switch ( var_0 )
    {
        case "archetype_assault":
            var_0 = "assault_mp";
            break;
        default:
            if ( !isdefined( level._id_18F6 ) || level._id_18F6 == 0 )
            {

            }

            var_0 = "assault_mp";
            break;
    }

    _id_0A74::_id_0CC7( var_0 + "_classic" );
}

_id_AB46( var_0 )
{
    if ( level._id_18F6 > 0 )
    {
        if ( level._id_1595 )
            level._id_1595 = 0;

        var_0._id_0309["class"] = "gamemode";
        var_0._id_0309["lastClass"] = "";
        var_0._id_37D9 = var_0._id_0309["class"];
        var_0._id_8F98 = var_0._id_0309["lastClass"];
        var_0._id_0309["gamemodeLoadout"] = level._id_18F3["allies"];
        var_0 _meth_8518( [ "iw7_g18_mpr_aon_fixed", "iw8_knife_mp" ], 1 );
    }
}

getstructarray()
{
    level endon( "game_ended" );
    self notify( "get_target" );
    self endon( "get_target" );

    if ( !_id_07A8::_id_609F( "prematch_done" ) )
        level waittill( "prematch_done" );

    var_0 = 0;

    if ( !isdefined( self._id_EE97 ) || !level._id_EEF1 )
    {
        self._id_EE97 = [];
        self._id_EEA7 = 0;
        var_0 = 1;

        foreach ( var_2 in level._id_B758 )
        {
            if ( var_2 == self )
                continue;
            else
                self._id_EE97[self._id_EE97.size] = var_2;
        }
    }

    if ( self._id_EE97.size > 0 )
    {
        if ( !level._id_EEF1 )
            self._id_EEA7 = _func_01B8( self._id_EE97.size );
        else
        {
            if ( !var_0 )
                self._id_EEA7++;

            if ( self._id_EEA7 == self._id_EE97.size )
                self._id_EEA7 = 0;
        }
    }

    self._id_EF0D = self._id_EE97[self._id_EEA7];

    if ( !isdefined( self._id_EF0D ) )
    {
        waitframe();
        thread getstructarray();
        thread _id_A44A();
        return;
    }

    waitframe();

    if ( level._id_DCEB != 0 )
    {
        self._id_411F = self._id_02EA;
        self._id_A96B = ( 0, 0, 10 );
        _id_07AD::_id_C56B( 1, 1 );
        var_4 = self._id_A8F5;
        _func_0162( var_4, "MP_INGAME_ONLY/OBJ_TARGET_CAPS" );
        _func_015D( var_4, 90 );
        _func_015B( var_4, "hud_icon_targeted_player_cir" );
        _func_016D( var_4, 1 );
        _id_07D0::_id_A892( var_4, self );
        _func_0175( var_4, 2 );
        _func_015F( var_4, self._id_411F );
        _func_0166( var_4, "current" );
        _id_07D0::_id_FB90( var_4, self._id_EF0D );
        _func_017C( var_4, self._id_EF0D );

        if ( level._id_DCEB > 1 )
            thread _id_FD51();
    }

    thread _id_EF0E();
}

_id_EF0E()
{
    level endon( "game_ended" );
    self waittill( "target_eliminated" );
    thread _id_07B9::_id_DCE0( "target_eliminated", _id_07E1::_id_6CEE( "kill" ) );
    _func_0166( self._id_A8F5, "done" );
    _id_07AD::_id_C2F2();
}

_id_FD51()
{
    level endon( "game_ended" );
    self._id_EF0D endon( "disconnect" );
    self endon( "target_eliminated" );
    thread _id_FD4F();
    _func_018B( self._id_A8F5, 1 );

    if ( !isdefined( level._id_A8FF ) )
        level._id_A8FF = 3.0;

    for (;;)
    {
        if ( isdefined( self._id_EF0D ) )
        {
            _id_07D0::_id_FB94( self._id_A8F5, self._id_411F + self._id_A96B );
            _func_018A( self._id_A8F5 );
            wait( level._id_A8FF );
            continue;
        }

        waitframe();
    }
}

_id_FD4F()
{
    level endon( "game_ended" );
    self._id_EF0D endon( "disconnect" );
    self endon( "target_eliminated" );

    for (;;)
    {
        if ( isdefined( self._id_EF0D ) )
            self._id_411F = self._id_EF0D._id_02EA + ( 0, 0, 90 );

        waitframe();
    }
}

_id_A44A()
{
    level endon( "game_ended" );
    self notify( "endDeathWatcher" );
    self endon( "endDeathWatcher" );

    if ( !_id_07A8::_id_609F( "prematch_done" ) )
        level waittill( "prematch_done" );

    wait 2.5;

    if ( isdefined( self._id_EF0D ) )
        self iprintlnbold( &"MP/DM_NEW_TARGET", self._id_EF0D._id_02BA );
}
