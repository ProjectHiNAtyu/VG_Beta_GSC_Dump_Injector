// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{

}

main()
{
    _id_07B3::init();
    _id_07B3::_id_D849();
    arenatournament_set_default_dvars();

    if ( isusingmatchrulesdata() )
    {
        level._id_81CB = ::_id_81CB;
        [[ level._id_81CB ]]();
        level thread scripts\mp\utility\game::_id_C2DD();
    }
    else
    {
        scripts\mp\utility\game::_id_C29C( level.gametype, 0, 0, 9 );
        scripts\mp\utility\game::_id_C2B3( level.gametype, 10 );
        scripts\mp\utility\game::_id_C29F( level.gametype, 75 );
        scripts\mp\utility\game::_id_C29B( level.gametype, 1 );
        scripts\mp\utility\game::_id_C2C2( level.gametype, 1 );
        scripts\mp\utility\game::_id_C270( level.gametype, 0 );
        scripts\mp\utility\game::_id_C24F( level.gametype, 0 );
        level._id_9BD4 = 0;
        level._id_9BD9 = 0;
    }

    _id_FC7A();

    if ( scripts\cp_mp\utility\game_utility::_id_6B0E() != "mp_arena_evo" )
        return;

    level._id_2582 = 1;
    level.watchafkwaitflag = "ch_tutorial_done";
    level._id_14F0 = "mp_arena_spawn_allies_start";
    level._id_1FC7 = "mp_arena_spawn_axis_start";
    level._id_BB91 = scripts\mp\gametypes\arena_evo_tourney_util::arena_evo_playerprematchallow;
    level._id_AD29 = ::_id_A425;

    if ( isdefined( level._id_2254 ) )
        level thread [[ level._id_2254 ]]();

    level thread _id_0783::_id_1876();
    scripts\engine\utility::_id_0FB3( "flare_fanfare_lrg_1", "vfx/s4/flare/flare_fanfare_blue_lrg" );
    scripts\engine\utility::_id_0FB3( "flare_fanfare_lrg_2", "vfx/s4/flare/flare_fanfare_green_lrg" );
    scripts\engine\utility::_id_0FB3( "flare_fanfare_lrg_3", "vfx/s4/flare/flare_fanfare_yellow_lrg" );
    scripts\engine\utility::_id_0FB3( "flare_fanfare_lrg_4", "vfx/s4/flare/flare_fanfare_lrg" );
    level thread scripts\mp\gametypes\arena_evo_tourney::init();
    level._id_E2E7 = 0;
    level._id_ABAF = 0.0;
    level._id_41E2 = 0.0;
    level._id_318F = 0;
    level._id_ABAD = ::_id_ABAD;
    level._id_AB9A = ::_id_AB9A;
    level._id_AB46 = ::_id_AB46;
    level._id_6D2C = scripts\mp\gametypes\arena_evo_tourney::_id_1AA8;
    level._id_AB5D = scripts\mp\gametypes\arena_evo_tourney::_id_1A9F;
    level._id_AD2A = scripts\mp\gametypes\arena_evo_tourney_loot::_id_AD2A;
    level._id_1A65 = [];
    game["dialog"]["intro_dialog_00"] = "mp_glob_chvo_bchr_int0";
    game["dialog"]["intro_dialog_01"] = "mp_glob_chvo_bchr_int1";
    game["dialog"]["intro_dialog_02"] = "mp_glob_chvo_bchr_int2";
    game["dialog"]["intro_dialog_03"] = "mp_glob_chvo_bchr_int3";
    game["dialog"]["intro_buy_dialog_01"] = "mp_glob_chvo_bchr_chb1";
    game["dialog"]["intro_buy_dialog_02"] = "mp_glob_chvo_bchr_chb2";
    game["dialog"]["intro_buy_dialog_03"] = "mp_glob_chvo_bchr_chb3";
    game["dialog"]["intro_buy_dialog_04"] = "mp_glob_chvo_bchr_chb4";
    game["dialog"]["champion_hill_start"] = "mp_glob_chvo_bchr_i3in";
    game["dialog"]["arena_evo_matchup_first"] = "mp_glob_chvo_bchr_chnm";
    game["dialog"]["keep_fighting"] = "mp_glob_chvo_bchr_z319";
    game["dialog"]["arena_evo_took_points_from_enemy"] = "mp_glob_chvo_bchr_chat";
    game["dialog"]["arena_evo_enemy_took_your_points"] = "mp_glob_chvo_bchr_chdt";
    game["dialog"]["arena_evo_matchup_2"] = "mp_glob_chvo_bchr_chm2";
    game["dialog"]["mod_card_activated"] = "mp_glob_chvo_bchr_mcac";
    game["dialog"]["large_amount_teams_remaining"] = "mp_glob_chvo_bchr_latm";
    game["dialog"]["medium_amount_teams_remaining"] = "mp_glob_chvo_bchr_matr";
    game["dialog"]["small_amount_teams_remaining"] = "mp_glob_chvo_bchr_satr";
    game["dialog"]["large_amount_lives_remaining"] = "mp_glob_chvo_bchr_latr";
    game["dialog"]["medium_amount_lives_remaining"] = "mp_glob_chvo_bchr_malr";
    game["dialog"]["small_amount_lives_remaining"] = "mp_glob_chvo_bchr_salr";
    game["dialog"]["last_life"] = "mp_glob_chvo_bchr_chll";
    game["dialog"]["new_location"] = "mp_glob_chvo_bchr_nwlc";
    game["dialog"]["final_matchup"] = "mp_glob_chvo_bchr_flmh_01";
    game["dialog"]["team_eliminated"] = "mp_glob_chvo_bchr_felm";
    game["dialog"]["you_are_eliminated"] = "mp_glob_chvo_bchr_yelm";
    game["dialog"]["new_round"] = "mp_glob_chvo_bchr_nwrd";
    game["dialog"]["almost_won"] = "mp_glob_chvo_bchr_alwn";
    game["dialog"]["you_won"] = "mp_glob_chvo_bchr_yuwn";
    game["dialog"]["eliminated_other"] = "mp_glob_chvo_bchr_elmt";
    game["dialog"]["securing_flag"] = "mp_glob_chvo_bchr_z169";
    game["dialog"]["losing_flag"] = "mp_glob_chvo_bchr_z170";
    game["dialog"]["buy_round_reminder"] = "mp_glob_chvo_bchr_z195";
    game["dialog"]["mid_match_buy"] = "mp_glob_chvo_bchr_z191";
    game["dialog"]["first_legendary"] = "mp_glob_chvo_bchr_z173";
    game["dialog"]["finished_off"] = "mp_glob_chvo_bchr_z171";
    game["dialog"]["last_man_standing"] = "mp_glob_chvo_bchr_z189";
    game["dialog"]["buy_round_10_seconds"] = "mp_glob_chvo_bchr_z175";
    game["dialog"]["10_seconds"] = "mp_glob_chvo_bchr_tslt";
    game["dialog"]["ch_5_lives_left"] = "mp_glob_chvo_bchr_5lvs";
    game["dialog"]["ch_4_lives_left"] = "mp_glob_chvo_bchr_4lvs";
    game["dialog"]["ch_3_lives_left"] = "mp_glob_chvo_bchr_3lvs";
    game["dialog"]["ch_2_lives_left"] = "mp_glob_chvo_bchr_2lvs";
    game["dialog"]["ch_1_lives_left"] = "mp_glob_chvo_bchr_1lvs";
    game["dialog"]["eliminated_team_1"] = "mp_glob_chvo_bchr_eet1";
    game["dialog"]["eliminated_team_2"] = "mp_glob_chvo_bchr_eet2";
    game["dialog"]["eliminated_team_3"] = "mp_glob_chvo_bchr_eet3";
    game["dialog"]["eliminated_team_4"] = "mp_glob_chvo_bchr_eet4";
    game["dialog"]["eliminated_team_5"] = "mp_glob_chvo_bchr_eet5";
    game["dialog"]["eliminated_team_6"] = "mp_glob_chvo_bchr_eet6";
    game["dialog"]["eliminated_team_7"] = "mp_glob_chvo_bchr_eet7";
    game["dialog"]["eliminated_team_8"] = "mp_glob_chvo_bchr_eet8";
    game["dialog"]["elimination_team_1"] = "mp_glob_chvo_bchr_t1we";
    game["dialog"]["elimination_team_2"] = "mp_glob_chvo_bchr_t2we";
    game["dialog"]["elimination_team_3"] = "mp_glob_chvo_bchr_t3we";
    game["dialog"]["elimination_team_4"] = "mp_glob_chvo_bchr_t4we";
    game["dialog"]["elimination_team_5"] = "mp_glob_chvo_bchr_t5we";
    game["dialog"]["elimination_team_6"] = "mp_glob_chvo_bchr_t6we";
    game["dialog"]["elimination_team_7"] = "mp_glob_chvo_bchr_t7we";
    game["dialog"]["elimination_team_8"] = "mp_glob_chvo_bchr_t8we";
    game["dialog"]["killstreak_activated"] = "mp_glob_chvo_bchr_ksac";
    arena_evo_set_random_loadout_active();
}

arenatournament_set_default_dvars()
{
    _func_01D2( "scr_supers_killswitch", 1 );
    _func_01D2( "scr_loadoutPerksOff", 1 );
    _func_01D2( "scr_player_healthregentime", 5 );
    _func_01D2( "scr_arena_evo_healthregentime", 5 );
    _func_01D2( "#x3a3c5e0af2fc96867", 1 );
    _func_01D2( "scr_skipclasschoice", 1 );
    _func_01D2( "#x3d1f178b765a74a81", 1 );
    _func_01D2( "#x33db2f988d14fc953", 1 );

    if ( !scripts\mp\utility\game::_id_9BB3() )
        _func_01D2( "scr_lightArmor_max", 75 );
}

grantexp_onsquadeliminated( var_0, var_1 )
{
    [var_3, var_4, var_5] = calculatearenaevobonusxp( var_1 );
    var_6 = scripts\mp\gametypes\arena_evo_tourney_util::_id_668A( var_0 );

    foreach ( var_8 in var_6 )
    {
        if ( isdefined( var_8 ) )
        {
            var_8 givearenaevobonusxp( var_3, undefined, "squadEliminated" );
            var_8._id_9B91 = var_4;
            var_8._id_B15A = var_5;
            var_8 scripts\mp\gametypes\arena_evo_tourney_util::set_xp_omnvars();
        }
    }
}

grantexp_onplayerdisconnectgiveexp( var_0 )
{

}

grantexp_onsquadwin( var_0 )
{
    [var_2, var_3, var_4] = calculatearenaevobonusxp( 1 );
    var_5 = scripts\mp\gametypes\arena_evo_tourney_util::_id_668A( var_0 );

    foreach ( var_7 in var_5 )
    {
        if ( isdefined( var_7 ) )
        {
            var_7 givearenaevobonusxp( var_2, undefined, "winner" );
            var_7._id_9B91 = var_3;
            var_7._id_B15A = var_4;
        }
    }
}

grantexp_onendofgame( var_0 )
{
    [var_2, var_3, var_4] = calculatearenaevobonusxp( 1 );
    var_5 = scripts\mp\gametypes\arena_evo_tourney_util::_id_668A( var_0 );

    foreach ( var_7 in var_5 )
    {
        if ( isdefined( var_7 ) )
        {
            var_7 givearenaevobonusxp( var_2, undefined, "endGame" );
            var_7._id_9B91 = var_3;
            var_7._id_B15A = var_4;
            var_7 scripts\mp\gametypes\arena_evo_tourney_util::set_xp_omnvars();
        }
    }
}

calculatearenaevobonusxp( var_0 )
{
    if ( !_id_07A8::_id_609F( "prematch_done" ) )
        return 0;

    if ( !isdefined( level._id_10FD9 ) )
        level._id_10FD9 = scripts\mp\gametypes\arena_evo_tourney_util::_id_631B().size;

    if ( !isdefined( level._id_10FD5 ) )
    {
        var_1 = getdvarint( "scr_arena_evo_placement_XP_share", 500 );
        level._id_10FD5 = var_1;
    }

    var_2 = getdvarfloat( "scr_arena_evo_time_XP_milisecond", 0.0039 );
    var_3 = gettime() - level._id_E700;
    var_4 = int( var_2 * var_3 + 0.5 );
    var_5 = level._id_10FD5 * ( level._id_10FD9 - var_0 + 1 );
    var_6 = var_4 + var_5;
    return [ var_6, var_4, var_5 ];
}

givearenaevobonusxp( var_0, var_1, var_2 )
{
    if ( !isdefined( self ) || isbot( self ) || _func_03D5( self ) )
        return;

    if ( !game["timePassed"] )
        return;

    if ( !( scripts\mp\utility\game::_id_9BB3() || getdvarint( "#x3e4c9c054a2b21552" ) ) )
        return;

    if ( scripts\engine\utility::is_equal( self.arenaevobonusxpallowed, 0 ) )
        return;

    var_3 = 0;
    var_4 = 0;

    if ( !isdefined( var_2 ) )
        var_2 = "undefined";

    switch ( var_2 )
    {
        case "disconnect":
            var_3 = 1;
            var_4 = 1;
            break;
        case "squadEliminated":
            var_3 = 1;
            var_4 = 1;
            break;
        case "endGame":
        case "winner":
            var_3 = 1;
            var_4 = 1;
            break;
        case "undefined":
        default:
            var_3 = 0;
            var_4 = 1;
            break;
    }

    scripts\mp\rank::_id_6FC0( "arena_evo_timeXPBonus", var_0, var_1, var_3, var_4 );
    self.arenaevobonusxpallowed = 0;
}

arena_evo_set_random_loadout_active()
{
    var_0 = getdvar( "arena_evo_weapon_set_list_random", "3" );
    var_1 = strtok( var_0, "," );
    var_2 = int( scripts\engine\utility::random( var_1 ) );
    setomnvar( "ui_arena_evo_loadout_select", var_2 );
}

_id_81CB()
{
    scripts\mp\utility\game::_id_D4D3();
    _func_01D2( "scr_game_lethalDelay", 0 );
    var_0 = getdvarint( "scr_" + scripts\mp\utility\game::getgametype() + "_override_teamsize", -1 );

    if ( var_0 > 0 )
    {
        _func_01D2( "scr_" + scripts\mp\utility\game::getgametype() + "_teamsize", var_0 );
        _func_01D2( "scr_" + scripts\mp\utility\game::getgametype() + "_squadsize", var_0 );
    }

    _func_01D2( "scr_" + scripts\mp\utility\game::getgametype() + "_roundswitch", 0 );
    scripts\mp\utility\game::_id_C29C( scripts\mp\utility\game::getgametype(), 0, 0, 9 );
    _func_01D2( "scr_" + scripts\mp\utility\game::getgametype() + "_roundlimit", 1 );
    scripts\mp\utility\game::_id_C29B( scripts\mp\utility\game::getgametype(), 1 );
    _func_01D2( "scr_" + scripts\mp\utility\game::getgametype() + "_winlimit", 1 );
    scripts\mp\utility\game::_id_C2C2( scripts\mp\utility\game::getgametype(), 1 );
    _func_01D2( "scr_" + scripts\mp\utility\game::getgametype() + "_halftime", 0 );
    scripts\mp\utility\game::_id_C24F( scripts\mp\utility\game::getgametype(), 0 );
    _func_01D2( "scr_arena_evo_mod_cards_enabled", getmatchrulesdata( "arenaEvoData", "modCards" ) );
}

_id_FC7A()
{
    scripts\mp\gametypes\common::_id_FC36();
}

_id_AB46( var_0 )
{
    if ( istrue( level._id_1595 ) )
        level._id_1595 = 0;

    foreach ( var_3, var_2 in level._id_1A67 )
        var_0 scripts\mp\gametypes\arena_evo_tourney_loot::_id_0C07( var_3 + "_mp" );

    var_0 setclientomnvar( "ui_skip_loadout", 1 );
    level thread scripts\mp\gametypes\arena_evo_tourney::_id_1AB2( var_0 );

    if ( !istrue( level._id_1A5C ) && var_0 _meth_876B( "ui_arena_ui_state" ) != 4 )
        var_0 setclientomnvar( "ui_arena_ui_state", 4 );
}

_id_AB9A()
{
    if ( getdvarint( "scr_arena_evo_respawn_mode", 1 ) )
        _id_0A66::_id_D627( "numlives", 0 );

    level._id_7629 = 5;
    level._id_762C = level._id_7629 <= 0;
    level._id_B6BF = level._id_7629;
    _id_07A8::_id_60A1( "ch_tutorial_done", 0 );
    scripts\mp\gametypes\arena_evo_tourney::_id_1AAE();
}

_id_ABAD()
{
    if ( level._id_609B )
        return;
}

_id_1A47( var_0 )
{
    level._id_1A7D = [];

    if ( var_0 != "tie" )
    {
        level thread _id_0A64::_id_9122( "you_won", scripts\mp\gametypes\arena_evo_tourney_util::_id_668A( var_0 ), "gametype" );
        var_1 = level._id_1A45;
        level._id_1A7D = [ var_0 ];
    }
    else
        var_1 = [];

    if ( isdefined( var_1 ) && var_1.size > 0 )
    {
        if ( var_1.size >= 1 )
        {
            var_2 = var_1[var_1.size - 1];
            level thread _id_0A64::_id_9122( "almost_won", scripts\mp\gametypes\arena_evo_tourney_util::_id_668A( var_2 ), "gametype" );
            level._id_1A7D[level._id_1A7D.size] = var_2;
        }

        if ( var_1.size >= 2 )
        {
            var_3 = var_1[var_1.size - 2];
            level thread _id_0A64::_id_9122( "almost_won", scripts\mp\gametypes\arena_evo_tourney_util::_id_668A( var_3 ), "gametype" );
            level._id_1A7D[level._id_1A7D.size] = var_3;
        }
    }

    if ( isdefined( var_0 ) && var_0 != "tie" )
    {
        var_4 = scripts\mp\gametypes\arena_evo_tourney_util::_id_631B().size;
        setomnvar( "ui_arena_elim_order" + var_4, scripts\mp\gametypes\arena_evo_tourney_util::_id_67A0( var_0 ) + 1 );
    }

    foreach ( var_6 in level.players )
        var_6 scripts\mp\gametypes\arena_evo_tourney_util::_id_FD41();

    grantexp_onsquadwin( var_0 );

    if ( var_0 == "tie" )
    {
        foreach ( var_9 in scripts\mp\gametypes\arena_evo_tourney_util::_id_67AB() )
        {
            if ( !scripts\engine\utility::is_equal( var_9, var_0 ) )
                grantexp_onendofgame( var_9 );
        }
    }

    level._id_5E70 = 1;
    setomnvar( "ui_match_over", 1 );
    thread scripts\mp\gamelogic::_id_52D7( var_0, game["end_reason"][tolower( game[game["defenders"]] ) + "_eliminated"] );
}

_id_A425()
{
    level waittill( "forever" );
}
