// S4 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_6D9B( var_0 )
{
    var_1 = self _meth_8176() + ( 0, 0, -3 );
    var_2 = ( var_1[0] - var_0[0], var_1[1] - var_0[1], var_1[2] - var_0[2] );
    var_2 = vectornormalize( var_2 );
    var_3 = var_2[2] * -1;
    return var_3;
}

_id_6CCC()
{
    var_0 = ( gettime() - self._id_0DB6._id_902A ) / 1000;
    var_1 = _id_6918();

    if ( var_1 > var_0 )
        return var_1 - var_0;

    return 0;
}

_id_6918()
{
    if ( scripts\anim\utility_common::_id_8ABB() )
        return randomfloatrange( 0.15, 0.55 );
    else if ( scripts\anim\utility_common::_id_10D10() )
        return randomfloatrange( 1.0, 1.7 );
    else if ( scripts\anim\utility_common::_id_10CF7() )
        return _id_08C8::_id_714E();
    else if ( scripts\anim\utility_common::_id_874C() )
        return _id_08C8::_id_6D1A();
    else if ( self._id_599A )
        return randomfloatrange( 0.1, 0.35 );
    else
        return randomfloatrange( 0.2, 0.4 );
}

_id_DA38()
{

}

_id_6E03()
{
    anim._id_187F++;
    return anim._id_187F;
}

#using_animtree("generic_human");

_id_D839( var_0 )
{
    self _meth_82D8( %exposed_aiming, 1, 0.2 );

    if ( scripts\engine\utility::_id_0F4F() )
        self _meth_831A( "exposed_aim", scripts\anim\utility::_id_184A( "straight_level" ), 1, var_0 );
    else
        self _meth_82DF( scripts\anim\utility::_id_184A( "straight_level" ), 1, var_0 );

    self _meth_82DF( scripts\anim\utility::_id_184A( "add_aim_up" ), 1, var_0 );
    self _meth_82DF( scripts\anim\utility::_id_184A( "add_aim_down" ), 1, var_0 );
    self _meth_82DF( scripts\anim\utility::_id_184A( "add_aim_left" ), 1, var_0 );
    self _meth_82DF( scripts\anim\utility::_id_184A( "add_aim_right" ), 1, var_0 );
    self._id_586F = scripts\anim\face::_id_B821( undefined, "aim", self._id_586F );
}

_id_8A1F()
{
    if ( _func_0268( self._id_04CE ) > 0 )
        return 0;
    else if ( weaponfiretime( self._id_04CE ) || _func_02EC( self._id_04CE ) )
        return 0;

    return 1;
}

_id_DA58( var_0 )
{
    if ( !scripts\anim\utility_common::_id_10D10() )
        return;

    self endon( "killanimscript" );
    self notify( "shotgun_pump_sound_end" );
    self endon( "shotgun_pump_sound_end" );
    thread _id_E939( 2.0 );
    self waittillmatch( var_0, "rechamber" );
    self playsound( "ai_shotgun_pump" );
    self notify( "shotgun_pump_sound_end" );
}

_id_E939( var_0 )
{
    self endon( "killanimscript" );
    self endon( "shotgun_pump_sound_end" );
    wait( var_0 );
    self notify( "shotgun_pump_sound_end" );
}

_id_C0F2( var_0 )
{

}

_id_BE60()
{
    self endon( "weapon_switch_done" );
    self endon( "death" );
    self waittill( "killanimscript" );
    scripts\anim\shared::_id_B16B( self._id_0326, "right" );
}

_id_0342( var_0, var_1 )
{

}

_id_108D( var_0, var_1 )
{
    if ( !isdefined( anim._id_7162 ) )
    {
        anim._id_7162 = [];
        anim._id_7165 = [];
    }

    var_2 = anim._id_7162.size;
    anim._id_7162[var_2] = var_0;
    anim._id_7165[var_2] = var_1;
}

_id_818A()
{

}

_id_6A5D( var_0 )
{
    var_1 = ( 0, 0, 64 );
    return var_1;
}

_id_F18F()
{
    for ( var_0 = 0; var_0 < level.players.size; var_0++ )
    {
        if ( level.players[var_0]._id_A775 == 0 )
        {
            level.players[var_0]._id_7167["frag"] = 0;
            level.players[var_0]._id_7167["flash_grenade"] = 0;
            level.players[var_0]._id_7167["seeker"] = 0;
        }
    }

    anim._id_F18E = 1;
}

_id_D451( var_0 )
{
    self._id_0F1A = spawnstruct();

    if ( isplayer( var_0 ) )
    {
        self._id_0F1A._id_8988 = 1;
        self._id_0F1A.player = var_0;
        self._id_0F1A._id_F259 = self._id_01F1.basename;
    }
    else
    {
        self._id_0F1A._id_8988 = 0;
        self._id_0F1A._id_F259 = "AI_" + self._id_01F1.basename;
    }
}

_id_FF15()
{
    return self._id_0F1A._id_8988;
}

_id_D570( var_0, var_1 )
{
    if ( var_0._id_8988 )
    {
        var_2 = var_0.player;
        var_3 = var_2._id_7167[var_0._id_F259];
        var_2._id_7167[var_0._id_F259] = max( var_1, var_3 );
    }
    else
    {
        var_3 = anim._id_7167[var_0._id_F259];
        anim._id_7167[var_0._id_F259] = max( var_1, var_3 );
    }
}

_id_69BC()
{
    var_0 = undefined;

    if ( _id_FF15() )
    {
        var_1 = self._id_0F1A.player;
        var_0 = gettime() + var_1._id_7218._id_B6AE + randomint( var_1._id_7218._id_B6AF );
    }
    else
        var_0 = gettime() + 30000 + randomint( 30000 );

    return var_0;
}

_id_6A5E( var_0 )
{
    if ( var_0._id_8988 )
        return var_0.player._id_7167[var_0._id_F259];
    else
        return anim._id_7167[var_0._id_F259];
}

_id_9CB7( var_0 )
{
    if ( scripts\engine\utility::_id_B401() )
        return 0;

    if ( !var_0._id_7218._id_4E75 )
        return 0;

    var_1 = gettime();

    if ( var_1 < var_0._id_7167["double_grenade"] )
        return 0;

    if ( var_1 > var_0._id_8FC0 + 3000 )
        return 0;

    if ( var_1 < var_0._id_8FC0 + 500 )
        return 0;

    return var_0._id_A775 < 2;
}

_id_A35E()
{
    return gettime() >= self._id_0DB6._id_A491;
}

_id_7140( var_0 )
{
    if ( scripts\engine\utility::_id_B401() )
        return 0;

    if ( self._id_CD4A == 1 )
        return 1;

    if ( !_id_A35E() )
        return 0;

    if ( gettime() >= _id_6A5E( self._id_0F1A ) )
        return 1;

    if ( self._id_0F1A._id_8988 && self._id_0F1A._id_F259 == "fraggrenade" )
        return _id_9CB7( var_0 );

    return 0;
}

_id_F743( var_0, var_1, var_2, var_3 )
{
    if ( !self _meth_81C2( var_0, var_1 ) )
        return 0;
    else if ( distancesquared( self.origin, var_1 ) < 40000 )
        return 0;

    var_4 = _func_0193( var_1 + ( 0, 0, 1 ), var_1 + ( 0, 0, -500 ) );

    if ( var_4 == var_1 + ( 0, 0, -500 ) )
        return 0;

    var_4 = var_4 + ( 0, 0, 0.1 );
    return _id_F744( var_0, var_4, var_2, var_3 );
}

_id_F744( var_0, var_1, var_2, var_3, var_4, var_5, var_6 )
{

}

_id_C16D( var_0 )
{
    self endon( "dont_reduce_giptp_on_killanimscript" );
    self waittill( "killanimscript" );
    var_0._id_A775--;
}

_id_4CAE( var_0, var_1, var_2, var_3 )
{
    self endon( "killanimscript" );

    if ( !self._id_0062 )
        self _meth_8250( "face direction", var_1 );

    scripts\anim\battlechatter_wrapper::_id_564C( self._id_01F1.basename );
    self notify( "stop_aiming_at_enemy" );
    self _meth_8319( "throwanim", var_0, %body, _id_599D(), 0.1, 1 );
    thread scripts\anim\notetracks::_id_4D44( "throwanim", "killanimscript" );
    var_4 = scripts\anim\utility_common::_id_6A5C();
    var_5 = "none";

    for (;;)
    {
        self waittill( "throwanim", var_6 );

        if ( var_6 == "grenade_left" || var_6 == "grenade_right" )
        {
            var_5 = _id_1D61( var_4, "TAG_INHAND" );
            self._id_888C = 1;
        }

        if ( var_6 == "grenade_throw" || var_6 == "grenade throw" )
            break;

        if ( var_6 == "end" )
        {
            self._id_0F1A.player._id_A775--;
            self notify( "dont_reduce_giptp_on_killanimscript" );
            return 0;
        }
    }

    self notify( "dont_reduce_giptp_on_killanimscript" );

    if ( _id_FF15() )
        thread _id_10B70( self._id_0F1A.player, var_2 );

    self _meth_840C();

    if ( !_id_FF15() )
        _id_D570( self._id_0F1A, var_2 );

    if ( var_3 && self._id_0F1A._id_8988 )
    {
        var_13 = self._id_0F1A.player;

        if ( var_13._id_A775 > 1 || gettime() - var_13._id_8FC6 < 2000 )
            var_13._id_7167["double_grenade"] = gettime() + min( 5000, var_13._id_7218._id_B687 );
    }

    self notify( "stop grenade check" );

    if ( var_5 != "none" )
        self detach( var_4, var_5 );
    else
    {

    }

    self._id_888C = undefined;
    self._id_01EE = self._id_AA1C;
    self._id_AA1C = undefined;
    self waittillmatch( "throwanim", "end" );
    self notify( "done_grenade_throw" );
    self notify( "weapon_switch_done" );
    self _meth_82D8( %exposed_modern, 1, 0.2 );
    self _meth_82D8( %exposed_aiming, 1 );
    self _meth_85ED( var_0, 0.2 );
}

_id_10B70( var_0, var_1 )
{
    var_0 endon( "death" );
    _id_10B71( var_1 );
    var_0._id_A775--;
}

_id_10B71( var_0 )
{
    var_1 = self._id_0F1A;
    var_2 = spawnstruct();
    var_2 thread _id_10B72( 5 );
    var_2 endon( "watchGrenadeTowardsPlayerTimeout" );
    var_3 = self._id_01F1.basename;
    var_4 = _id_6A5B();

    if ( !isdefined( var_4 ) )
        return;

    _id_D570( var_1, min( gettime() + 5000, var_0 ) );
    var_5 = 62500;
    var_6 = 160000;

    if ( var_3 == "flash_grenade" )
    {
        var_5 = 810000;
        var_6 = 1690000;
    }

    var_7 = level.players;
    var_8 = var_4.origin;

    for (;;)
    {
        wait 0.1;

        if ( !isdefined( var_4 ) )
            break;

        if ( distancesquared( var_4.origin, var_8 ) < 400 )
        {
            var_9 = [];

            for ( var_10 = 0; var_10 < var_7.size; var_10++ )
            {
                var_11 = var_7[var_10];
                var_12 = distancesquared( var_4.origin, var_11.origin );

                if ( var_12 < var_5 )
                {
                    var_11 _id_714D( var_1, var_0 );
                    continue;
                }

                if ( var_12 < var_6 )
                    var_9[var_9.size] = var_11;
            }

            var_7 = var_9;

            if ( var_7.size == 0 )
                break;
        }

        var_8 = var_4.origin;
    }
}

_id_714D( var_0, var_1 )
{
    var_2 = self;
    anim._id_F18E = undefined;

    if ( gettime() - var_2._id_8FC6 < 3000 )
        var_2._id_7167["double_grenade"] = gettime() + var_2._id_7218._id_B687;

    var_2._id_8FC6 = gettime();
    var_3 = var_2._id_7167[var_0._id_F259];
    var_2._id_7167[var_0._id_F259] = max( var_1, var_3 );
}

_id_6A5B()
{
    self endon( "killanimscript" );
    self waittill( "grenade_fire", var_0 );
    return var_0;
}

_id_10B72( var_0 )
{
    wait( var_0 );
    self notify( "watchGrenadeTowardsPlayerTimeout" );
}

_id_1D61( var_0, var_1 )
{
    self attach( var_0, var_1 );
    thread _id_486B( var_0, var_1 );
    return var_1;
}

_id_486B( var_0, var_1 )
{
    self endon( "stop grenade check" );
    self waittill( "killanimscript" );

    if ( !isdefined( self ) )
        return;

    if ( isdefined( self._id_AA1C ) )
    {
        self._id_01EE = self._id_AA1C;
        self._id_AA1C = undefined;
    }

    self detach( var_0, var_1 );
}

_id_A971( var_0 )
{
    var_1 = anglestoforward( self.angles );
    var_2 = anglestoright( self.angles );
    var_3 = anglestoup( self.angles );
    var_1 = var_1 * var_0[0];
    var_2 = var_2 * var_0[1];
    var_3 = var_3 * var_0[2];
    return var_1 + var_2 + var_3;
}

_id_714F( var_0, var_1 )
{
    level notify( "armoffset" );
    level endon( "armoffset" );
    var_0 = self.origin + _id_A971( var_0 );

    for (;;)
        wait 0.05;
}

_id_6A58()
{
    var_0 = randomfloat( 360 );
    var_1 = randomfloatrange( 30, 75 );
    var_2 = sin( var_1 );
    var_3 = cos( var_1 );
    var_4 = cos( var_0 ) * var_3;
    var_5 = sin( var_0 ) * var_3;
    var_6 = randomfloatrange( 100, 200 );
    var_7 = ( var_4, var_5, var_2 ) * var_6;
    return var_7;
}

_id_500F()
{
    if ( isdefined( self._id_A56D ) )
        return;

    var_0 = self gettagorigin( "tag_accessory_right" );
    var_1 = _id_6A58();
    self _meth_821C( var_0, var_1, 3 );
}

_id_DB6B()
{
    if ( level._id_11B1[self.team] > 0 && level._id_11B1[self.team] < level._id_11B2 )
    {
        if ( gettime() - level._id_8F70[self.team] > 4000 )
            return 0;

        var_0 = level._id_8F6D[self.team];

        if ( var_0 == self )
            return 0;

        var_1 = isdefined( var_0 ) && distancesquared( self.origin, var_0.origin ) < 65536;

        if ( ( var_1 || distancesquared( self.origin, level._id_8F6F[self.team] ) < 65536 ) && ( !isdefined( self._id_017D ) || distancesquared( self._id_017D.origin, level._id_8F6E[self.team] ) < 262144 ) )
            return 1;
    }

    return 0;
}

_id_34B8()
{
    if ( !isdefined( level._id_8F70[self.team] ) )
        return 0;

    if ( _id_DB6B() )
        return 1;

    if ( gettime() - level._id_8F70[self.team] < level._id_11B3 )
        return 0;

    if ( !_func_011C( self._id_017D ) )
        return 0;

    if ( level._id_11B1[self.team] )
        level._id_11B1[self.team] = 0;

    var_0 = isdefined( self._id_119C ) && self._id_119C;

    if ( !var_0 && _func_0072( self.team ) < _func_0072( self._id_017D.team ) )
        return 0;

    return 1;
}

_id_F755( var_0 )
{
    if ( !isdefined( self._id_017D ) )
        return 0;

    if ( self._id_01AD )
        return 0;

    if ( self._id_0102 == "ambush" || self._id_0102 == "ambush_nodes_only" )
        return 0;

    if ( !self _meth_81C5( self._id_017D.origin ) )
        return 0;

    if ( scripts\anim\utility_common::_id_88FD() )
        return 0;

    if ( !_id_34B8() )
        return 0;

    if ( isdefined( self._id_04A2 ) && self._id_04A2 )
        return 0;

    self _meth_80EF( var_0 );

    if ( self _meth_8288() )
    {
        self._id_0244 = 0;
        self._id_0242 = 0;
        self._id_0DB6._id_993F = 1;

        if ( level._id_11B1[self.team] == 0 )
        {
            level._id_8F70[self.team] = gettime();
            level._id_8F6D[self.team] = self;
        }

        level._id_8F6F[self.team] = self.origin;
        level._id_8F6E[self.team] = self._id_017D.origin;
        level._id_11B1[self.team]++;
        return 1;
    }

    return 0;
}

_id_6C0E( var_0 )
{
    if ( !isdefined( var_0 ) )
        return 0;

    var_1 = var_0 - self _meth_8176();
    var_1 = vectornormalize( var_1 );
    var_2 = vectortoangles( var_1 )[0];
    return _func_000B( var_2 );
}

_id_10BF0()
{
    self._id_89DE = 0;
    self._id_9020 = -1;

    for (;;)
    {
        self waittill( "reload_start" );
        self._id_89DE = 1;
        self._id_9020 = gettime();
        scripts\anim\battlechatter_wrapper::_id_5657();
        _id_10967();
        self._id_89DE = 0;
    }
}

_id_10967()
{
    thread _id_F208( 4, "reloadtimeout" );
    self endon( "reloadtimeout" );
    self endon( "weapon_taken" );

    for (;;)
    {
        self waittill( "reload" );
        var_0 = self getcurrentweapon();

        if ( isnullweapon( var_0 ) )
            break;

        if ( self getcurrentweaponclipammo() >= weaponclipsize( var_0 ) )
            break;
    }

    self notify( "reloadtimeout" );
}

_id_F208( var_0, var_1 )
{
    self endon( var_1 );
    wait( var_0 );
    self notify( var_1 );
}

_id_34EE()
{
    var_0 = self._id_017D.origin - self.origin;
    var_1 = _func_0133( ( var_0[0], var_0[1], 0 ) );

    if ( self._id_01F1.basename == "flash_grenade" )
        return var_1 < 589824;

    return var_1 >= 40000 && var_1 <= 1562500;
}

_id_A0FC()
{
    self endon( "death" );

    if ( !isdefined( level._id_A42F ) )
        self endon( "stop_monitoring_flash" );

    for (;;)
    {
        var_0 = undefined;
        var_1 = undefined;
        var_2 = undefined;
        var_3 = undefined;
        var_4 = undefined;
        self waittill( "flashbang", var_1, var_0, var_2, var_3, var_4 );

        if ( isdefined( self._id_5C79 ) && self._id_5C79 )
            continue;

        if ( isdefined( self._id_CD7E ) && self._id_CD7E != 0 )
            continue;

        if ( isdefined( self.team ) && isdefined( var_4 ) && self.team == var_4 )
        {
            var_0 = 3 * ( var_0 - 0.75 );

            if ( var_0 < 0 )
                continue;

            if ( isdefined( self._id_EF70 ) )
                continue;
        }

        var_5 = 0.2;

        if ( var_0 > 1 - var_5 )
            var_0 = 1.0;
        else
            var_0 = var_0 / ( 1 - var_5 );

        var_6 = 4.5 * var_0;

        if ( var_6 < 0.25 )
            continue;

        self._id_5C86 = var_4;
        _id_5C7E( var_6 );
        self notify( "doFlashBanged", var_1, var_3 );
    }
}

_id_5C7E( var_0 )
{
    if ( isdefined( self._id_5C79 ) && self._id_5C79 )
        return;

    if ( isdefined( self._id_03FF ) )
        return;

    if ( self _meth_81C6() || _id_0694::_id_23A6() )
        return;

    if ( !self._id_0042 || !self._id_0043 )
        return;

    var_1 = gettime() + var_0 * 1000.0;

    if ( isdefined( self._id_5C82 ) )
        self._id_5C82 = max( self._id_5C82, var_1 );
    else
    {
        self._id_5C82 = var_1;

        if ( isdefined( self._id_1C08 ) )
            _id_0009::_id_1C79( "pain_flashed_transition" );
    }

    self notify( "flashed" );
}

_id_599D()
{
    return 1.5;
}

_id_BFEB()
{
    return randomfloatrange( 1, 1.2 );
}

_id_B5B5()
{
    var_0 = self geteye();

    foreach ( var_2 in level.players )
    {
        if ( !self _meth_8066( var_2 ) )
            continue;

        var_3 = var_2 geteye();
        var_4 = vectortoangles( var_0 - var_3 );
        var_5 = anglestoforward( var_4 );
        var_6 = var_2 getplayerangles();
        var_7 = anglestoforward( var_6 );
        var_8 = vectordot( var_5, var_7 );

        if ( var_8 < 0.805 )
            continue;

        if ( scripts\engine\utility::cointoss() && var_8 >= 0.996 )
            continue;

        return 1;
    }

    return 0;
}

_id_3A7C( var_0, var_1 )
{
    self._id_586F = scripts\anim\face::_id_B821( var_0, var_1, self._id_586F );
}

_id_3A6B()
{
    self._id_586F = undefined;
    self _meth_85ED( %head, 0.2 );
}
